(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var $a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var QS={exports:{}},ef={},XS={exports:{}},K={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ma=Symbol.for("react.element"),HO=Symbol.for("react.portal"),WO=Symbol.for("react.fragment"),GO=Symbol.for("react.strict_mode"),KO=Symbol.for("react.profiler"),qO=Symbol.for("react.provider"),JO=Symbol.for("react.context"),YO=Symbol.for("react.forward_ref"),QO=Symbol.for("react.suspense"),XO=Symbol.for("react.memo"),ZO=Symbol.for("react.lazy"),iv=Symbol.iterator;function eA(t){return t===null||typeof t!="object"?null:(t=iv&&t[iv]||t["@@iterator"],typeof t=="function"?t:null)}var ZS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},eb=Object.assign,tb={};function vs(t,e,n){this.props=t,this.context=e,this.refs=tb,this.updater=n||ZS}vs.prototype.isReactComponent={};vs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function nb(){}nb.prototype=vs.prototype;function Tm(t,e,n){this.props=t,this.context=e,this.refs=tb,this.updater=n||ZS}var Mm=Tm.prototype=new nb;Mm.constructor=Tm;eb(Mm,vs.prototype);Mm.isPureReactComponent=!0;var ov=Array.isArray,rb=Object.prototype.hasOwnProperty,Om={current:null},ib={key:!0,ref:!0,__self:!0,__source:!0};function ob(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)rb.call(e,r)&&!ib.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:ma,type:t,key:o,ref:s,props:i,_owner:Om.current}}function tA(t,e){return{$$typeof:ma,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Am(t){return typeof t=="object"&&t!==null&&t.$$typeof===ma}function nA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var sv=/\/+/g;function od(t,e){return typeof t=="object"&&t!==null&&t.key!=null?nA(""+t.key):e.toString(36)}function wc(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case ma:case HO:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+od(s,0):r,ov(i)?(n="",t!=null&&(n=t.replace(sv,"$&/")+"/"),wc(i,e,n,"",function(c){return c})):i!=null&&(Am(i)&&(i=tA(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(sv,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",ov(t))for(var l=0;l<t.length;l++){o=t[l];var a=r+od(o,l);s+=wc(o,e,n,a,i)}else if(a=eA(t),typeof a=="function")for(t=a.call(t),l=0;!(o=t.next()).done;)o=o.value,a=r+od(o,l++),s+=wc(o,e,n,a,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Ba(t,e,n){if(t==null)return t;var r=[],i=0;return wc(t,r,"","",function(o){return e.call(n,o,i++)}),r}function rA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var vt={current:null},Sc={transition:null},iA={ReactCurrentDispatcher:vt,ReactCurrentBatchConfig:Sc,ReactCurrentOwner:Om};function sb(){throw Error("act(...) is not supported in production builds of React.")}K.Children={map:Ba,forEach:function(t,e,n){Ba(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ba(t,function(){e++}),e},toArray:function(t){return Ba(t,function(e){return e})||[]},only:function(t){if(!Am(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};K.Component=vs;K.Fragment=WO;K.Profiler=KO;K.PureComponent=Tm;K.StrictMode=GO;K.Suspense=QO;K.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iA;K.act=sb;K.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=eb({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Om.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)rb.call(e,a)&&!ib.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:ma,type:t.type,key:i,ref:o,props:r,_owner:s}};K.createContext=function(t){return t={$$typeof:JO,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qO,_context:t},t.Consumer=t};K.createElement=ob;K.createFactory=function(t){var e=ob.bind(null,t);return e.type=t,e};K.createRef=function(){return{current:null}};K.forwardRef=function(t){return{$$typeof:YO,render:t}};K.isValidElement=Am;K.lazy=function(t){return{$$typeof:ZO,_payload:{_status:-1,_result:t},_init:rA}};K.memo=function(t,e){return{$$typeof:XO,type:t,compare:e===void 0?null:e}};K.startTransition=function(t){var e=Sc.transition;Sc.transition={};try{t()}finally{Sc.transition=e}};K.unstable_act=sb;K.useCallback=function(t,e){return vt.current.useCallback(t,e)};K.useContext=function(t){return vt.current.useContext(t)};K.useDebugValue=function(){};K.useDeferredValue=function(t){return vt.current.useDeferredValue(t)};K.useEffect=function(t,e){return vt.current.useEffect(t,e)};K.useId=function(){return vt.current.useId()};K.useImperativeHandle=function(t,e,n){return vt.current.useImperativeHandle(t,e,n)};K.useInsertionEffect=function(t,e){return vt.current.useInsertionEffect(t,e)};K.useLayoutEffect=function(t,e){return vt.current.useLayoutEffect(t,e)};K.useMemo=function(t,e){return vt.current.useMemo(t,e)};K.useReducer=function(t,e,n){return vt.current.useReducer(t,e,n)};K.useRef=function(t){return vt.current.useRef(t)};K.useState=function(t){return vt.current.useState(t)};K.useSyncExternalStore=function(t,e,n){return vt.current.useSyncExternalStore(t,e,n)};K.useTransition=function(){return vt.current.useTransition()};K.version="18.3.1";XS.exports=K;var F=XS.exports;const $e=$t(F);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oA=F,sA=Symbol.for("react.element"),lA=Symbol.for("react.fragment"),aA=Object.prototype.hasOwnProperty,cA=oA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uA={key:!0,ref:!0,__self:!0,__source:!0};function lb(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)aA.call(e,r)&&!uA.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:sA,type:t,key:o,ref:s,props:i,_owner:cA.current}}ef.Fragment=lA;ef.jsx=lb;ef.jsxs=lb;QS.exports=ef;var j=QS.exports,xh={},ab={exports:{}},Bt={},cb={exports:{}},ub={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(T,R){var _=T.length;T.push(R);e:for(;0<_;){var q=_-1>>>1,ne=T[q];if(0<i(ne,R))T[q]=R,T[_]=ne,_=q;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var R=T[0],_=T.pop();if(_!==R){T[0]=_;e:for(var q=0,ne=T.length,jt=ne>>>1;q<jt;){var Dt=2*(q+1)-1,yn=T[Dt],ft=Dt+1,vn=T[ft];if(0>i(yn,_))ft<ne&&0>i(vn,yn)?(T[q]=vn,T[ft]=_,q=ft):(T[q]=yn,T[Dt]=_,q=Dt);else if(ft<ne&&0>i(vn,_))T[q]=vn,T[ft]=_,q=ft;else break e}}return R}function i(T,R){var _=T.sortIndex-R.sortIndex;return _!==0?_:T.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var a=[],c=[],u=1,f=null,d=3,p=!1,h=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(T){for(var R=n(c);R!==null;){if(R.callback===null)r(c);else if(R.startTime<=T)r(c),R.sortIndex=R.expirationTime,e(a,R);else break;R=n(c)}}function S(T){if(m=!1,w(T),!h)if(n(a)!==null)h=!0,ee(k);else{var R=n(c);R!==null&&Q(S,R.startTime-T)}}function k(T,R){h=!1,m&&(m=!1,g(E),E=-1),p=!0;var _=d;try{for(w(R),f=n(a);f!==null&&(!(f.expirationTime>R)||T&&!U());){var q=f.callback;if(typeof q=="function"){f.callback=null,d=f.priorityLevel;var ne=q(f.expirationTime<=R);R=t.unstable_now(),typeof ne=="function"?f.callback=ne:f===n(a)&&r(a),w(R)}else r(a);f=n(a)}if(f!==null)var jt=!0;else{var Dt=n(c);Dt!==null&&Q(S,Dt.startTime-R),jt=!1}return jt}finally{f=null,d=_,p=!1}}var b=!1,C=null,E=-1,x=5,A=-1;function U(){return!(t.unstable_now()-A<x)}function te(){if(C!==null){var T=t.unstable_now();A=T;var R=!0;try{R=C(!0,T)}finally{R?Pe():(b=!1,C=null)}}else b=!1}var Pe;if(typeof v=="function")Pe=function(){v(te)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,Y=ce.port2;ce.port1.onmessage=te,Pe=function(){Y.postMessage(null)}}else Pe=function(){y(te,0)};function ee(T){C=T,b||(b=!0,Pe())}function Q(T,R){E=y(function(){T(t.unstable_now())},R)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(T){T.callback=null},t.unstable_continueExecution=function(){h||p||(h=!0,ee(k))},t.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<T?Math.floor(1e3/T):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(T){switch(d){case 1:case 2:case 3:var R=3;break;default:R=d}var _=d;d=R;try{return T()}finally{d=_}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(T,R){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var _=d;d=T;try{return R()}finally{d=_}},t.unstable_scheduleCallback=function(T,R,_){var q=t.unstable_now();switch(typeof _=="object"&&_!==null?(_=_.delay,_=typeof _=="number"&&0<_?q+_:q):_=q,T){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=_+ne,T={id:u++,callback:R,priorityLevel:T,startTime:_,expirationTime:ne,sortIndex:-1},_>q?(T.sortIndex=_,e(c,T),n(a)===null&&T===n(c)&&(m?(g(E),E=-1):m=!0,Q(S,_-q))):(T.sortIndex=ne,e(a,T),h||p||(h=!0,ee(k))),T},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(T){var R=d;return function(){var _=d;d=R;try{return T.apply(this,arguments)}finally{d=_}}}})(ub);cb.exports=ub;var fA=cb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dA=F,Lt=fA;function O(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fb=new Set,Tl={};function eo(t,e){Go(t,e),Go(t+"Capture",e)}function Go(t,e){for(Tl[t]=e,t=0;t<e.length;t++)fb.add(e[t])}var tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Th=Object.prototype.hasOwnProperty,hA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lv={},av={};function pA(t){return Th.call(av,t)?!0:Th.call(lv,t)?!1:hA.test(t)?av[t]=!0:(lv[t]=!0,!1)}function mA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gA(t,e,n,r){if(e===null||typeof e>"u"||mA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wt(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Xe[t]=new wt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Xe[e]=new wt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Xe[t]=new wt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Xe[t]=new wt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Xe[t]=new wt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Xe[t]=new wt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Xe[t]=new wt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Xe[t]=new wt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Xe[t]=new wt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Dm=/[\-:]([a-z])/g;function _m(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Dm,_m);Xe[e]=new wt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Dm,_m);Xe[e]=new wt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Dm,_m);Xe[e]=new wt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Xe[t]=new wt(t,1,!1,t.toLowerCase(),null,!1,!1)});Xe.xlinkHref=new wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Xe[t]=new wt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Pm(t,e,n,r){var i=Xe.hasOwnProperty(e)?Xe[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gA(e,n,i,r)&&(n=null),r||i===null?pA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ar=dA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fa=Symbol.for("react.element"),yo=Symbol.for("react.portal"),vo=Symbol.for("react.fragment"),Nm=Symbol.for("react.strict_mode"),Mh=Symbol.for("react.profiler"),db=Symbol.for("react.provider"),hb=Symbol.for("react.context"),Im=Symbol.for("react.forward_ref"),Oh=Symbol.for("react.suspense"),Ah=Symbol.for("react.suspense_list"),Rm=Symbol.for("react.memo"),mr=Symbol.for("react.lazy"),pb=Symbol.for("react.offscreen"),cv=Symbol.iterator;function $s(t){return t===null||typeof t!="object"?null:(t=cv&&t[cv]||t["@@iterator"],typeof t=="function"?t:null)}var we=Object.assign,sd;function qs(t){if(sd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);sd=e&&e[1]||""}return`
`+sd+t}var ld=!1;function ad(t,e){if(!t||ld)return"";ld=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var a=`
`+i[s].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=s&&0<=l);break}}}finally{ld=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?qs(t):""}function yA(t){switch(t.tag){case 5:return qs(t.type);case 16:return qs("Lazy");case 13:return qs("Suspense");case 19:return qs("SuspenseList");case 0:case 2:case 15:return t=ad(t.type,!1),t;case 11:return t=ad(t.type.render,!1),t;case 1:return t=ad(t.type,!0),t;default:return""}}function Dh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vo:return"Fragment";case yo:return"Portal";case Mh:return"Profiler";case Nm:return"StrictMode";case Oh:return"Suspense";case Ah:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case hb:return(t.displayName||"Context")+".Consumer";case db:return(t._context.displayName||"Context")+".Provider";case Im:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Rm:return e=t.displayName||null,e!==null?e:Dh(t.type)||"Memo";case mr:e=t._payload,t=t._init;try{return Dh(t(e))}catch{}}return null}function vA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dh(e);case 8:return e===Nm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Gr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function wA(t){var e=mb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ja(t){t._valueTracker||(t._valueTracker=wA(t))}function gb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=mb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Kc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function _h(t,e){var n=e.checked;return we({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function uv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Gr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function yb(t,e){e=e.checked,e!=null&&Pm(t,"checked",e,!1)}function Ph(t,e){yb(t,e);var n=Gr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Nh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Nh(t,e.type,Gr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function fv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Nh(t,e,n){(e!=="number"||Kc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Js=Array.isArray;function _o(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Gr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ih(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return we({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(O(92));if(Js(n)){if(1<n.length)throw Error(O(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Gr(n)}}function vb(t,e){var n=Gr(e.value),r=Gr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function hv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function wb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?wb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Va,Sb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Va=Va||document.createElement("div"),Va.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Va.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ml(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var rl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},SA=["Webkit","ms","Moz","O"];Object.keys(rl).forEach(function(t){SA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),rl[e]=rl[t]})});function bb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||rl.hasOwnProperty(t)&&rl[t]?(""+e).trim():e+"px"}function kb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=bb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var bA=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lh(t,e){if(e){if(bA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function $h(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bh=null;function Lm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fh=null,Po=null,No=null;function pv(t){if(t=va(t)){if(typeof Fh!="function")throw Error(O(280));var e=t.stateNode;e&&(e=sf(e),Fh(t.stateNode,t.type,e))}}function Cb(t){Po?No?No.push(t):No=[t]:Po=t}function Eb(){if(Po){var t=Po,e=No;if(No=Po=null,pv(t),e)for(t=0;t<e.length;t++)pv(e[t])}}function xb(t,e){return t(e)}function Tb(){}var cd=!1;function Mb(t,e,n){if(cd)return t(e,n);cd=!0;try{return xb(t,e,n)}finally{cd=!1,(Po!==null||No!==null)&&(Tb(),Eb())}}function Ol(t,e){var n=t.stateNode;if(n===null)return null;var r=sf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(O(231,e,typeof n));return n}var jh=!1;if(tr)try{var Bs={};Object.defineProperty(Bs,"passive",{get:function(){jh=!0}}),window.addEventListener("test",Bs,Bs),window.removeEventListener("test",Bs,Bs)}catch{jh=!1}function kA(t,e,n,r,i,o,s,l,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var il=!1,qc=null,Jc=!1,Vh=null,CA={onError:function(t){il=!0,qc=t}};function EA(t,e,n,r,i,o,s,l,a){il=!1,qc=null,kA.apply(CA,arguments)}function xA(t,e,n,r,i,o,s,l,a){if(EA.apply(this,arguments),il){if(il){var c=qc;il=!1,qc=null}else throw Error(O(198));Jc||(Jc=!0,Vh=c)}}function to(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ob(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function mv(t){if(to(t)!==t)throw Error(O(188))}function TA(t){var e=t.alternate;if(!e){if(e=to(t),e===null)throw Error(O(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return mv(i),t;if(o===r)return mv(i),e;o=o.sibling}throw Error(O(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(O(189))}}if(n.alternate!==r)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?t:e}function Ab(t){return t=TA(t),t!==null?Db(t):null}function Db(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Db(t);if(e!==null)return e;t=t.sibling}return null}var _b=Lt.unstable_scheduleCallback,gv=Lt.unstable_cancelCallback,MA=Lt.unstable_shouldYield,OA=Lt.unstable_requestPaint,Ce=Lt.unstable_now,AA=Lt.unstable_getCurrentPriorityLevel,$m=Lt.unstable_ImmediatePriority,Pb=Lt.unstable_UserBlockingPriority,Yc=Lt.unstable_NormalPriority,DA=Lt.unstable_LowPriority,Nb=Lt.unstable_IdlePriority,tf=null,Mn=null;function _A(t){if(Mn&&typeof Mn.onCommitFiberRoot=="function")try{Mn.onCommitFiberRoot(tf,t,void 0,(t.current.flags&128)===128)}catch{}}var cn=Math.clz32?Math.clz32:IA,PA=Math.log,NA=Math.LN2;function IA(t){return t>>>=0,t===0?32:31-(PA(t)/NA|0)|0}var za=64,Ua=4194304;function Ys(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Qc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=Ys(l):(o&=s,o!==0&&(r=Ys(o)))}else s=n&~i,s!==0?r=Ys(s):o!==0&&(r=Ys(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-cn(e),i=1<<n,r|=t[n],e&=~i;return r}function RA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-cn(o),l=1<<s,a=i[s];a===-1?(!(l&n)||l&r)&&(i[s]=RA(l,e)):a<=e&&(t.expiredLanes|=l),o&=~l}}function zh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ib(){var t=za;return za<<=1,!(za&4194240)&&(za=64),t}function ud(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ga(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-cn(e),t[e]=n}function $A(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-cn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Bm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-cn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ie=0;function Rb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Lb,Fm,$b,Bb,Fb,Uh=!1,Ha=[],Pr=null,Nr=null,Ir=null,Al=new Map,Dl=new Map,Sr=[],BA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yv(t,e){switch(t){case"focusin":case"focusout":Pr=null;break;case"dragenter":case"dragleave":Nr=null;break;case"mouseover":case"mouseout":Ir=null;break;case"pointerover":case"pointerout":Al.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dl.delete(e.pointerId)}}function Fs(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=va(e),e!==null&&Fm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function FA(t,e,n,r,i){switch(e){case"focusin":return Pr=Fs(Pr,t,e,n,r,i),!0;case"dragenter":return Nr=Fs(Nr,t,e,n,r,i),!0;case"mouseover":return Ir=Fs(Ir,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Al.set(o,Fs(Al.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Dl.set(o,Fs(Dl.get(o)||null,t,e,n,r,i)),!0}return!1}function jb(t){var e=ki(t.target);if(e!==null){var n=to(e);if(n!==null){if(e=n.tag,e===13){if(e=Ob(n),e!==null){t.blockedOn=e,Fb(t.priority,function(){$b(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Bh=r,n.target.dispatchEvent(r),Bh=null}else return e=va(n),e!==null&&Fm(e),t.blockedOn=n,!1;e.shift()}return!0}function vv(t,e,n){bc(t)&&n.delete(e)}function jA(){Uh=!1,Pr!==null&&bc(Pr)&&(Pr=null),Nr!==null&&bc(Nr)&&(Nr=null),Ir!==null&&bc(Ir)&&(Ir=null),Al.forEach(vv),Dl.forEach(vv)}function js(t,e){t.blockedOn===e&&(t.blockedOn=null,Uh||(Uh=!0,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,jA)))}function _l(t){function e(i){return js(i,t)}if(0<Ha.length){js(Ha[0],t);for(var n=1;n<Ha.length;n++){var r=Ha[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Pr!==null&&js(Pr,t),Nr!==null&&js(Nr,t),Ir!==null&&js(Ir,t),Al.forEach(e),Dl.forEach(e),n=0;n<Sr.length;n++)r=Sr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Sr.length&&(n=Sr[0],n.blockedOn===null);)jb(n),n.blockedOn===null&&Sr.shift()}var Io=ar.ReactCurrentBatchConfig,Xc=!0;function VA(t,e,n,r){var i=ie,o=Io.transition;Io.transition=null;try{ie=1,jm(t,e,n,r)}finally{ie=i,Io.transition=o}}function zA(t,e,n,r){var i=ie,o=Io.transition;Io.transition=null;try{ie=4,jm(t,e,n,r)}finally{ie=i,Io.transition=o}}function jm(t,e,n,r){if(Xc){var i=Hh(t,e,n,r);if(i===null)Sd(t,e,r,Zc,n),yv(t,r);else if(FA(i,t,e,n,r))r.stopPropagation();else if(yv(t,r),e&4&&-1<BA.indexOf(t)){for(;i!==null;){var o=va(i);if(o!==null&&Lb(o),o=Hh(t,e,n,r),o===null&&Sd(t,e,r,Zc,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Sd(t,e,r,null,n)}}var Zc=null;function Hh(t,e,n,r){if(Zc=null,t=Lm(r),t=ki(t),t!==null)if(e=to(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ob(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Zc=t,null}function Vb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(AA()){case $m:return 1;case Pb:return 4;case Yc:case DA:return 16;case Nb:return 536870912;default:return 16}default:return 16}}var Er=null,Vm=null,kc=null;function zb(){if(kc)return kc;var t,e=Vm,n=e.length,r,i="value"in Er?Er.value:Er.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return kc=i.slice(t,1<r?1-r:void 0)}function Cc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wa(){return!0}function wv(){return!1}function Ft(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Wa:wv,this.isPropagationStopped=wv,this}return we(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wa)},persist:function(){},isPersistent:Wa}),e}var ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zm=Ft(ws),ya=we({},ws,{view:0,detail:0}),UA=Ft(ya),fd,dd,Vs,nf=we({},ya,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Um,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vs&&(Vs&&t.type==="mousemove"?(fd=t.screenX-Vs.screenX,dd=t.screenY-Vs.screenY):dd=fd=0,Vs=t),fd)},movementY:function(t){return"movementY"in t?t.movementY:dd}}),Sv=Ft(nf),HA=we({},nf,{dataTransfer:0}),WA=Ft(HA),GA=we({},ya,{relatedTarget:0}),hd=Ft(GA),KA=we({},ws,{animationName:0,elapsedTime:0,pseudoElement:0}),qA=Ft(KA),JA=we({},ws,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),YA=Ft(JA),QA=we({},ws,{data:0}),bv=Ft(QA),XA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eD[t])?!!e[t]:!1}function Um(){return tD}var nD=we({},ya,{key:function(t){if(t.key){var e=XA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Cc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ZA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Um,charCode:function(t){return t.type==="keypress"?Cc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Cc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rD=Ft(nD),iD=we({},nf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kv=Ft(iD),oD=we({},ya,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Um}),sD=Ft(oD),lD=we({},ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),aD=Ft(lD),cD=we({},nf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uD=Ft(cD),fD=[9,13,27,32],Hm=tr&&"CompositionEvent"in window,ol=null;tr&&"documentMode"in document&&(ol=document.documentMode);var dD=tr&&"TextEvent"in window&&!ol,Ub=tr&&(!Hm||ol&&8<ol&&11>=ol),Cv=String.fromCharCode(32),Ev=!1;function Hb(t,e){switch(t){case"keyup":return fD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var wo=!1;function hD(t,e){switch(t){case"compositionend":return Wb(e);case"keypress":return e.which!==32?null:(Ev=!0,Cv);case"textInput":return t=e.data,t===Cv&&Ev?null:t;default:return null}}function pD(t,e){if(wo)return t==="compositionend"||!Hm&&Hb(t,e)?(t=zb(),kc=Vm=Er=null,wo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ub&&e.locale!=="ko"?null:e.data;default:return null}}var mD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!mD[t.type]:e==="textarea"}function Gb(t,e,n,r){Cb(r),e=eu(e,"onChange"),0<e.length&&(n=new zm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var sl=null,Pl=null;function gD(t){rk(t,0)}function rf(t){var e=ko(t);if(gb(e))return t}function yD(t,e){if(t==="change")return e}var Kb=!1;if(tr){var pd;if(tr){var md="oninput"in document;if(!md){var Tv=document.createElement("div");Tv.setAttribute("oninput","return;"),md=typeof Tv.oninput=="function"}pd=md}else pd=!1;Kb=pd&&(!document.documentMode||9<document.documentMode)}function Mv(){sl&&(sl.detachEvent("onpropertychange",qb),Pl=sl=null)}function qb(t){if(t.propertyName==="value"&&rf(Pl)){var e=[];Gb(e,Pl,t,Lm(t)),Mb(gD,e)}}function vD(t,e,n){t==="focusin"?(Mv(),sl=e,Pl=n,sl.attachEvent("onpropertychange",qb)):t==="focusout"&&Mv()}function wD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return rf(Pl)}function SD(t,e){if(t==="click")return rf(e)}function bD(t,e){if(t==="input"||t==="change")return rf(e)}function kD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mn=typeof Object.is=="function"?Object.is:kD;function Nl(t,e){if(mn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Th.call(e,i)||!mn(t[i],e[i]))return!1}return!0}function Ov(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Av(t,e){var n=Ov(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ov(n)}}function Jb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Jb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Yb(){for(var t=window,e=Kc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Kc(t.document)}return e}function Wm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function CD(t){var e=Yb(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Jb(n.ownerDocument.documentElement,n)){if(r!==null&&Wm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Av(n,o);var s=Av(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ED=tr&&"documentMode"in document&&11>=document.documentMode,So=null,Wh=null,ll=null,Gh=!1;function Dv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gh||So==null||So!==Kc(r)||(r=So,"selectionStart"in r&&Wm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ll&&Nl(ll,r)||(ll=r,r=eu(Wh,"onSelect"),0<r.length&&(e=new zm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=So)))}function Ga(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var bo={animationend:Ga("Animation","AnimationEnd"),animationiteration:Ga("Animation","AnimationIteration"),animationstart:Ga("Animation","AnimationStart"),transitionend:Ga("Transition","TransitionEnd")},gd={},Qb={};tr&&(Qb=document.createElement("div").style,"AnimationEvent"in window||(delete bo.animationend.animation,delete bo.animationiteration.animation,delete bo.animationstart.animation),"TransitionEvent"in window||delete bo.transitionend.transition);function of(t){if(gd[t])return gd[t];if(!bo[t])return t;var e=bo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Qb)return gd[t]=e[n];return t}var Xb=of("animationend"),Zb=of("animationiteration"),ek=of("animationstart"),tk=of("transitionend"),nk=new Map,_v="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ti(t,e){nk.set(t,e),eo(e,[t])}for(var yd=0;yd<_v.length;yd++){var vd=_v[yd],xD=vd.toLowerCase(),TD=vd[0].toUpperCase()+vd.slice(1);ti(xD,"on"+TD)}ti(Xb,"onAnimationEnd");ti(Zb,"onAnimationIteration");ti(ek,"onAnimationStart");ti("dblclick","onDoubleClick");ti("focusin","onFocus");ti("focusout","onBlur");ti(tk,"onTransitionEnd");Go("onMouseEnter",["mouseout","mouseover"]);Go("onMouseLeave",["mouseout","mouseover"]);Go("onPointerEnter",["pointerout","pointerover"]);Go("onPointerLeave",["pointerout","pointerover"]);eo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));eo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));eo("onBeforeInput",["compositionend","keypress","textInput","paste"]);eo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));eo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));eo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qs));function Pv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,xA(r,e,void 0,t),t.currentTarget=null}function rk(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==o&&i.isPropagationStopped())break e;Pv(i,l,c),o=a}else for(s=0;s<r.length;s++){if(l=r[s],a=l.instance,c=l.currentTarget,l=l.listener,a!==o&&i.isPropagationStopped())break e;Pv(i,l,c),o=a}}}if(Jc)throw t=Vh,Jc=!1,Vh=null,t}function ue(t,e){var n=e[Qh];n===void 0&&(n=e[Qh]=new Set);var r=t+"__bubble";n.has(r)||(ik(e,t,2,!1),n.add(r))}function wd(t,e,n){var r=0;e&&(r|=4),ik(n,t,r,e)}var Ka="_reactListening"+Math.random().toString(36).slice(2);function Il(t){if(!t[Ka]){t[Ka]=!0,fb.forEach(function(n){n!=="selectionchange"&&(MD.has(n)||wd(n,!1,t),wd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ka]||(e[Ka]=!0,wd("selectionchange",!1,e))}}function ik(t,e,n,r){switch(Vb(e)){case 1:var i=VA;break;case 4:i=zA;break;default:i=jm}n=i.bind(null,e,n,t),i=void 0,!jh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Sd(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var a=s.tag;if((a===3||a===4)&&(a=s.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;s=s.return}for(;l!==null;){if(s=ki(l),s===null)return;if(a=s.tag,a===5||a===6){r=o=s;continue e}l=l.parentNode}}r=r.return}Mb(function(){var c=o,u=Lm(n),f=[];e:{var d=nk.get(t);if(d!==void 0){var p=zm,h=t;switch(t){case"keypress":if(Cc(n)===0)break e;case"keydown":case"keyup":p=rD;break;case"focusin":h="focus",p=hd;break;case"focusout":h="blur",p=hd;break;case"beforeblur":case"afterblur":p=hd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Sv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=WA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=sD;break;case Xb:case Zb:case ek:p=qA;break;case tk:p=aD;break;case"scroll":p=UA;break;case"wheel":p=uD;break;case"copy":case"cut":case"paste":p=YA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=kv}var m=(e&4)!==0,y=!m&&t==="scroll",g=m?d!==null?d+"Capture":null:d;m=[];for(var v=c,w;v!==null;){w=v;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,g!==null&&(S=Ol(v,g),S!=null&&m.push(Rl(v,S,w)))),y)break;v=v.return}0<m.length&&(d=new p(d,h,null,n,u),f.push({event:d,listeners:m}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",d&&n!==Bh&&(h=n.relatedTarget||n.fromElement)&&(ki(h)||h[nr]))break e;if((p||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,p?(h=n.relatedTarget||n.toElement,p=c,h=h?ki(h):null,h!==null&&(y=to(h),h!==y||h.tag!==5&&h.tag!==6)&&(h=null)):(p=null,h=c),p!==h)){if(m=Sv,S="onMouseLeave",g="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=kv,S="onPointerLeave",g="onPointerEnter",v="pointer"),y=p==null?d:ko(p),w=h==null?d:ko(h),d=new m(S,v+"leave",p,n,u),d.target=y,d.relatedTarget=w,S=null,ki(u)===c&&(m=new m(g,v+"enter",h,n,u),m.target=w,m.relatedTarget=y,S=m),y=S,p&&h)t:{for(m=p,g=h,v=0,w=m;w;w=lo(w))v++;for(w=0,S=g;S;S=lo(S))w++;for(;0<v-w;)m=lo(m),v--;for(;0<w-v;)g=lo(g),w--;for(;v--;){if(m===g||g!==null&&m===g.alternate)break t;m=lo(m),g=lo(g)}m=null}else m=null;p!==null&&Nv(f,d,p,m,!1),h!==null&&y!==null&&Nv(f,y,h,m,!0)}}e:{if(d=c?ko(c):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var k=yD;else if(xv(d))if(Kb)k=bD;else{k=wD;var b=vD}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(k=SD);if(k&&(k=k(t,c))){Gb(f,k,n,u);break e}b&&b(t,d,c),t==="focusout"&&(b=d._wrapperState)&&b.controlled&&d.type==="number"&&Nh(d,"number",d.value)}switch(b=c?ko(c):window,t){case"focusin":(xv(b)||b.contentEditable==="true")&&(So=b,Wh=c,ll=null);break;case"focusout":ll=Wh=So=null;break;case"mousedown":Gh=!0;break;case"contextmenu":case"mouseup":case"dragend":Gh=!1,Dv(f,n,u);break;case"selectionchange":if(ED)break;case"keydown":case"keyup":Dv(f,n,u)}var C;if(Hm)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else wo?Hb(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(Ub&&n.locale!=="ko"&&(wo||E!=="onCompositionStart"?E==="onCompositionEnd"&&wo&&(C=zb()):(Er=u,Vm="value"in Er?Er.value:Er.textContent,wo=!0)),b=eu(c,E),0<b.length&&(E=new bv(E,t,null,n,u),f.push({event:E,listeners:b}),C?E.data=C:(C=Wb(n),C!==null&&(E.data=C)))),(C=dD?hD(t,n):pD(t,n))&&(c=eu(c,"onBeforeInput"),0<c.length&&(u=new bv("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=C))}rk(f,e)})}function Rl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function eu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Ol(t,n),o!=null&&r.unshift(Rl(t,o,i)),o=Ol(t,e),o!=null&&r.push(Rl(t,o,i))),t=t.return}return r}function lo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Nv(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,i?(a=Ol(n,o),a!=null&&s.unshift(Rl(n,a,l))):i||(a=Ol(n,o),a!=null&&s.push(Rl(n,a,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var OD=/\r\n?/g,AD=/\u0000|\uFFFD/g;function Iv(t){return(typeof t=="string"?t:""+t).replace(OD,`
`).replace(AD,"")}function qa(t,e,n){if(e=Iv(e),Iv(t)!==e&&n)throw Error(O(425))}function tu(){}var Kh=null,qh=null;function Jh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yh=typeof setTimeout=="function"?setTimeout:void 0,DD=typeof clearTimeout=="function"?clearTimeout:void 0,Rv=typeof Promise=="function"?Promise:void 0,_D=typeof queueMicrotask=="function"?queueMicrotask:typeof Rv<"u"?function(t){return Rv.resolve(null).then(t).catch(PD)}:Yh;function PD(t){setTimeout(function(){throw t})}function bd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),_l(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);_l(e)}function Rr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Lv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ss=Math.random().toString(36).slice(2),En="__reactFiber$"+Ss,Ll="__reactProps$"+Ss,nr="__reactContainer$"+Ss,Qh="__reactEvents$"+Ss,ND="__reactListeners$"+Ss,ID="__reactHandles$"+Ss;function ki(t){var e=t[En];if(e)return e;for(var n=t.parentNode;n;){if(e=n[nr]||n[En]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Lv(t);t!==null;){if(n=t[En])return n;t=Lv(t)}return e}t=n,n=t.parentNode}return null}function va(t){return t=t[En]||t[nr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ko(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(O(33))}function sf(t){return t[Ll]||null}var Xh=[],Co=-1;function ni(t){return{current:t}}function de(t){0>Co||(t.current=Xh[Co],Xh[Co]=null,Co--)}function ae(t,e){Co++,Xh[Co]=t.current,t.current=e}var Kr={},at=ni(Kr),Et=ni(!1),ji=Kr;function Ko(t,e){var n=t.type.contextTypes;if(!n)return Kr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function xt(t){return t=t.childContextTypes,t!=null}function nu(){de(Et),de(at)}function $v(t,e,n){if(at.current!==Kr)throw Error(O(168));ae(at,e),ae(Et,n)}function ok(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(O(108,vA(t)||"Unknown",i));return we({},n,r)}function ru(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Kr,ji=at.current,ae(at,t),ae(Et,Et.current),!0}function Bv(t,e,n){var r=t.stateNode;if(!r)throw Error(O(169));n?(t=ok(t,e,ji),r.__reactInternalMemoizedMergedChildContext=t,de(Et),de(at),ae(at,t)):de(Et),ae(Et,n)}var Kn=null,lf=!1,kd=!1;function sk(t){Kn===null?Kn=[t]:Kn.push(t)}function RD(t){lf=!0,sk(t)}function ri(){if(!kd&&Kn!==null){kd=!0;var t=0,e=ie;try{var n=Kn;for(ie=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Kn=null,lf=!1}catch(i){throw Kn!==null&&(Kn=Kn.slice(t+1)),_b($m,ri),i}finally{ie=e,kd=!1}}return null}var Eo=[],xo=0,iu=null,ou=0,zt=[],Ut=0,Vi=null,qn=1,Jn="";function mi(t,e){Eo[xo++]=ou,Eo[xo++]=iu,iu=t,ou=e}function lk(t,e,n){zt[Ut++]=qn,zt[Ut++]=Jn,zt[Ut++]=Vi,Vi=t;var r=qn;t=Jn;var i=32-cn(r)-1;r&=~(1<<i),n+=1;var o=32-cn(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,qn=1<<32-cn(e)+i|n<<i|r,Jn=o+t}else qn=1<<o|n<<i|r,Jn=t}function Gm(t){t.return!==null&&(mi(t,1),lk(t,1,0))}function Km(t){for(;t===iu;)iu=Eo[--xo],Eo[xo]=null,ou=Eo[--xo],Eo[xo]=null;for(;t===Vi;)Vi=zt[--Ut],zt[Ut]=null,Jn=zt[--Ut],zt[Ut]=null,qn=zt[--Ut],zt[Ut]=null}var It=null,Nt=null,me=!1,sn=null;function ak(t,e){var n=Kt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Fv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,It=t,Nt=Rr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,It=t,Nt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Vi!==null?{id:qn,overflow:Jn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Kt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,It=t,Nt=null,!0):!1;default:return!1}}function Zh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ep(t){if(me){var e=Nt;if(e){var n=e;if(!Fv(t,e)){if(Zh(t))throw Error(O(418));e=Rr(n.nextSibling);var r=It;e&&Fv(t,e)?ak(r,n):(t.flags=t.flags&-4097|2,me=!1,It=t)}}else{if(Zh(t))throw Error(O(418));t.flags=t.flags&-4097|2,me=!1,It=t}}}function jv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;It=t}function Ja(t){if(t!==It)return!1;if(!me)return jv(t),me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Jh(t.type,t.memoizedProps)),e&&(e=Nt)){if(Zh(t))throw ck(),Error(O(418));for(;e;)ak(t,e),e=Rr(e.nextSibling)}if(jv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Nt=Rr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Nt=null}}else Nt=It?Rr(t.stateNode.nextSibling):null;return!0}function ck(){for(var t=Nt;t;)t=Rr(t.nextSibling)}function qo(){Nt=It=null,me=!1}function qm(t){sn===null?sn=[t]:sn.push(t)}var LD=ar.ReactCurrentBatchConfig;function zs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var r=n.stateNode}if(!r)throw Error(O(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,t))}return t}function Ya(t,e){throw t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Vv(t){var e=t._init;return e(t._payload)}function uk(t){function e(g,v){if(t){var w=g.deletions;w===null?(g.deletions=[v],g.flags|=16):w.push(v)}}function n(g,v){if(!t)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function r(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function i(g,v){return g=Fr(g,v),g.index=0,g.sibling=null,g}function o(g,v,w){return g.index=w,t?(w=g.alternate,w!==null?(w=w.index,w<v?(g.flags|=2,v):w):(g.flags|=2,v)):(g.flags|=1048576,v)}function s(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,v,w,S){return v===null||v.tag!==6?(v=Ad(w,g.mode,S),v.return=g,v):(v=i(v,w),v.return=g,v)}function a(g,v,w,S){var k=w.type;return k===vo?u(g,v,w.props.children,S,w.key):v!==null&&(v.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===mr&&Vv(k)===v.type)?(S=i(v,w.props),S.ref=zs(g,v,w),S.return=g,S):(S=Dc(w.type,w.key,w.props,null,g.mode,S),S.ref=zs(g,v,w),S.return=g,S)}function c(g,v,w,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=Dd(w,g.mode,S),v.return=g,v):(v=i(v,w.children||[]),v.return=g,v)}function u(g,v,w,S,k){return v===null||v.tag!==7?(v=_i(w,g.mode,S,k),v.return=g,v):(v=i(v,w),v.return=g,v)}function f(g,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Ad(""+v,g.mode,w),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Fa:return w=Dc(v.type,v.key,v.props,null,g.mode,w),w.ref=zs(g,null,v),w.return=g,w;case yo:return v=Dd(v,g.mode,w),v.return=g,v;case mr:var S=v._init;return f(g,S(v._payload),w)}if(Js(v)||$s(v))return v=_i(v,g.mode,w,null),v.return=g,v;Ya(g,v)}return null}function d(g,v,w,S){var k=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return k!==null?null:l(g,v,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Fa:return w.key===k?a(g,v,w,S):null;case yo:return w.key===k?c(g,v,w,S):null;case mr:return k=w._init,d(g,v,k(w._payload),S)}if(Js(w)||$s(w))return k!==null?null:u(g,v,w,S,null);Ya(g,w)}return null}function p(g,v,w,S,k){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(w)||null,l(v,g,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Fa:return g=g.get(S.key===null?w:S.key)||null,a(v,g,S,k);case yo:return g=g.get(S.key===null?w:S.key)||null,c(v,g,S,k);case mr:var b=S._init;return p(g,v,w,b(S._payload),k)}if(Js(S)||$s(S))return g=g.get(w)||null,u(v,g,S,k,null);Ya(v,S)}return null}function h(g,v,w,S){for(var k=null,b=null,C=v,E=v=0,x=null;C!==null&&E<w.length;E++){C.index>E?(x=C,C=null):x=C.sibling;var A=d(g,C,w[E],S);if(A===null){C===null&&(C=x);break}t&&C&&A.alternate===null&&e(g,C),v=o(A,v,E),b===null?k=A:b.sibling=A,b=A,C=x}if(E===w.length)return n(g,C),me&&mi(g,E),k;if(C===null){for(;E<w.length;E++)C=f(g,w[E],S),C!==null&&(v=o(C,v,E),b===null?k=C:b.sibling=C,b=C);return me&&mi(g,E),k}for(C=r(g,C);E<w.length;E++)x=p(C,g,E,w[E],S),x!==null&&(t&&x.alternate!==null&&C.delete(x.key===null?E:x.key),v=o(x,v,E),b===null?k=x:b.sibling=x,b=x);return t&&C.forEach(function(U){return e(g,U)}),me&&mi(g,E),k}function m(g,v,w,S){var k=$s(w);if(typeof k!="function")throw Error(O(150));if(w=k.call(w),w==null)throw Error(O(151));for(var b=k=null,C=v,E=v=0,x=null,A=w.next();C!==null&&!A.done;E++,A=w.next()){C.index>E?(x=C,C=null):x=C.sibling;var U=d(g,C,A.value,S);if(U===null){C===null&&(C=x);break}t&&C&&U.alternate===null&&e(g,C),v=o(U,v,E),b===null?k=U:b.sibling=U,b=U,C=x}if(A.done)return n(g,C),me&&mi(g,E),k;if(C===null){for(;!A.done;E++,A=w.next())A=f(g,A.value,S),A!==null&&(v=o(A,v,E),b===null?k=A:b.sibling=A,b=A);return me&&mi(g,E),k}for(C=r(g,C);!A.done;E++,A=w.next())A=p(C,g,E,A.value,S),A!==null&&(t&&A.alternate!==null&&C.delete(A.key===null?E:A.key),v=o(A,v,E),b===null?k=A:b.sibling=A,b=A);return t&&C.forEach(function(te){return e(g,te)}),me&&mi(g,E),k}function y(g,v,w,S){if(typeof w=="object"&&w!==null&&w.type===vo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Fa:e:{for(var k=w.key,b=v;b!==null;){if(b.key===k){if(k=w.type,k===vo){if(b.tag===7){n(g,b.sibling),v=i(b,w.props.children),v.return=g,g=v;break e}}else if(b.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===mr&&Vv(k)===b.type){n(g,b.sibling),v=i(b,w.props),v.ref=zs(g,b,w),v.return=g,g=v;break e}n(g,b);break}else e(g,b);b=b.sibling}w.type===vo?(v=_i(w.props.children,g.mode,S,w.key),v.return=g,g=v):(S=Dc(w.type,w.key,w.props,null,g.mode,S),S.ref=zs(g,v,w),S.return=g,g=S)}return s(g);case yo:e:{for(b=w.key;v!==null;){if(v.key===b)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(g,v.sibling),v=i(v,w.children||[]),v.return=g,g=v;break e}else{n(g,v);break}else e(g,v);v=v.sibling}v=Dd(w,g.mode,S),v.return=g,g=v}return s(g);case mr:return b=w._init,y(g,v,b(w._payload),S)}if(Js(w))return h(g,v,w,S);if($s(w))return m(g,v,w,S);Ya(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(g,v.sibling),v=i(v,w),v.return=g,g=v):(n(g,v),v=Ad(w,g.mode,S),v.return=g,g=v),s(g)):n(g,v)}return y}var Jo=uk(!0),fk=uk(!1),su=ni(null),lu=null,To=null,Jm=null;function Ym(){Jm=To=lu=null}function Qm(t){var e=su.current;de(su),t._currentValue=e}function tp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ro(t,e){lu=t,Jm=To=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(kt=!0),t.firstContext=null)}function Zt(t){var e=t._currentValue;if(Jm!==t)if(t={context:t,memoizedValue:e,next:null},To===null){if(lu===null)throw Error(O(308));To=t,lu.dependencies={lanes:0,firstContext:t}}else To=To.next=t;return e}var Ci=null;function Xm(t){Ci===null?Ci=[t]:Ci.push(t)}function dk(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Xm(e)):(n.next=i.next,i.next=n),e.interleaved=n,rr(t,r)}function rr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var gr=!1;function Zm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Z&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,rr(t,n)}return i=r.interleaved,i===null?(e.next=e,Xm(r)):(e.next=i.next,i.next=e),r.interleaved=e,rr(t,n)}function Ec(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bm(t,n)}}function zv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function au(t,e,n,r){var i=t.updateQueue;gr=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,c=a.next;a.next=null,s===null?o=c:s.next=c,s=a;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==s&&(l===null?u.firstBaseUpdate=c:l.next=c,u.lastBaseUpdate=a))}if(o!==null){var f=i.baseState;s=0,u=c=a=null,l=o;do{var d=l.lane,p=l.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var h=t,m=l;switch(d=e,p=n,m.tag){case 1:if(h=m.payload,typeof h=="function"){f=h.call(p,f,d);break e}f=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=m.payload,d=typeof h=="function"?h.call(p,f,d):h,d==null)break e;f=we({},f,d);break e;case 2:gr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[l]:d.push(l))}else p={eventTime:p,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(c=u=p,a=f):u=u.next=p,s|=d;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;d=l,l=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(1);if(u===null&&(a=f),i.baseState=a,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Ui|=s,t.lanes=s,t.memoizedState=f}}function Uv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(O(191,i));i.call(r)}}}var wa={},On=ni(wa),$l=ni(wa),Bl=ni(wa);function Ei(t){if(t===wa)throw Error(O(174));return t}function eg(t,e){switch(ae(Bl,e),ae($l,t),ae(On,wa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Rh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Rh(e,t)}de(On),ae(On,e)}function Yo(){de(On),de($l),de(Bl)}function pk(t){Ei(Bl.current);var e=Ei(On.current),n=Rh(e,t.type);e!==n&&(ae($l,t),ae(On,n))}function tg(t){$l.current===t&&(de(On),de($l))}var ye=ni(0);function cu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Cd=[];function ng(){for(var t=0;t<Cd.length;t++)Cd[t]._workInProgressVersionPrimary=null;Cd.length=0}var xc=ar.ReactCurrentDispatcher,Ed=ar.ReactCurrentBatchConfig,zi=0,ve=null,Me=null,Re=null,uu=!1,al=!1,Fl=0,$D=0;function Ze(){throw Error(O(321))}function rg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!mn(t[n],e[n]))return!1;return!0}function ig(t,e,n,r,i,o){if(zi=o,ve=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xc.current=t===null||t.memoizedState===null?VD:zD,t=n(r,i),al){o=0;do{if(al=!1,Fl=0,25<=o)throw Error(O(301));o+=1,Re=Me=null,e.updateQueue=null,xc.current=UD,t=n(r,i)}while(al)}if(xc.current=fu,e=Me!==null&&Me.next!==null,zi=0,Re=Me=ve=null,uu=!1,e)throw Error(O(300));return t}function og(){var t=Fl!==0;return Fl=0,t}function Cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Re===null?ve.memoizedState=Re=t:Re=Re.next=t,Re}function en(){if(Me===null){var t=ve.alternate;t=t!==null?t.memoizedState:null}else t=Me.next;var e=Re===null?ve.memoizedState:Re.next;if(e!==null)Re=e,Me=t;else{if(t===null)throw Error(O(310));Me=t,t={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},Re===null?ve.memoizedState=Re=t:Re=Re.next=t}return Re}function jl(t,e){return typeof e=="function"?e(t):e}function xd(t){var e=en(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=Me,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,a=null,c=o;do{var u=c.lane;if((zi&u)===u)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=f,s=r):a=a.next=f,ve.lanes|=u,Ui|=u}c=c.next}while(c!==null&&c!==o);a===null?s=r:a.next=l,mn(r,e.memoizedState)||(kt=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,ve.lanes|=o,Ui|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Td(t){var e=en(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);mn(o,e.memoizedState)||(kt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function mk(){}function gk(t,e){var n=ve,r=en(),i=e(),o=!mn(r.memoizedState,i);if(o&&(r.memoizedState=i,kt=!0),r=r.queue,sg(wk.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Re!==null&&Re.memoizedState.tag&1){if(n.flags|=2048,Vl(9,vk.bind(null,n,r,i,e),void 0,null),je===null)throw Error(O(349));zi&30||yk(n,e,i)}return i}function yk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ve.updateQueue,e===null?(e={lastEffect:null,stores:null},ve.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function vk(t,e,n,r){e.value=n,e.getSnapshot=r,Sk(e)&&bk(t)}function wk(t,e,n){return n(function(){Sk(e)&&bk(t)})}function Sk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mn(t,n)}catch{return!0}}function bk(t){var e=rr(t,1);e!==null&&un(e,t,1,-1)}function Hv(t){var e=Cn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jl,lastRenderedState:t},e.queue=t,t=t.dispatch=jD.bind(null,ve,t),[e.memoizedState,t]}function Vl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ve.updateQueue,e===null?(e={lastEffect:null,stores:null},ve.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function kk(){return en().memoizedState}function Tc(t,e,n,r){var i=Cn();ve.flags|=t,i.memoizedState=Vl(1|e,n,void 0,r===void 0?null:r)}function af(t,e,n,r){var i=en();r=r===void 0?null:r;var o=void 0;if(Me!==null){var s=Me.memoizedState;if(o=s.destroy,r!==null&&rg(r,s.deps)){i.memoizedState=Vl(e,n,o,r);return}}ve.flags|=t,i.memoizedState=Vl(1|e,n,o,r)}function Wv(t,e){return Tc(8390656,8,t,e)}function sg(t,e){return af(2048,8,t,e)}function Ck(t,e){return af(4,2,t,e)}function Ek(t,e){return af(4,4,t,e)}function xk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Tk(t,e,n){return n=n!=null?n.concat([t]):null,af(4,4,xk.bind(null,e,t),n)}function lg(){}function Mk(t,e){var n=en();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ok(t,e){var n=en();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ak(t,e,n){return zi&21?(mn(n,e)||(n=Ib(),ve.lanes|=n,Ui|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,kt=!0),t.memoizedState=n)}function BD(t,e){var n=ie;ie=n!==0&&4>n?n:4,t(!0);var r=Ed.transition;Ed.transition={};try{t(!1),e()}finally{ie=n,Ed.transition=r}}function Dk(){return en().memoizedState}function FD(t,e,n){var r=Br(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},_k(t))Pk(e,n);else if(n=dk(t,e,n,r),n!==null){var i=ht();un(n,t,r,i),Nk(n,e,r)}}function jD(t,e,n){var r=Br(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(_k(t))Pk(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,mn(l,s)){var a=e.interleaved;a===null?(i.next=i,Xm(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=dk(t,e,i,r),n!==null&&(i=ht(),un(n,t,r,i),Nk(n,e,r))}}function _k(t){var e=t.alternate;return t===ve||e!==null&&e===ve}function Pk(t,e){al=uu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Nk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bm(t,n)}}var fu={readContext:Zt,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useInsertionEffect:Ze,useLayoutEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useMutableSource:Ze,useSyncExternalStore:Ze,useId:Ze,unstable_isNewReconciler:!1},VD={readContext:Zt,useCallback:function(t,e){return Cn().memoizedState=[t,e===void 0?null:e],t},useContext:Zt,useEffect:Wv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Tc(4194308,4,xk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Tc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Tc(4,2,t,e)},useMemo:function(t,e){var n=Cn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Cn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=FD.bind(null,ve,t),[r.memoizedState,t]},useRef:function(t){var e=Cn();return t={current:t},e.memoizedState=t},useState:Hv,useDebugValue:lg,useDeferredValue:function(t){return Cn().memoizedState=t},useTransition:function(){var t=Hv(!1),e=t[0];return t=BD.bind(null,t[1]),Cn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ve,i=Cn();if(me){if(n===void 0)throw Error(O(407));n=n()}else{if(n=e(),je===null)throw Error(O(349));zi&30||yk(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Wv(wk.bind(null,r,o,t),[t]),r.flags|=2048,Vl(9,vk.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Cn(),e=je.identifierPrefix;if(me){var n=Jn,r=qn;n=(r&~(1<<32-cn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Fl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$D++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},zD={readContext:Zt,useCallback:Mk,useContext:Zt,useEffect:sg,useImperativeHandle:Tk,useInsertionEffect:Ck,useLayoutEffect:Ek,useMemo:Ok,useReducer:xd,useRef:kk,useState:function(){return xd(jl)},useDebugValue:lg,useDeferredValue:function(t){var e=en();return Ak(e,Me.memoizedState,t)},useTransition:function(){var t=xd(jl)[0],e=en().memoizedState;return[t,e]},useMutableSource:mk,useSyncExternalStore:gk,useId:Dk,unstable_isNewReconciler:!1},UD={readContext:Zt,useCallback:Mk,useContext:Zt,useEffect:sg,useImperativeHandle:Tk,useInsertionEffect:Ck,useLayoutEffect:Ek,useMemo:Ok,useReducer:Td,useRef:kk,useState:function(){return Td(jl)},useDebugValue:lg,useDeferredValue:function(t){var e=en();return Me===null?e.memoizedState=t:Ak(e,Me.memoizedState,t)},useTransition:function(){var t=Td(jl)[0],e=en().memoizedState;return[t,e]},useMutableSource:mk,useSyncExternalStore:gk,useId:Dk,unstable_isNewReconciler:!1};function rn(t,e){if(t&&t.defaultProps){e=we({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function np(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:we({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var cf={isMounted:function(t){return(t=t._reactInternals)?to(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ht(),i=Br(t),o=Qn(r,i);o.payload=e,n!=null&&(o.callback=n),e=Lr(t,o,i),e!==null&&(un(e,t,i,r),Ec(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ht(),i=Br(t),o=Qn(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Lr(t,o,i),e!==null&&(un(e,t,i,r),Ec(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ht(),r=Br(t),i=Qn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Lr(t,i,r),e!==null&&(un(e,t,r,n),Ec(e,t,r))}};function Gv(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Nl(n,r)||!Nl(i,o):!0}function Ik(t,e,n){var r=!1,i=Kr,o=e.contextType;return typeof o=="object"&&o!==null?o=Zt(o):(i=xt(e)?ji:at.current,r=e.contextTypes,o=(r=r!=null)?Ko(t,i):Kr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Kv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&cf.enqueueReplaceState(e,e.state,null)}function rp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Zm(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Zt(o):(o=xt(e)?ji:at.current,i.context=Ko(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(np(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&cf.enqueueReplaceState(i,i.state,null),au(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Qo(t,e){try{var n="",r=e;do n+=yA(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Md(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ip(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var HD=typeof WeakMap=="function"?WeakMap:Map;function Rk(t,e,n){n=Qn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){hu||(hu=!0,pp=r),ip(t,e)},n}function Lk(t,e,n){n=Qn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ip(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){ip(t,e),typeof r!="function"&&($r===null?$r=new Set([this]):$r.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function qv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new HD;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=i_.bind(null,t,e,n),e.then(t,t))}function Jv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Yv(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qn(-1,1),e.tag=2,Lr(n,e,1))),n.lanes|=1),t)}var WD=ar.ReactCurrentOwner,kt=!1;function dt(t,e,n,r){e.child=t===null?fk(e,null,n,r):Jo(e,t.child,n,r)}function Qv(t,e,n,r,i){n=n.render;var o=e.ref;return Ro(e,i),r=ig(t,e,n,r,o,i),n=og(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ir(t,e,i)):(me&&n&&Gm(e),e.flags|=1,dt(t,e,r,i),e.child)}function Xv(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!mg(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,$k(t,e,o,r,i)):(t=Dc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Nl,n(s,r)&&t.ref===e.ref)return ir(t,e,i)}return e.flags|=1,t=Fr(o,r),t.ref=e.ref,t.return=e,e.child=t}function $k(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Nl(o,r)&&t.ref===e.ref)if(kt=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(kt=!0);else return e.lanes=t.lanes,ir(t,e,i)}return op(t,e,n,r,i)}function Bk(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ae(Oo,_t),_t|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ae(Oo,_t),_t|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,ae(Oo,_t),_t|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,ae(Oo,_t),_t|=r;return dt(t,e,i,n),e.child}function Fk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function op(t,e,n,r,i){var o=xt(n)?ji:at.current;return o=Ko(e,o),Ro(e,i),n=ig(t,e,n,r,o,i),r=og(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ir(t,e,i)):(me&&r&&Gm(e),e.flags|=1,dt(t,e,n,i),e.child)}function Zv(t,e,n,r,i){if(xt(n)){var o=!0;ru(e)}else o=!1;if(Ro(e,i),e.stateNode===null)Mc(t,e),Ik(e,n,r),rp(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var a=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=Zt(c):(c=xt(n)?ji:at.current,c=Ko(e,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||a!==c)&&Kv(e,s,r,c),gr=!1;var d=e.memoizedState;s.state=d,au(e,r,s,i),a=e.memoizedState,l!==r||d!==a||Et.current||gr?(typeof u=="function"&&(np(e,n,u,r),a=e.memoizedState),(l=gr||Gv(e,n,l,r,d,a,c))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),s.props=r,s.state=a,s.context=c,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,hk(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:rn(e.type,l),s.props=c,f=e.pendingProps,d=s.context,a=n.contextType,typeof a=="object"&&a!==null?a=Zt(a):(a=xt(n)?ji:at.current,a=Ko(e,a));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==f||d!==a)&&Kv(e,s,r,a),gr=!1,d=e.memoizedState,s.state=d,au(e,r,s,i);var h=e.memoizedState;l!==f||d!==h||Et.current||gr?(typeof p=="function"&&(np(e,n,p,r),h=e.memoizedState),(c=gr||Gv(e,n,c,r,d,h,a)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,h,a),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,h,a)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=h),s.props=r,s.state=h,s.context=a,r=c):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return sp(t,e,n,r,o,i)}function sp(t,e,n,r,i,o){Fk(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Bv(e,n,!1),ir(t,e,o);r=e.stateNode,WD.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Jo(e,t.child,null,o),e.child=Jo(e,null,l,o)):dt(t,e,l,o),e.memoizedState=r.state,i&&Bv(e,n,!0),e.child}function jk(t){var e=t.stateNode;e.pendingContext?$v(t,e.pendingContext,e.pendingContext!==e.context):e.context&&$v(t,e.context,!1),eg(t,e.containerInfo)}function e0(t,e,n,r,i){return qo(),qm(i),e.flags|=256,dt(t,e,n,r),e.child}var lp={dehydrated:null,treeContext:null,retryLane:0};function ap(t){return{baseLanes:t,cachePool:null,transitions:null}}function Vk(t,e,n){var r=e.pendingProps,i=ye.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ae(ye,i&1),t===null)return ep(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=df(s,r,0,null),t=_i(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=ap(n),e.memoizedState=lp,t):ag(e,s));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return GD(t,e,s,r,l,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Fr(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=Fr(l,o):(o=_i(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?ap(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=lp,r}return o=t.child,t=o.sibling,r=Fr(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ag(t,e){return e=df({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qa(t,e,n,r){return r!==null&&qm(r),Jo(e,t.child,null,n),t=ag(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function GD(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Md(Error(O(422))),Qa(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=df({mode:"visible",children:r.children},i,0,null),o=_i(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Jo(e,t.child,null,s),e.child.memoizedState=ap(s),e.memoizedState=lp,o);if(!(e.mode&1))return Qa(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(O(419)),r=Md(o,r,void 0),Qa(t,e,s,r)}if(l=(s&t.childLanes)!==0,kt||l){if(r=je,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,rr(t,i),un(r,t,i,-1))}return pg(),r=Md(Error(O(421))),Qa(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=o_.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Nt=Rr(i.nextSibling),It=e,me=!0,sn=null,t!==null&&(zt[Ut++]=qn,zt[Ut++]=Jn,zt[Ut++]=Vi,qn=t.id,Jn=t.overflow,Vi=e),e=ag(e,r.children),e.flags|=4096,e)}function t0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),tp(t.return,e,n)}function Od(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function zk(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(dt(t,e,r.children,n),r=ye.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&t0(t,n,e);else if(t.tag===19)t0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ae(ye,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&cu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Od(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&cu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Od(e,!0,n,null,o);break;case"together":Od(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Mc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ir(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ui|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,n=Fr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function KD(t,e,n){switch(e.tag){case 3:jk(e),qo();break;case 5:pk(e);break;case 1:xt(e.type)&&ru(e);break;case 4:eg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ae(su,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ae(ye,ye.current&1),e.flags|=128,null):n&e.child.childLanes?Vk(t,e,n):(ae(ye,ye.current&1),t=ir(t,e,n),t!==null?t.sibling:null);ae(ye,ye.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return zk(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ae(ye,ye.current),r)break;return null;case 22:case 23:return e.lanes=0,Bk(t,e,n)}return ir(t,e,n)}var Uk,cp,Hk,Wk;Uk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};cp=function(){};Hk=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ei(On.current);var o=null;switch(n){case"input":i=_h(t,i),r=_h(t,r),o=[];break;case"select":i=we({},i,{value:void 0}),r=we({},r,{value:void 0}),o=[];break;case"textarea":i=Ih(t,i),r=Ih(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=tu)}Lh(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Tl.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var a=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(s in l)!l.hasOwnProperty(s)||a&&a.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in a)a.hasOwnProperty(s)&&l[s]!==a[s]&&(n||(n={}),n[s]=a[s])}else n||(o||(o=[]),o.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(o=o||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(o=o||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Tl.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&ue("scroll",t),o||l===a||(o=[])):(o=o||[]).push(c,a))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};Wk=function(t,e,n,r){n!==r&&(e.flags|=4)};function Us(t,e){if(!me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function et(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function qD(t,e,n){var r=e.pendingProps;switch(Km(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(e),null;case 1:return xt(e.type)&&nu(),et(e),null;case 3:return r=e.stateNode,Yo(),de(Et),de(at),ng(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ja(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,sn!==null&&(yp(sn),sn=null))),cp(t,e),et(e),null;case 5:tg(e);var i=Ei(Bl.current);if(n=e.type,t!==null&&e.stateNode!=null)Hk(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(O(166));return et(e),null}if(t=Ei(On.current),Ja(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[En]=e,r[Ll]=o,t=(e.mode&1)!==0,n){case"dialog":ue("cancel",r),ue("close",r);break;case"iframe":case"object":case"embed":ue("load",r);break;case"video":case"audio":for(i=0;i<Qs.length;i++)ue(Qs[i],r);break;case"source":ue("error",r);break;case"img":case"image":case"link":ue("error",r),ue("load",r);break;case"details":ue("toggle",r);break;case"input":uv(r,o),ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ue("invalid",r);break;case"textarea":dv(r,o),ue("invalid",r)}Lh(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&qa(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&qa(r.textContent,l,t),i=["children",""+l]):Tl.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&ue("scroll",r)}switch(n){case"input":ja(r),fv(r,o,!0);break;case"textarea":ja(r),hv(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=tu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=wb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[En]=e,t[Ll]=r,Uk(t,e,!1,!1),e.stateNode=t;e:{switch(s=$h(n,r),n){case"dialog":ue("cancel",t),ue("close",t),i=r;break;case"iframe":case"object":case"embed":ue("load",t),i=r;break;case"video":case"audio":for(i=0;i<Qs.length;i++)ue(Qs[i],t);i=r;break;case"source":ue("error",t),i=r;break;case"img":case"image":case"link":ue("error",t),ue("load",t),i=r;break;case"details":ue("toggle",t),i=r;break;case"input":uv(t,r),i=_h(t,r),ue("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=we({},r,{value:void 0}),ue("invalid",t);break;case"textarea":dv(t,r),i=Ih(t,r),ue("invalid",t);break;default:i=r}Lh(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var a=l[o];o==="style"?kb(t,a):o==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Sb(t,a)):o==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Ml(t,a):typeof a=="number"&&Ml(t,""+a):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Tl.hasOwnProperty(o)?a!=null&&o==="onScroll"&&ue("scroll",t):a!=null&&Pm(t,o,a,s))}switch(n){case"input":ja(t),fv(t,r,!1);break;case"textarea":ja(t),hv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Gr(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?_o(t,!!r.multiple,o,!1):r.defaultValue!=null&&_o(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=tu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return et(e),null;case 6:if(t&&e.stateNode!=null)Wk(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(O(166));if(n=Ei(Bl.current),Ei(On.current),Ja(e)){if(r=e.stateNode,n=e.memoizedProps,r[En]=e,(o=r.nodeValue!==n)&&(t=It,t!==null))switch(t.tag){case 3:qa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&qa(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[En]=e,e.stateNode=r}return et(e),null;case 13:if(de(ye),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(me&&Nt!==null&&e.mode&1&&!(e.flags&128))ck(),qo(),e.flags|=98560,o=!1;else if(o=Ja(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(O(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(O(317));o[En]=e}else qo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;et(e),o=!1}else sn!==null&&(yp(sn),sn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ye.current&1?Ae===0&&(Ae=3):pg())),e.updateQueue!==null&&(e.flags|=4),et(e),null);case 4:return Yo(),cp(t,e),t===null&&Il(e.stateNode.containerInfo),et(e),null;case 10:return Qm(e.type._context),et(e),null;case 17:return xt(e.type)&&nu(),et(e),null;case 19:if(de(ye),o=e.memoizedState,o===null)return et(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Us(o,!1);else{if(Ae!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=cu(t),s!==null){for(e.flags|=128,Us(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ae(ye,ye.current&1|2),e.child}t=t.sibling}o.tail!==null&&Ce()>Xo&&(e.flags|=128,r=!0,Us(o,!1),e.lanes=4194304)}else{if(!r)if(t=cu(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Us(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!me)return et(e),null}else 2*Ce()-o.renderingStartTime>Xo&&n!==1073741824&&(e.flags|=128,r=!0,Us(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ce(),e.sibling=null,n=ye.current,ae(ye,r?n&1|2:n&1),e):(et(e),null);case 22:case 23:return hg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?_t&1073741824&&(et(e),e.subtreeFlags&6&&(e.flags|=8192)):et(e),null;case 24:return null;case 25:return null}throw Error(O(156,e.tag))}function JD(t,e){switch(Km(e),e.tag){case 1:return xt(e.type)&&nu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Yo(),de(Et),de(at),ng(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tg(e),null;case 13:if(de(ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));qo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return de(ye),null;case 4:return Yo(),null;case 10:return Qm(e.type._context),null;case 22:case 23:return hg(),null;case 24:return null;default:return null}}var Xa=!1,it=!1,YD=typeof WeakSet=="function"?WeakSet:Set,I=null;function Mo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Se(t,e,r)}else n.current=null}function up(t,e,n){try{n()}catch(r){Se(t,e,r)}}var n0=!1;function QD(t,e){if(Kh=Xc,t=Yb(),Wm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,a=-1,c=0,u=0,f=t,d=null;t:for(;;){for(var p;f!==n||i!==0&&f.nodeType!==3||(l=s+i),f!==o||r!==0&&f.nodeType!==3||(a=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(p=f.firstChild)!==null;)d=f,f=p;for(;;){if(f===t)break t;if(d===n&&++c===i&&(l=s),d===o&&++u===r&&(a=s),(p=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=p}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(qh={focusedElem:t,selectionRange:n},Xc=!1,I=e;I!==null;)if(e=I,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,I=t;else for(;I!==null;){e=I;try{var h=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var m=h.memoizedProps,y=h.memoizedState,g=e.stateNode,v=g.getSnapshotBeforeUpdate(e.elementType===e.type?m:rn(e.type,m),y);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(S){Se(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,I=t;break}I=e.return}return h=n0,n0=!1,h}function cl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&up(e,n,o)}i=i.next}while(i!==r)}}function uf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function fp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Gk(t){var e=t.alternate;e!==null&&(t.alternate=null,Gk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[En],delete e[Ll],delete e[Qh],delete e[ND],delete e[ID])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Kk(t){return t.tag===5||t.tag===3||t.tag===4}function r0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Kk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function dp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=tu));else if(r!==4&&(t=t.child,t!==null))for(dp(t,e,n),t=t.sibling;t!==null;)dp(t,e,n),t=t.sibling}function hp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(hp(t,e,n),t=t.sibling;t!==null;)hp(t,e,n),t=t.sibling}var We=null,on=!1;function dr(t,e,n){for(n=n.child;n!==null;)qk(t,e,n),n=n.sibling}function qk(t,e,n){if(Mn&&typeof Mn.onCommitFiberUnmount=="function")try{Mn.onCommitFiberUnmount(tf,n)}catch{}switch(n.tag){case 5:it||Mo(n,e);case 6:var r=We,i=on;We=null,dr(t,e,n),We=r,on=i,We!==null&&(on?(t=We,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):We.removeChild(n.stateNode));break;case 18:We!==null&&(on?(t=We,n=n.stateNode,t.nodeType===8?bd(t.parentNode,n):t.nodeType===1&&bd(t,n),_l(t)):bd(We,n.stateNode));break;case 4:r=We,i=on,We=n.stateNode.containerInfo,on=!0,dr(t,e,n),We=r,on=i;break;case 0:case 11:case 14:case 15:if(!it&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&up(n,e,s),i=i.next}while(i!==r)}dr(t,e,n);break;case 1:if(!it&&(Mo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Se(n,e,l)}dr(t,e,n);break;case 21:dr(t,e,n);break;case 22:n.mode&1?(it=(r=it)||n.memoizedState!==null,dr(t,e,n),it=r):dr(t,e,n);break;default:dr(t,e,n)}}function i0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new YD),e.forEach(function(r){var i=s_.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function nn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:We=l.stateNode,on=!1;break e;case 3:We=l.stateNode.containerInfo,on=!0;break e;case 4:We=l.stateNode.containerInfo,on=!0;break e}l=l.return}if(We===null)throw Error(O(160));qk(o,s,i),We=null,on=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(c){Se(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Jk(e,t),e=e.sibling}function Jk(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nn(e,t),Sn(t),r&4){try{cl(3,t,t.return),uf(3,t)}catch(m){Se(t,t.return,m)}try{cl(5,t,t.return)}catch(m){Se(t,t.return,m)}}break;case 1:nn(e,t),Sn(t),r&512&&n!==null&&Mo(n,n.return);break;case 5:if(nn(e,t),Sn(t),r&512&&n!==null&&Mo(n,n.return),t.flags&32){var i=t.stateNode;try{Ml(i,"")}catch(m){Se(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&yb(i,o),$h(l,s);var c=$h(l,o);for(s=0;s<a.length;s+=2){var u=a[s],f=a[s+1];u==="style"?kb(i,f):u==="dangerouslySetInnerHTML"?Sb(i,f):u==="children"?Ml(i,f):Pm(i,u,f,c)}switch(l){case"input":Ph(i,o);break;case"textarea":vb(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?_o(i,!!o.multiple,p,!1):d!==!!o.multiple&&(o.defaultValue!=null?_o(i,!!o.multiple,o.defaultValue,!0):_o(i,!!o.multiple,o.multiple?[]:"",!1))}i[Ll]=o}catch(m){Se(t,t.return,m)}}break;case 6:if(nn(e,t),Sn(t),r&4){if(t.stateNode===null)throw Error(O(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(m){Se(t,t.return,m)}}break;case 3:if(nn(e,t),Sn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_l(e.containerInfo)}catch(m){Se(t,t.return,m)}break;case 4:nn(e,t),Sn(t);break;case 13:nn(e,t),Sn(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(fg=Ce())),r&4&&i0(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(it=(c=it)||u,nn(e,t),it=c):nn(e,t),Sn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(I=t,u=t.child;u!==null;){for(f=I=u;I!==null;){switch(d=I,p=d.child,d.tag){case 0:case 11:case 14:case 15:cl(4,d,d.return);break;case 1:Mo(d,d.return);var h=d.stateNode;if(typeof h.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,h.props=e.memoizedProps,h.state=e.memoizedState,h.componentWillUnmount()}catch(m){Se(r,n,m)}}break;case 5:Mo(d,d.return);break;case 22:if(d.memoizedState!==null){s0(f);continue}}p!==null?(p.return=d,I=p):s0(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=f.stateNode,a=f.memoizedProps.style,s=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=bb("display",s))}catch(m){Se(t,t.return,m)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(m){Se(t,t.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:nn(e,t),Sn(t),r&4&&i0(t);break;case 21:break;default:nn(e,t),Sn(t)}}function Sn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Kk(n)){var r=n;break e}n=n.return}throw Error(O(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ml(i,""),r.flags&=-33);var o=r0(t);hp(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=r0(t);dp(t,l,s);break;default:throw Error(O(161))}}catch(a){Se(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function XD(t,e,n){I=t,Yk(t)}function Yk(t,e,n){for(var r=(t.mode&1)!==0;I!==null;){var i=I,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Xa;if(!s){var l=i.alternate,a=l!==null&&l.memoizedState!==null||it;l=Xa;var c=it;if(Xa=s,(it=a)&&!c)for(I=i;I!==null;)s=I,a=s.child,s.tag===22&&s.memoizedState!==null?l0(i):a!==null?(a.return=s,I=a):l0(i);for(;o!==null;)I=o,Yk(o),o=o.sibling;I=i,Xa=l,it=c}o0(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,I=o):o0(t)}}function o0(t){for(;I!==null;){var e=I;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:it||uf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!it)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:rn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Uv(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Uv(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&_l(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}it||e.flags&512&&fp(e)}catch(d){Se(e,e.return,d)}}if(e===t){I=null;break}if(n=e.sibling,n!==null){n.return=e.return,I=n;break}I=e.return}}function s0(t){for(;I!==null;){var e=I;if(e===t){I=null;break}var n=e.sibling;if(n!==null){n.return=e.return,I=n;break}I=e.return}}function l0(t){for(;I!==null;){var e=I;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{uf(4,e)}catch(a){Se(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){Se(e,i,a)}}var o=e.return;try{fp(e)}catch(a){Se(e,o,a)}break;case 5:var s=e.return;try{fp(e)}catch(a){Se(e,s,a)}}}catch(a){Se(e,e.return,a)}if(e===t){I=null;break}var l=e.sibling;if(l!==null){l.return=e.return,I=l;break}I=e.return}}var ZD=Math.ceil,du=ar.ReactCurrentDispatcher,cg=ar.ReactCurrentOwner,Jt=ar.ReactCurrentBatchConfig,Z=0,je=null,xe=null,Ye=0,_t=0,Oo=ni(0),Ae=0,zl=null,Ui=0,ff=0,ug=0,ul=null,bt=null,fg=0,Xo=1/0,Wn=null,hu=!1,pp=null,$r=null,Za=!1,xr=null,pu=0,fl=0,mp=null,Oc=-1,Ac=0;function ht(){return Z&6?Ce():Oc!==-1?Oc:Oc=Ce()}function Br(t){return t.mode&1?Z&2&&Ye!==0?Ye&-Ye:LD.transition!==null?(Ac===0&&(Ac=Ib()),Ac):(t=ie,t!==0||(t=window.event,t=t===void 0?16:Vb(t.type)),t):1}function un(t,e,n,r){if(50<fl)throw fl=0,mp=null,Error(O(185));ga(t,n,r),(!(Z&2)||t!==je)&&(t===je&&(!(Z&2)&&(ff|=n),Ae===4&&br(t,Ye)),Tt(t,r),n===1&&Z===0&&!(e.mode&1)&&(Xo=Ce()+500,lf&&ri()))}function Tt(t,e){var n=t.callbackNode;LA(t,e);var r=Qc(t,t===je?Ye:0);if(r===0)n!==null&&gv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&gv(n),e===1)t.tag===0?RD(a0.bind(null,t)):sk(a0.bind(null,t)),_D(function(){!(Z&6)&&ri()}),n=null;else{switch(Rb(r)){case 1:n=$m;break;case 4:n=Pb;break;case 16:n=Yc;break;case 536870912:n=Nb;break;default:n=Yc}n=iC(n,Qk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Qk(t,e){if(Oc=-1,Ac=0,Z&6)throw Error(O(327));var n=t.callbackNode;if(Lo()&&t.callbackNode!==n)return null;var r=Qc(t,t===je?Ye:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=mu(t,r);else{e=r;var i=Z;Z|=2;var o=Zk();(je!==t||Ye!==e)&&(Wn=null,Xo=Ce()+500,Di(t,e));do try{n_();break}catch(l){Xk(t,l)}while(1);Ym(),du.current=o,Z=i,xe!==null?e=0:(je=null,Ye=0,e=Ae)}if(e!==0){if(e===2&&(i=zh(t),i!==0&&(r=i,e=gp(t,i))),e===1)throw n=zl,Di(t,0),br(t,r),Tt(t,Ce()),n;if(e===6)br(t,r);else{if(i=t.current.alternate,!(r&30)&&!e_(i)&&(e=mu(t,r),e===2&&(o=zh(t),o!==0&&(r=o,e=gp(t,o))),e===1))throw n=zl,Di(t,0),br(t,r),Tt(t,Ce()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(O(345));case 2:gi(t,bt,Wn);break;case 3:if(br(t,r),(r&130023424)===r&&(e=fg+500-Ce(),10<e)){if(Qc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ht(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Yh(gi.bind(null,t,bt,Wn),e);break}gi(t,bt,Wn);break;case 4:if(br(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-cn(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Ce()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ZD(r/1960))-r,10<r){t.timeoutHandle=Yh(gi.bind(null,t,bt,Wn),r);break}gi(t,bt,Wn);break;case 5:gi(t,bt,Wn);break;default:throw Error(O(329))}}}return Tt(t,Ce()),t.callbackNode===n?Qk.bind(null,t):null}function gp(t,e){var n=ul;return t.current.memoizedState.isDehydrated&&(Di(t,e).flags|=256),t=mu(t,e),t!==2&&(e=bt,bt=n,e!==null&&yp(e)),t}function yp(t){bt===null?bt=t:bt.push.apply(bt,t)}function e_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!mn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function br(t,e){for(e&=~ug,e&=~ff,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-cn(e),r=1<<n;t[n]=-1,e&=~r}}function a0(t){if(Z&6)throw Error(O(327));Lo();var e=Qc(t,0);if(!(e&1))return Tt(t,Ce()),null;var n=mu(t,e);if(t.tag!==0&&n===2){var r=zh(t);r!==0&&(e=r,n=gp(t,r))}if(n===1)throw n=zl,Di(t,0),br(t,e),Tt(t,Ce()),n;if(n===6)throw Error(O(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gi(t,bt,Wn),Tt(t,Ce()),null}function dg(t,e){var n=Z;Z|=1;try{return t(e)}finally{Z=n,Z===0&&(Xo=Ce()+500,lf&&ri())}}function Hi(t){xr!==null&&xr.tag===0&&!(Z&6)&&Lo();var e=Z;Z|=1;var n=Jt.transition,r=ie;try{if(Jt.transition=null,ie=1,t)return t()}finally{ie=r,Jt.transition=n,Z=e,!(Z&6)&&ri()}}function hg(){_t=Oo.current,de(Oo)}function Di(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,DD(n)),xe!==null)for(n=xe.return;n!==null;){var r=n;switch(Km(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&nu();break;case 3:Yo(),de(Et),de(at),ng();break;case 5:tg(r);break;case 4:Yo();break;case 13:de(ye);break;case 19:de(ye);break;case 10:Qm(r.type._context);break;case 22:case 23:hg()}n=n.return}if(je=t,xe=t=Fr(t.current,null),Ye=_t=e,Ae=0,zl=null,ug=ff=Ui=0,bt=ul=null,Ci!==null){for(e=0;e<Ci.length;e++)if(n=Ci[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Ci=null}return t}function Xk(t,e){do{var n=xe;try{if(Ym(),xc.current=fu,uu){for(var r=ve.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}uu=!1}if(zi=0,Re=Me=ve=null,al=!1,Fl=0,cg.current=null,n===null||n.return===null){Ae=1,zl=e,xe=null;break}e:{var o=t,s=n.return,l=n,a=e;if(e=Ye,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,u=l,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Jv(s);if(p!==null){p.flags&=-257,Yv(p,s,l,o,e),p.mode&1&&qv(o,c,e),e=p,a=c;var h=e.updateQueue;if(h===null){var m=new Set;m.add(a),e.updateQueue=m}else h.add(a);break e}else{if(!(e&1)){qv(o,c,e),pg();break e}a=Error(O(426))}}else if(me&&l.mode&1){var y=Jv(s);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Yv(y,s,l,o,e),qm(Qo(a,l));break e}}o=a=Qo(a,l),Ae!==4&&(Ae=2),ul===null?ul=[o]:ul.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var g=Rk(o,a,e);zv(o,g);break e;case 1:l=a;var v=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&($r===null||!$r.has(w)))){o.flags|=65536,e&=-e,o.lanes|=e;var S=Lk(o,l,e);zv(o,S);break e}}o=o.return}while(o!==null)}tC(n)}catch(k){e=k,xe===n&&n!==null&&(xe=n=n.return);continue}break}while(1)}function Zk(){var t=du.current;return du.current=fu,t===null?fu:t}function pg(){(Ae===0||Ae===3||Ae===2)&&(Ae=4),je===null||!(Ui&268435455)&&!(ff&268435455)||br(je,Ye)}function mu(t,e){var n=Z;Z|=2;var r=Zk();(je!==t||Ye!==e)&&(Wn=null,Di(t,e));do try{t_();break}catch(i){Xk(t,i)}while(1);if(Ym(),Z=n,du.current=r,xe!==null)throw Error(O(261));return je=null,Ye=0,Ae}function t_(){for(;xe!==null;)eC(xe)}function n_(){for(;xe!==null&&!MA();)eC(xe)}function eC(t){var e=rC(t.alternate,t,_t);t.memoizedProps=t.pendingProps,e===null?tC(t):xe=e,cg.current=null}function tC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=JD(n,e),n!==null){n.flags&=32767,xe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ae=6,xe=null;return}}else if(n=qD(n,e,_t),n!==null){xe=n;return}if(e=e.sibling,e!==null){xe=e;return}xe=e=t}while(e!==null);Ae===0&&(Ae=5)}function gi(t,e,n){var r=ie,i=Jt.transition;try{Jt.transition=null,ie=1,r_(t,e,n,r)}finally{Jt.transition=i,ie=r}return null}function r_(t,e,n,r){do Lo();while(xr!==null);if(Z&6)throw Error(O(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(O(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if($A(t,o),t===je&&(xe=je=null,Ye=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Za||(Za=!0,iC(Yc,function(){return Lo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Jt.transition,Jt.transition=null;var s=ie;ie=1;var l=Z;Z|=4,cg.current=null,QD(t,n),Jk(n,t),CD(qh),Xc=!!Kh,qh=Kh=null,t.current=n,XD(n),OA(),Z=l,ie=s,Jt.transition=o}else t.current=n;if(Za&&(Za=!1,xr=t,pu=i),o=t.pendingLanes,o===0&&($r=null),_A(n.stateNode),Tt(t,Ce()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(hu)throw hu=!1,t=pp,pp=null,t;return pu&1&&t.tag!==0&&Lo(),o=t.pendingLanes,o&1?t===mp?fl++:(fl=0,mp=t):fl=0,ri(),null}function Lo(){if(xr!==null){var t=Rb(pu),e=Jt.transition,n=ie;try{if(Jt.transition=null,ie=16>t?16:t,xr===null)var r=!1;else{if(t=xr,xr=null,pu=0,Z&6)throw Error(O(331));var i=Z;for(Z|=4,I=t.current;I!==null;){var o=I,s=o.child;if(I.flags&16){var l=o.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(I=c;I!==null;){var u=I;switch(u.tag){case 0:case 11:case 15:cl(8,u,o)}var f=u.child;if(f!==null)f.return=u,I=f;else for(;I!==null;){u=I;var d=u.sibling,p=u.return;if(Gk(u),u===c){I=null;break}if(d!==null){d.return=p,I=d;break}I=p}}}var h=o.alternate;if(h!==null){var m=h.child;if(m!==null){h.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}I=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,I=s;else e:for(;I!==null;){if(o=I,o.flags&2048)switch(o.tag){case 0:case 11:case 15:cl(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,I=g;break e}I=o.return}}var v=t.current;for(I=v;I!==null;){s=I;var w=s.child;if(s.subtreeFlags&2064&&w!==null)w.return=s,I=w;else e:for(s=v;I!==null;){if(l=I,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:uf(9,l)}}catch(k){Se(l,l.return,k)}if(l===s){I=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,I=S;break e}I=l.return}}if(Z=i,ri(),Mn&&typeof Mn.onPostCommitFiberRoot=="function")try{Mn.onPostCommitFiberRoot(tf,t)}catch{}r=!0}return r}finally{ie=n,Jt.transition=e}}return!1}function c0(t,e,n){e=Qo(n,e),e=Rk(t,e,1),t=Lr(t,e,1),e=ht(),t!==null&&(ga(t,1,e),Tt(t,e))}function Se(t,e,n){if(t.tag===3)c0(t,t,n);else for(;e!==null;){if(e.tag===3){c0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($r===null||!$r.has(r))){t=Qo(n,t),t=Lk(e,t,1),e=Lr(e,t,1),t=ht(),e!==null&&(ga(e,1,t),Tt(e,t));break}}e=e.return}}function i_(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ht(),t.pingedLanes|=t.suspendedLanes&n,je===t&&(Ye&n)===n&&(Ae===4||Ae===3&&(Ye&130023424)===Ye&&500>Ce()-fg?Di(t,0):ug|=n),Tt(t,e)}function nC(t,e){e===0&&(t.mode&1?(e=Ua,Ua<<=1,!(Ua&130023424)&&(Ua=4194304)):e=1);var n=ht();t=rr(t,e),t!==null&&(ga(t,e,n),Tt(t,n))}function o_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),nC(t,n)}function s_(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(O(314))}r!==null&&r.delete(e),nC(t,n)}var rC;rC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Et.current)kt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return kt=!1,KD(t,e,n);kt=!!(t.flags&131072)}else kt=!1,me&&e.flags&1048576&&lk(e,ou,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Mc(t,e),t=e.pendingProps;var i=Ko(e,at.current);Ro(e,n),i=ig(null,e,r,t,i,n);var o=og();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xt(r)?(o=!0,ru(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Zm(e),i.updater=cf,e.stateNode=i,i._reactInternals=e,rp(e,r,t,n),e=sp(null,e,r,!0,o,n)):(e.tag=0,me&&o&&Gm(e),dt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Mc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=a_(r),t=rn(r,t),i){case 0:e=op(null,e,r,t,n);break e;case 1:e=Zv(null,e,r,t,n);break e;case 11:e=Qv(null,e,r,t,n);break e;case 14:e=Xv(null,e,r,rn(r.type,t),n);break e}throw Error(O(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),op(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),Zv(t,e,r,i,n);case 3:e:{if(jk(e),t===null)throw Error(O(387));r=e.pendingProps,o=e.memoizedState,i=o.element,hk(t,e),au(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Qo(Error(O(423)),e),e=e0(t,e,r,n,i);break e}else if(r!==i){i=Qo(Error(O(424)),e),e=e0(t,e,r,n,i);break e}else for(Nt=Rr(e.stateNode.containerInfo.firstChild),It=e,me=!0,sn=null,n=fk(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qo(),r===i){e=ir(t,e,n);break e}dt(t,e,r,n)}e=e.child}return e;case 5:return pk(e),t===null&&ep(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,Jh(r,i)?s=null:o!==null&&Jh(r,o)&&(e.flags|=32),Fk(t,e),dt(t,e,s,n),e.child;case 6:return t===null&&ep(e),null;case 13:return Vk(t,e,n);case 4:return eg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Jo(e,null,r,n):dt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),Qv(t,e,r,i,n);case 7:return dt(t,e,e.pendingProps,n),e.child;case 8:return dt(t,e,e.pendingProps.children,n),e.child;case 12:return dt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,ae(su,r._currentValue),r._currentValue=s,o!==null)if(mn(o.value,s)){if(o.children===i.children&&!Et.current){e=ir(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(o.tag===1){a=Qn(-1,n&-n),a.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?a.next=a:(a.next=u.next,u.next=a),c.pending=a}}o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),tp(o.return,n,e),l.lanes|=n;break}a=a.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(O(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),tp(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}dt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ro(e,n),i=Zt(i),r=r(i),e.flags|=1,dt(t,e,r,n),e.child;case 14:return r=e.type,i=rn(r,e.pendingProps),i=rn(r.type,i),Xv(t,e,r,i,n);case 15:return $k(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),Mc(t,e),e.tag=1,xt(r)?(t=!0,ru(e)):t=!1,Ro(e,n),Ik(e,r,i),rp(e,r,i,n),sp(null,e,r,!0,t,n);case 19:return zk(t,e,n);case 22:return Bk(t,e,n)}throw Error(O(156,e.tag))};function iC(t,e){return _b(t,e)}function l_(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(t,e,n,r){return new l_(t,e,n,r)}function mg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function a_(t){if(typeof t=="function")return mg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Im)return 11;if(t===Rm)return 14}return 2}function Fr(t,e){var n=t.alternate;return n===null?(n=Kt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Dc(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")mg(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case vo:return _i(n.children,i,o,e);case Nm:s=8,i|=8;break;case Mh:return t=Kt(12,n,e,i|2),t.elementType=Mh,t.lanes=o,t;case Oh:return t=Kt(13,n,e,i),t.elementType=Oh,t.lanes=o,t;case Ah:return t=Kt(19,n,e,i),t.elementType=Ah,t.lanes=o,t;case pb:return df(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case db:s=10;break e;case hb:s=9;break e;case Im:s=11;break e;case Rm:s=14;break e;case mr:s=16,r=null;break e}throw Error(O(130,t==null?t:typeof t,""))}return e=Kt(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function _i(t,e,n,r){return t=Kt(7,t,r,e),t.lanes=n,t}function df(t,e,n,r){return t=Kt(22,t,r,e),t.elementType=pb,t.lanes=n,t.stateNode={isHidden:!1},t}function Ad(t,e,n){return t=Kt(6,t,null,e),t.lanes=n,t}function Dd(t,e,n){return e=Kt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function c_(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ud(0),this.expirationTimes=ud(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ud(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function gg(t,e,n,r,i,o,s,l,a){return t=new c_(t,e,n,l,a),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Kt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zm(o),t}function u_(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function oC(t){if(!t)return Kr;t=t._reactInternals;e:{if(to(t)!==t||t.tag!==1)throw Error(O(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(O(171))}if(t.tag===1){var n=t.type;if(xt(n))return ok(t,n,e)}return e}function sC(t,e,n,r,i,o,s,l,a){return t=gg(n,r,!0,t,i,o,s,l,a),t.context=oC(null),n=t.current,r=ht(),i=Br(n),o=Qn(r,i),o.callback=e??null,Lr(n,o,i),t.current.lanes=i,ga(t,i,r),Tt(t,r),t}function hf(t,e,n,r){var i=e.current,o=ht(),s=Br(i);return n=oC(n),e.context===null?e.context=n:e.pendingContext=n,e=Qn(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Lr(i,e,s),t!==null&&(un(t,i,s,o),Ec(t,i,s)),s}function gu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function u0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function yg(t,e){u0(t,e),(t=t.alternate)&&u0(t,e)}function f_(){return null}var lC=typeof reportError=="function"?reportError:function(t){console.error(t)};function vg(t){this._internalRoot=t}pf.prototype.render=vg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));hf(t,e,null,null)};pf.prototype.unmount=vg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Hi(function(){hf(null,t,null,null)}),e[nr]=null}};function pf(t){this._internalRoot=t}pf.prototype.unstable_scheduleHydration=function(t){if(t){var e=Bb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Sr.length&&e!==0&&e<Sr[n].priority;n++);Sr.splice(n,0,t),n===0&&jb(t)}};function wg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function f0(){}function d_(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=gu(s);o.call(c)}}var s=sC(e,r,t,0,null,!1,!1,"",f0);return t._reactRootContainer=s,t[nr]=s.current,Il(t.nodeType===8?t.parentNode:t),Hi(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=gu(a);l.call(c)}}var a=gg(t,0,!1,null,null,!1,!1,"",f0);return t._reactRootContainer=a,t[nr]=a.current,Il(t.nodeType===8?t.parentNode:t),Hi(function(){hf(e,a,n,r)}),a}function gf(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var a=gu(s);l.call(a)}}hf(e,s,t,i)}else s=d_(n,e,t,i,r);return gu(s)}Lb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ys(e.pendingLanes);n!==0&&(Bm(e,n|1),Tt(e,Ce()),!(Z&6)&&(Xo=Ce()+500,ri()))}break;case 13:Hi(function(){var r=rr(t,1);if(r!==null){var i=ht();un(r,t,1,i)}}),yg(t,1)}};Fm=function(t){if(t.tag===13){var e=rr(t,134217728);if(e!==null){var n=ht();un(e,t,134217728,n)}yg(t,134217728)}};$b=function(t){if(t.tag===13){var e=Br(t),n=rr(t,e);if(n!==null){var r=ht();un(n,t,e,r)}yg(t,e)}};Bb=function(){return ie};Fb=function(t,e){var n=ie;try{return ie=t,e()}finally{ie=n}};Fh=function(t,e,n){switch(e){case"input":if(Ph(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=sf(r);if(!i)throw Error(O(90));gb(r),Ph(r,i)}}}break;case"textarea":vb(t,n);break;case"select":e=n.value,e!=null&&_o(t,!!n.multiple,e,!1)}};xb=dg;Tb=Hi;var h_={usingClientEntryPoint:!1,Events:[va,ko,sf,Cb,Eb,dg]},Hs={findFiberByHostInstance:ki,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},p_={bundleType:Hs.bundleType,version:Hs.version,rendererPackageName:Hs.rendererPackageName,rendererConfig:Hs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ab(t),t===null?null:t.stateNode},findFiberByHostInstance:Hs.findFiberByHostInstance||f_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ec.isDisabled&&ec.supportsFiber)try{tf=ec.inject(p_),Mn=ec}catch{}}Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h_;Bt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wg(e))throw Error(O(200));return u_(t,e,null,n)};Bt.createRoot=function(t,e){if(!wg(t))throw Error(O(299));var n=!1,r="",i=lC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=gg(t,1,!1,null,null,n,!1,r,i),t[nr]=e.current,Il(t.nodeType===8?t.parentNode:t),new vg(e)};Bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=Ab(e),t=t===null?null:t.stateNode,t};Bt.flushSync=function(t){return Hi(t)};Bt.hydrate=function(t,e,n){if(!mf(e))throw Error(O(200));return gf(null,t,e,!0,n)};Bt.hydrateRoot=function(t,e,n){if(!wg(t))throw Error(O(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=lC;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=sC(e,null,t,1,n??null,i,!1,o,s),t[nr]=e.current,Il(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new pf(e)};Bt.render=function(t,e,n){if(!mf(e))throw Error(O(200));return gf(null,t,e,!1,n)};Bt.unmountComponentAtNode=function(t){if(!mf(t))throw Error(O(40));return t._reactRootContainer?(Hi(function(){gf(null,null,t,!1,function(){t._reactRootContainer=null,t[nr]=null})}),!0):!1};Bt.unstable_batchedUpdates=dg;Bt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!mf(n))throw Error(O(200));if(t==null||t._reactInternals===void 0)throw Error(O(38));return gf(t,e,n,!1,r)};Bt.version="18.3.1-next-f1338f8080-20240426";function aC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(aC)}catch(t){console.error(t)}}aC(),ab.exports=Bt;var Sg=ab.exports;const m_=$t(Sg);var d0=Sg;xh.createRoot=d0.createRoot,xh.hydrateRoot=d0.hydrateRoot;function Ge(t){this.content=t}Ge.prototype={constructor:Ge,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new Ge(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Ge(n)},addToStart:function(t,e){return new Ge([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Ge(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new Ge(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Ge.from(t),t.size?new Ge(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Ge.from(t),t.size?new Ge(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Ge.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Ge.from=function(t){if(t instanceof Ge)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Ge(e)};function cC(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){let s=cC(i.content,o.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function uC(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let s=t.child(--i),l=e.child(--o),a=s.nodeSize;if(s==l){n-=a,r-=a;continue}if(!s.sameMarkup(l))return{a:n,b:r};if(s.isText&&s.text!=l.text){let c=0,u=Math.min(s.text.length,l.text.length);for(;c<u&&s.text[s.text.length-c-1]==l.text[l.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(s.content.size||l.content.size){let c=uC(s.content,l.content,n-1,r-1);if(c)return c}n-=a,r-=a}}class M{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let s=0,l=0;l<n;s++){let a=this.content[s],c=l+a.nodeSize;if(c>e&&r(a,i+l,o||null,s)!==!1&&a.content.size){let u=l+1;a.nodesBetween(Math.max(0,e-u),Math.min(a.content.size,n-u),r,i+u)}l=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",s=!0;return this.nodesBetween(e,n,(l,a)=>{let c=l.isText?l.text.slice(Math.max(e,a)-a,n-a):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&c||l.isTextblock)&&r&&(s?s=!1:o+=r),o+=c},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new M(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,s=0;s<n;o++){let l=this.content[o],a=s+l.nodeSize;a>e&&((s<e||a>n)&&(l.isText?l=l.cut(Math.max(0,e-s),Math.min(l.text.length,n-s)):l=l.cut(Math.max(0,e-s-1),Math.min(l.content.size,n-s-1))),r.push(l),i+=l.nodeSize),s=a}return new M(r,i)}cutByIndex(e,n){return e==n?M.empty:e==0&&n==this.content.length?this:new M(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new M(i,o)}addToStart(e){return new M([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new M(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return cC(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return uC(this,e,n,r)}findIndex(e){if(e==0)return tc(0,e);if(e==this.size)return tc(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),o=r+i.nodeSize;if(o>=e)return o==e?tc(n+1,o):tc(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return M.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new M(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return M.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new M(n||e,r)}static from(e){if(!e)return M.empty;if(e instanceof M)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new M([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}M.empty=new M([],0);const _d={index:0,offset:0};function tc(t,e){return _d.index=t,_d.offset=e,_d}function yu(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!yu(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!yu(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let oe=class vp{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&yu(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return vp.none;if(e instanceof vp)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};oe.none=[];class vu extends Error{}class P{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=dC(this.content,e+this.openStart,n);return r&&new P(r,this.openStart,this.openEnd)}removeBetween(e,n){return new P(fC(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return P.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new P(M.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new P(e,r,i)}}P.empty=new P(M.empty,0,0);function fC(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:l}=t.findIndex(n);if(i==e||o.isText){if(l!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(fC(o.content,e-i-1,n-i-1)))}function dC(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),s=t.maybeChild(i);if(o==e||s.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let l=dC(s.content,e-o-1,n,s);return l&&t.replaceChild(i,s.copy(l))}function g_(t,e,n){if(n.openStart>t.depth)throw new vu("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new vu("Inconsistent open depths");return hC(t,e,n,0)}function hC(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=hC(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,l=s.content;return Ni(s,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:s,end:l}=y_(n,t);return Ni(o,mC(t,s,l,e,r))}else return Ni(o,wu(t,e,r))}function pC(t,e){if(!e.type.compatibleContent(t.type))throw new vu("Cannot join "+e.type.name+" onto "+t.type.name)}function wp(t,e,n){let r=t.node(n);return pC(r,e.node(n)),r}function Pi(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function dl(t,e,n,r){let i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(Pi(t.nodeAfter,r),o++));for(let l=o;l<s;l++)Pi(i.child(l),r);e&&e.depth==n&&e.textOffset&&Pi(e.nodeBefore,r)}function Ni(t,e){return t.type.checkContent(e),t.copy(e)}function mC(t,e,n,r,i){let o=t.depth>i&&wp(t,e,i+1),s=r.depth>i&&wp(n,r,i+1),l=[];return dl(null,t,i,l),o&&s&&e.index(i)==n.index(i)?(pC(o,s),Pi(Ni(o,mC(t,e,n,r,i+1)),l)):(o&&Pi(Ni(o,wu(t,e,i+1)),l),dl(e,n,i,l),s&&Pi(Ni(s,wu(n,r,i+1)),l)),dl(r,null,i,l),new M(l)}function wu(t,e,n){let r=[];if(dl(null,t,n,r),t.depth>n){let i=wp(t,e,n+1);Pi(Ni(i,wu(t,e,n+1)),r)}return dl(e,null,n,r),new M(r)}function y_(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(M.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Ul{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return oe.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let l=r;r=i,i=l}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Su(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let s=e;;){let{index:l,offset:a}=s.content.findIndex(o),c=o-a;if(r.push(s,l,i+a),!c||(s=s.child(l),s.isText))break;o=c-1,i+=a+1}return new Ul(n,r,o)}static resolveCached(e,n){let r=h0.get(e);if(r)for(let o=0;o<r.elts.length;o++){let s=r.elts[o];if(s.pos==n)return s}else h0.set(e,r=new v_);let i=r.elts[r.i]=Ul.resolve(e,n);return r.i=(r.i+1)%w_,i}}class v_{constructor(){this.elts=[],this.i=0}}const w_=12,h0=new WeakMap;class Su{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const S_=Object.create(null);let jr=class Sp{constructor(e,n,r,i=oe.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||M.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&yu(this.attrs,n||e.defaultAttrs||S_)&&oe.sameSet(this.marks,r||oe.none)}copy(e=null){return e==this.content?this:new Sp(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Sp(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return P.empty;let i=this.resolve(e),o=this.resolve(n),s=r?0:i.sharedDepth(n),l=i.start(s),c=i.node(s).content.cut(i.pos-l,o.pos-l);return new P(c,i.depth-s,o.depth-s)}replace(e,n,r){return g_(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Ul.resolveCached(this,e)}resolveNoCache(e){return Ul.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),gC(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=M.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),l=s&&s.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let a=i;a<o;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=oe.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!oe.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=M.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};jr.prototype.text=void 0;class bu extends jr{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):gC(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new bu(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new bu(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function gC(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Wi{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new b_(e,n);if(r.next==null)return Wi.empty;let i=yC(r);r.next&&r.err("Unexpected trailing text");let o=O_(M_(i));return A_(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(s,l){let a=s.matchFragment(e,r);if(a&&(!n||a.validEnd))return M.from(l.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:u,next:f}=s.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let d=o(f,l.concat(u));if(d)return d}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let l=i;l.type;l=l.via)s.push(l.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:l,next:a}=o.next[s];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}}Wi.empty=new Wi(!0);class b_{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function yC(t){let e=[];do e.push(k_(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function k_(t){let e=[];do e.push(C_(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function C_(t){let e=T_(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=E_(t,e);else break;return e}function p0(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function E_(t,e){let n=p0(t),r=n;return t.eat(",")&&(t.next!="}"?r=p0(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function x_(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let s=n[o];s.isInGroup(e)&&i.push(s)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function T_(t){if(t.eat("(")){let e=yC(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=x_(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function M_(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(s,l,a){let c={term:a,to:l};return e[s].push(c),c}function i(s,l){s.forEach(a=>a.to=l)}function o(s,l){if(s.type=="choice")return s.exprs.reduce((a,c)=>a.concat(o(c,l)),[]);if(s.type=="seq")for(let a=0;;a++){let c=o(s.exprs[a],l);if(a==s.exprs.length-1)return c;i(c,l=n())}else if(s.type=="star"){let a=n();return r(l,a),i(o(s.expr,a),a),[r(a)]}else if(s.type=="plus"){let a=n();return i(o(s.expr,l),a),i(o(s.expr,a),a),[r(a)]}else{if(s.type=="opt")return[r(l)].concat(o(s.expr,l));if(s.type=="range"){let a=l;for(let c=0;c<s.min;c++){let u=n();i(o(s.expr,a),u),a=u}if(s.max==-1)i(o(s.expr,a),a);else for(let c=s.min;c<s.max;c++){let u=n();r(a,u),i(o(s.expr,a),u),a=u}return[r(a)]}else{if(s.type=="name")return[r(l,void 0,s.value)];throw new Error("Unknown expr type")}}}}function vC(t,e){return e-t}function m0(t,e){let n=[];return r(e),n.sort(vC);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let s=0;s<o.length;s++){let{term:l,to:a}=o[s];!l&&n.indexOf(a)==-1&&r(a)}}}function O_(t){let e=Object.create(null);return n(m0(t,0));function n(r){let i=[];r.forEach(s=>{t[s].forEach(({term:l,to:a})=>{if(!l)return;let c;for(let u=0;u<i.length;u++)i[u][0]==l&&(c=i[u][1]);m0(t,a).forEach(u=>{c||i.push([l,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let o=e[r.join(",")]=new Wi(r.indexOf(t.length-1)>-1);for(let s=0;s<i.length;s++){let l=i[s][1].sort(vC);o.next.push({type:i[s][0],next:e[l.join(",")]||n(l)})}return o}}function A_(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,s=[];for(let l=0;l<i.next.length;l++){let{type:a,next:c}=i.next[l];s.push(a.name),o&&!(a.isText||a.hasRequiredAttrs())&&(o=!1),r.indexOf(c)==-1&&r.push(c)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function wC(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function SC(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function bC(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let o=t[i];o.validate&&o.validate(e[i])}}function kC(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new __(t,r,e[r]);return n}let g0=class CC{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=kC(e,r.attrs),this.defaultAttrs=wC(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Wi.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:SC(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new jr(this,this.computeAttrs(e),M.from(n),oe.setFrom(r))}createChecked(e=null,n,r){return n=M.from(n),this.checkContent(n),new jr(this,this.computeAttrs(e),n,oe.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=M.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(M.empty,!0);return o?new jr(this,e,n.append(o),oe.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){bC(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:oe.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,s)=>r[o]=new CC(o,n,s));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function D_(t,e,n){let r=n.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}class __{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?D_(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class yf{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=kC(e,i.attrs),this.excluded=null;let o=wC(this.attrs);this.instance=o?new oe(this,o):null}create(e=null){return!e&&this.instance?this.instance:new oe(this,SC(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,s)=>r[o]=new yf(o,i++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){bC(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class EC{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Ge.from(e.nodes),n.marks=Ge.from(e.marks||{}),this.nodes=g0.compile(this.spec.nodes,this),this.marks=yf.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",l=o.spec.marks;if(o.contentMatch=r[s]||(r[s]=Wi.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=l=="_"?null:l?y0(this,l.split(" ")):l==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:y0(this,s.split(" "))}this.nodeFromJSON=i=>jr.fromJSON(this,i),this.markFromJSON=i=>oe.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof g0){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new bu(r,r.defaultAttrs,e,oe.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function y0(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(let l in t.marks){let a=t.marks[l];(i=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=a)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function P_(t){return t.tag!=null}function N_(t){return t.style!=null}let hl=class bp{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(P_(i))this.tags.push(i);else if(N_(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new w0(this,n,!1);return r.addAll(e,oe.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new w0(this,n,!0);return r.addAll(e,oe.none,n.from,n.to),P.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(L_(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],l=s.style;if(!(l.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(s.getAttrs){let a=s.getAttrs(n);if(a===!1)continue;s.attrs=a||void 0}return s}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let l=n[s];if((l.priority==null?50:l.priority)<o)break}n.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=S0(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=S0(s)),s.node||s.ignore||s.mark||(s.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new bp(e,bp.schemaRules(e)))}};const xC={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},I_={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},TC={ol:!0,ul:!0},Hl=1,kp=2,pl=4;function v0(t,e,n){return e!=null?(e?Hl:0)|(e==="full"?kp:0):t&&t.whitespace=="pre"?Hl|kp:n&~pl}class nc{constructor(e,n,r,i,o,s){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=oe.none,this.match=o||(s&pl?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(M.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Hl)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=M.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(M.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!xC.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class w0{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,o,s=v0(null,n.preserveWhitespace,0)|(r?pl:0);i?o=new nc(i.type,i.attrs,oe.none,!0,n.topMatch||i.type.contentMatch,s):r?o=new nc(null,null,oe.none,!0,null,s):o=new nc(e.schema.topNodeType,null,oe.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,o=i.options&kp?"full":this.localPreserveWS||(i.options&Hl)>0;if(o==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)o!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=i.content[i.content.length-1],l=e.previousSibling;(!s||l&&l.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),l;TC.hasOwnProperty(s)&&this.parser.normalizeLists&&R_(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,r));e:if(a?a.ignore:I_.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,n);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let c,u=this.needsBlock;if(xC.hasOwnProperty(s))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),c=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let f=a&&a.skip?n:this.readStyles(e,n);f&&this.addAll(e,f),c&&this.sync(o),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,a,c,a.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],s=r.getPropertyValue(o);if(s)for(let l=void 0;;){let a=this.parser.matchStyle(o,s,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?n=n.filter(c=>!a.clearMark(c)):n=n.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return n}addElementByRule(e,n,r,i){let o,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let a=this.enter(s,n.attrs||null,r,n.preserveWhitespace);a&&(o=!0,r=a)}else{let a=this.parser.schema.marks[n.mark];r=r.concat(a.create(n.attrs))}let l=this.top;if(s&&s.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,r,!1));else{let a=e;typeof n.contentElement=="string"?a=e.querySelector(n.contentElement):typeof n.contentElement=="function"?a=n.contentElement(e):n.contentElement&&(a=n.contentElement),this.findAround(e,a,!0),this.addAll(a,r),this.findAround(e,a,!1)}o&&this.sync(l)&&this.open--}addAll(e,n,r,i){let o=r||0;for(let s=r?e.childNodes[r]:e.firstChild,l=i==null?null:e.childNodes[i];s!=l;s=s.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(s,n);this.findAtPoint(e,o)}findPlace(e,n,r){let i,o;for(let s=this.open,l=0;s>=0;s--){let a=this.nodes[s],c=a.findWrapping(e);if(c&&(!i||i.length>c.length+l)&&(i=c,o=a,!c.length))break;if(a.solid){if(r)break;l+=2}}if(!i)return null;this.sync(o);for(let s=0;s<i.length;s++)n=this.enterInner(i[s],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let s=oe.none;for(let l of i.concat(e.marks))(o.type?o.type.allowsMarkType(l.type):b0(l.type,e.type))&&(s=l.addToSet(s));return o.content.push(e.mark(s)),!0}return!1}enter(e,n,r,i){let o=this.findPlace(e.create(n),r,!1);return o&&(o=this.enterInner(e,n,r,!0,i)),o}enterInner(e,n,r,i=!1,o){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let l=v0(e,o,s.options);s.options&pl&&s.content.length==0&&(l|=pl);let a=oe.none;return r=r.filter(c=>(s.type?s.type.allowsMarkType(c.type):b0(c.type,e))?(a=c.addToSet(a),!1):!0),this.nodes.push(new nc(e,n,a,i,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Hl)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(l,a)=>{for(;l>=0;l--){let c=n[l];if(c==""){if(l==n.length-1||l==0)continue;for(;a>=o;a--)if(s(l-1,a))return!0;return!1}else{let u=a>0||a==0&&i?this.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;a--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function R_(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&TC.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function L_(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function S0(t){let e={};for(let n in t)e[n]=t[n];return e}function b0(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],s=l=>{o.push(l);for(let a=0;a<l.edgeCount;a++){let{type:c,next:u}=l.edge(a);if(c==e||o.indexOf(u)<0&&s(u))return!0}};if(s(i.contentMatch))return!0}}class no{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Pd(n).createDocumentFragment());let i=r,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let l=0,a=0;for(;l<o.length&&a<s.marks.length;){let c=s.marks[a];if(!this.marks[c.type.name]){a++;continue}if(!c.eq(o[l][0])||c.type.spec.spanning===!1)break;l++,a++}for(;l<o.length;)i=o.pop()[1];for(;a<s.marks.length;){let c=s.marks[a++],u=this.serializeMark(c,s.isInline,n);u&&(o.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=_c(Pd(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&_c(Pd(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return _c(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new no(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=k0(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return k0(e.marks)}}function k0(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Pd(t){return t.document||window.document}const C0=new WeakMap;function $_(t){let e=C0.get(t);return e===void 0&&C0.set(t,e=B_(t)),e}function B_(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function _c(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=$_(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(n=i.slice(0,s),i=i.slice(s+1));let l,a=n?t.createElementNS(n,i):t.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let f in c)if(c[f]!=null){let d=f.indexOf(" ");d>0?a.setAttributeNS(f.slice(0,d),f.slice(d+1),c[f]):f=="style"&&a.style?a.style.cssText=c[f]:a.setAttribute(f,c[f])}}for(let f=u;f<e.length;f++){let d=e[f];if(d===0){if(f<e.length-1||f>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:p,contentDOM:h}=_c(t,d,n,r);if(a.appendChild(p),h){if(l)throw new RangeError("Multiple content holes");l=h}}}return{dom:a,contentDOM:l}}const MC=65535,OC=Math.pow(2,16);function F_(t,e){return t+e*OC}function E0(t){return t&MC}function j_(t){return(t-(t&MC))/OC}const AC=1,DC=2,Pc=4,_C=8;class Cp{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&_C)>0}get deletedBefore(){return(this.delInfo&(AC|Pc))>0}get deletedAfter(){return(this.delInfo&(DC|Pc))>0}get deletedAcross(){return(this.delInfo&Pc)>0}}class Pt{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Pt.empty)return Pt.empty}recover(e){let n=0,r=E0(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+j_(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let c=this.ranges[l+o],u=this.ranges[l+s],f=a+c;if(e<=f){let d=c?e==a?-1:e==f?1:n:n,p=a+i+(d<0?0:u);if(r)return p;let h=e==(n<0?a:f)?null:F_(l/3,e-a),m=e==a?DC:e==f?AC:Pc;return(n<0?e!=a:e!=f)&&(m|=_C),new Cp(p,m,h)}i+=u-c}return r?e+i:new Cp(e+i,0,null)}touches(e,n){let r=0,i=E0(n),o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let c=this.ranges[l+o],u=a+c;if(e<=u&&l==i*3)return!0;r+=this.ranges[l+s]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],l=s-(this.inverted?o:0),a=s+(this.inverted?0:o),c=this.ranges[i+n],u=this.ranges[i+r];e(l,l+c,a,a+u),o+=u-c}}invert(){return new Pt(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Pt.empty:new Pt(e<0?[0,-e,0]:[0,0,e])}}Pt.empty=new Pt([]);class Wl{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Wl(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Wl;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this._maps[o],l=s.mapResult(e,n);if(l.recover!=null){let a=this.getMirror(o);if(a!=null&&a>o&&a<this.to){o=a,e=this._maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new Cp(e,i,null)}}const Nd=Object.create(null);class ut{getMap(){return Pt.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Nd[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Nd)throw new RangeError("Duplicate use of step JSON ID "+e);return Nd[e]=n,n.prototype.jsonID=e,n}}class Te{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Te(e,null)}static fail(e){return new Te(null,e)}static fromReplace(e,n,r,i){try{return Te.ok(e.replace(n,r,i))}catch(o){if(o instanceof vu)return Te.fail(o.message);throw o}}}function bg(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(bg(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return M.fromArray(r)}class Tr extends ut{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new P(bg(n.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return Te.fromReplace(e,this.from,this.to,o)}invert(){return new xn(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Tr(n.pos,r.pos,this.mark)}merge(e){return e instanceof Tr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Tr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Tr(n.from,n.to,e.markFromJSON(n.mark))}}ut.jsonID("addMark",Tr);class xn extends ut{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new P(bg(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Te.fromReplace(e,this.from,this.to,r)}invert(){return new Tr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new xn(n.pos,r.pos,this.mark)}merge(e){return e instanceof xn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new xn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new xn(n.from,n.to,e.markFromJSON(n.mark))}}ut.jsonID("removeMark",xn);class Mr extends ut{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Te.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Te.fromReplace(e,this.pos,this.pos+1,new P(M.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Mr(this.pos,n.marks[i]);return new Mr(this.pos,this.mark)}}return new Gi(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Mr(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Mr(n.pos,e.markFromJSON(n.mark))}}ut.jsonID("addNodeMark",Mr);class Gi extends ut{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Te.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Te.fromReplace(e,this.pos,this.pos+1,new P(M.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Mr(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Gi(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Gi(n.pos,e.markFromJSON(n.mark))}}ut.jsonID("removeNodeMark",Gi);class Be extends ut{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&Ep(e,this.from,this.to)?Te.fail("Structure replace would overwrite content"):Te.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Pt([this.from,this.to-this.from,this.slice.size])}invert(e){return new Be(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Be(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Be)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?P.empty:new P(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Be(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?P.empty:new P(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Be(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Be(n.from,n.to,P.fromJSON(e,n.slice),!!n.structure)}}ut.jsonID("replace",Be);class Ve extends ut{constructor(e,n,r,i,o,s,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=l}apply(e){if(this.structure&&(Ep(e,this.from,this.gapFrom)||Ep(e,this.gapTo,this.to)))return Te.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Te.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Te.fromReplace(e,this.from,this.to,r):Te.fail("Content does not fit in gap")}getMap(){return new Pt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Ve(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new Ve(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ve(n.from,n.to,n.gapFrom,n.gapTo,P.fromJSON(e,n.slice),n.insert,!!n.structure)}}ut.jsonID("replaceAround",Ve);function Ep(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function V_(t,e,n,r){let i=[],o=[],s,l;t.doc.nodesBetween(e,n,(a,c,u)=>{if(!a.isInline)return;let f=a.marks;if(!r.isInSet(f)&&u.type.allowsMarkType(r.type)){let d=Math.max(c,e),p=Math.min(c+a.nodeSize,n),h=r.addToSet(f);for(let m=0;m<f.length;m++)f[m].isInSet(h)||(s&&s.to==d&&s.mark.eq(f[m])?s.to=p:i.push(s=new xn(d,p,f[m])));l&&l.to==d?l.to=p:o.push(l=new Tr(d,p,r))}}),i.forEach(a=>t.step(a)),o.forEach(a=>t.step(a))}function z_(t,e,n,r){let i=[],o=0;t.doc.nodesBetween(e,n,(s,l)=>{if(!s.isInline)return;o++;let a=null;if(r instanceof yf){let c=s.marks,u;for(;u=r.isInSet(c);)(a||(a=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(s.marks)&&(a=[r]):a=s.marks;if(a&&a.length){let c=Math.min(l+s.nodeSize,n);for(let u=0;u<a.length;u++){let f=a[u],d;for(let p=0;p<i.length;p++){let h=i[p];h.step==o-1&&f.eq(i[p].style)&&(d=h)}d?(d.to=c,d.step=o):i.push({style:f,from:Math.max(l,e),to:c,step:o})}}}),i.forEach(s=>t.step(new xn(s.from,s.to,s.style)))}function kg(t,e,n,r=n.contentMatch,i=!0){let o=t.doc.nodeAt(e),s=[],l=e+1;for(let a=0;a<o.childCount;a++){let c=o.child(a),u=l+c.nodeSize,f=r.matchType(c.type);if(!f)s.push(new Be(l,u,P.empty));else{r=f;for(let d=0;d<c.marks.length;d++)n.allowsMarkType(c.marks[d].type)||t.step(new xn(l,u,c.marks[d]));if(i&&c.isText&&n.whitespace!="pre"){let d,p=/\r?\n|\r/g,h;for(;d=p.exec(c.text);)h||(h=new P(M.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),s.push(new Be(l+d.index,l+d.index+d[0].length,h))}}l=u}if(!r.validEnd){let a=r.fillBefore(M.empty,!0);t.replace(l,l,new P(a,0,0))}for(let a=s.length-1;a>=0;a--)t.step(s[a])}function U_(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function bs(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),o=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(o,s,n))return r;if(r==0||i.type.spec.isolating||!U_(i,o,s))break}return null}function H_(t,e,n){let{$from:r,$to:i,depth:o}=e,s=r.before(o+1),l=i.after(o+1),a=s,c=l,u=M.empty,f=0;for(let h=o,m=!1;h>n;h--)m||r.index(h)>0?(m=!0,u=M.from(r.node(h).copy(u)),f++):a--;let d=M.empty,p=0;for(let h=o,m=!1;h>n;h--)m||i.after(h+1)<i.end(h)?(m=!0,d=M.from(i.node(h).copy(d)),p++):c++;t.step(new Ve(a,c,s,l,new P(u.append(d),f,p),u.size-f,!0))}function Cg(t,e,n=null,r=t){let i=W_(t,e),o=i&&G_(r,e);return o?i.map(x0).concat({type:e,attrs:n}).concat(o.map(x0)):null}function x0(t){return{type:t,attrs:null}}function W_(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function G_(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let a=(s.length?s[s.length-1]:e).contentMatch;for(let c=r;a&&c<i;c++)a=a.matchType(n.child(c).type);return!a||!a.validEnd?null:s}function K_(t,e,n){let r=M.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let l=n[s].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=M.from(n[s].type.create(n[s].attrs,r))}let i=e.start,o=e.end;t.step(new Ve(i,o,i,o,new P(r,0,0),n.length,!0))}function q_(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(s,l)=>{let a=typeof i=="function"?i(s):i;if(s.isTextblock&&!s.hasMarkup(r,a)&&J_(t.doc,t.mapping.slice(o).map(l),r)){let c=null;if(r.schema.linebreakReplacement){let p=r.whitespace=="pre",h=!!r.contentMatch.matchType(r.schema.linebreakReplacement);p&&!h?c=!1:!p&&h&&(c=!0)}c===!1&&NC(t,s,l,o),kg(t,t.mapping.slice(o).map(l,1),r,void 0,c===null);let u=t.mapping.slice(o),f=u.map(l,1),d=u.map(l+s.nodeSize,1);return t.step(new Ve(f,d,f+1,d-1,new P(M.from(r.create(a,null,s.marks)),0,0),1,!0)),c===!0&&PC(t,s,l,o),!1}})}function PC(t,e,n,r){e.forEach((i,o)=>{if(i.isText){let s,l=/\r?\n|\r/g;for(;s=l.exec(i.text);){let a=t.mapping.slice(r).map(n+1+o+s.index);t.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function NC(t,e,n,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+o);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function J_(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function Y_(t,e,n,r,i){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let s=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,s);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Ve(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new P(M.from(s),0,0),1,!0))}function $o(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>o;c--,u--){let f=i.node(c),d=i.index(c);if(f.type.spec.isolating)return!1;let p=f.content.cutByIndex(d,f.childCount),h=r&&r[u+1];h&&(p=p.replaceChild(0,h.type.create(h.attrs)));let m=r&&r[u]||f;if(!f.canReplace(d+1,f.childCount)||!m.type.validContent(p))return!1}let l=i.indexAfter(o),a=r&&r[0];return i.node(o).canReplaceWith(l,l,a?a.type:i.node(o+1).type)}function Q_(t,e,n=1,r){let i=t.doc.resolve(e),o=M.empty,s=M.empty;for(let l=i.depth,a=i.depth-n,c=n-1;l>a;l--,c--){o=M.from(i.node(l).copy(o));let u=r&&r[c];s=M.from(u?u.type.create(u.attrs,s):i.node(l).copy(s))}t.step(new Be(e,e,new P(o.append(s),n,n),!0))}function ii(t,e){let n=t.resolve(e),r=n.index();return IC(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function X_(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),s=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(s),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function IC(t,e){return!!(t&&e&&!t.isLeaf&&X_(t,e))}function vf(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,s,l=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):n>0?(o=r.node(i+1),l++,s=r.node(i).maybeChild(l)):(o=r.node(i).maybeChild(l-1),s=r.node(i+1)),o&&!o.isTextblock&&IC(o,s)&&r.node(i).canReplace(l,l+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function Z_(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,o=t.doc.resolve(e-n),s=o.node().type;if(i&&s.inlineContent){let u=s.whitespace=="pre",f=!!s.contentMatch.matchType(i);u&&!f?r=!1:!u&&f&&(r=!0)}let l=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);NC(t,u.node(),u.before(),l)}s.inlineContent&&kg(t,e+n-1,s,o.node().contentMatchAt(o.index()),r==null);let a=t.mapping.slice(l),c=a.map(e-n);if(t.step(new Be(c,a.map(e+n,-1),P.empty,!0)),r===!0){let u=t.doc.resolve(c);PC(t,u.node(),u.before(),t.steps.length)}return t}function eP(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function RC(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let s=r.depth;s>=0;s--){let l=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,a=r.index(s)+(l>0?1:0),c=r.node(s),u=!1;if(o==1)u=c.canReplace(a,a,i);else{let f=c.contentMatchAt(a).findWrapping(i.firstChild.type);u=f&&c.canReplaceWith(a,a,f[0])}if(u)return l==0?r.pos:l<0?r.before(s+1):r.after(s+1)}return null}function wf(t,e,n=e,r=P.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return LC(i,o,r)?new Be(e,n,r):new tP(i,o,r).fit()}function LC(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class tP{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=M.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=M.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,l=i.depth;for(;s&&l&&o.childCount==1;)o=o.firstChild.content,s--,l--;let a=new P(o,s,l);return e>-1?new Ve(r.pos,e,this.$to.pos,this.$to.end(),a,n):a.size||r.pos!=this.$to.pos?new Be(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=Id(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:c}=this.frontier[l],u,f=null;if(n==1&&(s?c.matchType(s.type)||(f=c.fillBefore(M.from(s),!1)):o&&a.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:l,parent:o,inject:f};if(n==2&&s&&(u=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:l,parent:o,wrap:u};if(o&&c.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Id(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new P(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Id(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new P(Xs(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new P(Xs(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let m=0;m<o.length;m++)this.openFrontierNode(o[m]);let s=this.unplaced,l=r?r.content:s.content,a=s.openStart-e,c=0,u=[],{match:f,type:d}=this.frontier[n];if(i){for(let m=0;m<i.childCount;m++)u.push(i.child(m));f=f.matchFragment(i)}let p=l.size+e-(s.content.size-s.openEnd);for(;c<l.childCount;){let m=l.child(c),y=f.matchType(m.type);if(!y)break;c++,(c>1||a==0||m.content.size)&&(f=y,u.push($C(m.mark(d.allowedMarks(m.marks)),c==1?a:0,c==l.childCount?p:-1)))}let h=c==l.childCount;h||(p=-1),this.placed=Zs(this.placed,n,M.from(u)),this.frontier[n].match=f,h&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,y=l;m<p;m++){let g=y.lastChild;this.frontier.push({type:g.type,match:g.contentMatchAt(g.childCount)}),y=g.content}this.unplaced=h?e==0?P.empty:new P(Xs(s.content,e-1,1),e-1,p<0?s.openEnd:e-1):new P(Xs(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Rd(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=Rd(e,n,i,r,o);if(s){for(let l=n-1;l>=0;l--){let{match:a,type:c}=this.frontier[l],u=Rd(e,l,c,a,!0);if(!u||u.childCount)continue e}return{depth:n,fit:s,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Zs(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Zs(this.placed,this.depth,M.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(M.empty,!0);n.childCount&&(this.placed=Zs(this.placed,this.frontier.length,n))}}function Xs(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Xs(t.firstChild.content,e-1,n)))}function Zs(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Zs(t.lastChild.content,e-1,n)))}function Id(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function $C(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,$C(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(M.empty,!0)))),t.copy(r)}function Rd(t,e,n,r,i){let o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let l=r.fillBefore(o.content,!0,s);return l&&!nP(n,o.content,s)?l:null}function nP(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function rP(t){return t.spec.defining||t.spec.definingForContent}function iP(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),o=t.doc.resolve(n);if(LC(i,o,r))return t.step(new Be(e,n,r));let s=FC(i,t.doc.resolve(n));s[s.length-1]==0&&s.pop();let l=-(i.depth+1);s.unshift(l);for(let d=i.depth,p=i.pos-1;d>0;d--,p--){let h=i.node(d).type.spec;if(h.defining||h.definingAsContext||h.isolating)break;s.indexOf(d)>-1?l=d:i.before(d)==p&&s.splice(1,0,-d)}let a=s.indexOf(l),c=[],u=r.openStart;for(let d=r.content,p=0;;p++){let h=d.firstChild;if(c.push(h),p==r.openStart)break;d=h.content}for(let d=u-1;d>=0;d--){let p=c[d],h=rP(p.type);if(h&&!p.sameMarkup(i.node(Math.abs(l)-1)))u=d;else if(h||!p.type.isTextblock)break}for(let d=r.openStart;d>=0;d--){let p=(d+u+1)%(r.openStart+1),h=c[p];if(h)for(let m=0;m<s.length;m++){let y=s[(m+a)%s.length],g=!0;y<0&&(g=!1,y=-y);let v=i.node(y-1),w=i.index(y-1);if(v.canReplaceWith(w,w,h.type,h.marks))return t.replace(i.before(y),g?o.after(y):n,new P(BC(r.content,0,r.openStart,p),p,r.openEnd))}}let f=t.steps.length;for(let d=s.length-1;d>=0&&(t.replace(e,n,r),!(t.steps.length>f));d--){let p=s[d];p<0||(e=i.before(p),n=o.after(p))}}function BC(t,e,n,r,i){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(BC(o.content,e+1,n,r,o)))}if(e>r){let o=i.contentMatchAt(0),s=o.fillBefore(t).append(t);t=s.append(o.matchFragment(s).fillBefore(M.empty,!0))}return t}function oP(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=eP(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new P(M.from(r),0,0))}function sP(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=FC(r,i);for(let s=0;s<o.length;s++){let l=o[s],a=s==o.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),i.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return t.delete(r.before(l),i.after(l))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s&&r.start(s-1)==i.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),i.index(s-1)))return t.delete(r.before(s),n);t.delete(e,n)}function FC(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}class Bo extends ut{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Te.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Te.fromReplace(e,this.pos,this.pos+1,new P(M.from(i),0,n.isLeaf?0:1))}getMap(){return Pt.empty}invert(e){return new Bo(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Bo(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Bo(n.pos,n.attr,n.value)}}ut.jsonID("attr",Bo);class Gl extends ut{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Te.ok(r)}getMap(){return Pt.empty}invert(e){return new Gl(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Gl(n.attr,n.value)}}ut.jsonID("docAttr",Gl);let Zo=class extends Error{};Zo=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Zo.prototype=Object.create(Error.prototype);Zo.prototype.constructor=Zo;Zo.prototype.name="TransformError";class lP{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Wl}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Zo(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=P.empty){let i=wf(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new P(M.from(r),0,0))}delete(e,n){return this.replace(e,n,P.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return iP(this,e,n,r),this}replaceRangeWith(e,n,r){return oP(this,e,n,r),this}deleteRange(e,n){return sP(this,e,n),this}lift(e,n){return H_(this,e,n),this}join(e,n=1){return Z_(this,e,n),this}wrap(e,n){return K_(this,e,n),this}setBlockType(e,n=e,r,i=null){return q_(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return Y_(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new Bo(e,n,r)),this}setDocAttribute(e,n){return this.step(new Gl(e,n)),this}addNodeMark(e,n){return this.step(new Mr(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof oe)n.isInSet(r.marks)&&this.step(new Gi(e,n));else{let i=r.marks,o,s=[];for(;o=n.isInSet(i);)s.push(new Gi(e,o)),i=o.removeFromSet(i);for(let l=s.length-1;l>=0;l--)this.step(s[l])}return this}split(e,n=1,r){return Q_(this,e,n,r),this}addMark(e,n,r){return V_(this,e,n,r),this}removeMark(e,n,r){return z_(this,e,n,r),this}clearIncompatible(e,n,r){return kg(this,e,n,r),this}}const Ld=Object.create(null);class W{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new aP(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=P.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){let{$from:a,$to:c}=s[l],u=e.mapping.slice(o);e.replaceRange(u.map(a.pos),u.map(c.pos),l?P.empty:n),l==0&&O0(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:l}=i[o],a=e.mapping.slice(r),c=a.map(s.pos),u=a.map(l.pos);o?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),O0(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new z(e):fo(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=n<0?fo(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):fo(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Yt(e.node(0))}static atStart(e){return fo(e,e,0,0,1)||new Yt(e)}static atEnd(e){return fo(e,e,e.content.size,e.childCount,-1)||new Yt(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Ld[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Ld)throw new RangeError("Duplicate use of selection JSON ID "+e);return Ld[e]=n,n.prototype.jsonID=e,n}getBookmark(){return z.between(this.$anchor,this.$head).getBookmark()}}W.prototype.visible=!0;class aP{constructor(e,n){this.$from=e,this.$to=n}}let T0=!1;function M0(t){!T0&&!t.parent.inlineContent&&(T0=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class z extends W{constructor(e,n=e){M0(e),M0(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return W.near(r);let i=e.resolve(n.map(this.anchor));return new z(i.parent.inlineContent?i:r,r)}replace(e,n=P.empty){if(super.replace(e,n),n==P.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof z&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Sf(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new z(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=W.findFrom(n,r,!0)||W.findFrom(n,-r,!0);if(o)n=o.$head;else return W.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(W.findFrom(e,-r,!0)||W.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new z(e,n)}}W.jsonID("text",z);class Sf{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Sf(e.map(this.anchor),e.map(this.head))}resolve(e){return z.between(e.resolve(this.anchor),e.resolve(this.head))}}class $ extends W{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?W.near(o):new $(o)}content(){return new P(M.from(this.node),0,0)}eq(e){return e instanceof $&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Eg(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new $(e.resolve(n.anchor))}static create(e,n){return new $(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}$.prototype.visible=!1;W.jsonID("node",$);class Eg{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Sf(r,r):new Eg(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&$.isSelectable(r)?new $(n):W.near(n)}}class Yt extends W{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=P.empty){if(n==P.empty){e.delete(0,e.doc.content.size);let r=W.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Yt(e)}map(e){return new Yt(e)}eq(e){return e instanceof Yt}getBookmark(){return cP}}W.jsonID("all",Yt);const cP={map(){return this},resolve(t){return new Yt(t)}};function fo(t,e,n,r,i,o=!1){if(e.inlineContent)return z.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let l=e.child(s);if(l.isAtom){if(!o&&$.isSelectable(l))return $.create(t,n-(i<0?l.nodeSize:0))}else{let a=fo(t,l,n+i,i<0?l.childCount:0,i,o);if(a)return a}n+=l.nodeSize*i}return null}function O0(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Be||i instanceof Ve))return;let o=t.mapping.maps[r],s;o.forEach((l,a,c,u)=>{s==null&&(s=u)}),t.setSelection(W.near(t.doc.resolve(s),n))}const A0=1,rc=2,D0=4;let uP=class extends lP{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|A0)&~rc,this.storedMarks=null,this}get selectionSet(){return(this.updated&A0)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=rc,this}ensureMarks(e){return oe.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&rc)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~rc,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||oe.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let s=this.doc.resolve(n);o=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,o)),this.selection.empty||this.setSelection(W.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=D0,this}get scrolledIntoView(){return(this.updated&D0)>0}};function _0(t,e){return!e||!t?t:t.bind(e)}class el{constructor(e,n,r){this.name=e,this.init=_0(n.init,r),this.apply=_0(n.apply,r)}}const fP=[new el("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new el("selection",{init(t,e){return t.selection||W.atStart(e.doc)},apply(t){return t.selection}}),new el("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new el("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class $d{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=fP.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new el(r.key,r.spec.state,r))})}}class Ao{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let l=this.config.plugins[s];if(l.spec.appendTransaction){let a=i?i[s].n:0,c=i?i[s].state:this,u=a<n.length&&l.spec.appendTransaction.call(l,a?n.slice(a):n,c,r);if(u&&r.filterTransaction(u,s)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<s?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),o=!0}i&&(i[s]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Ao(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new uP(this)}static create(e){let n=new $d(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Ao(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new $d(this.schema,e.plugins),r=n.fields,i=new Ao(n);for(let o=0;o<r.length;o++){let s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new $d(e.schema,e.plugins),o=new Ao(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=jr.fromJSON(e.schema,n.doc);else if(s.name=="selection")o.selection=W.fromJSON(o.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],c=a.spec.state;if(a.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){o[s.name]=c.fromJSON.call(a,e,n[l],o);return}}o[s.name]=s.init(e,o)}}),o}}function jC(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=jC(i,e,{})),n[r]=i}return n}class At{constructor(e){this.spec=e,this.props={},e.props&&jC(e.props,this,this.props),this.key=e.key?e.key.key:VC("plugin")}getState(e){return e[this.key]}}const Bd=Object.create(null);function VC(t){return t in Bd?t+"$"+ ++Bd[t]:(Bd[t]=0,t+"$")}class $n{constructor(e="key"){this.key=VC(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Ke=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},es=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let xp=null;const Gn=function(t,e,n){let r=xp||(xp=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},dP=function(){xp=null},Ki=function(t,e,n,r){return n&&(P0(t,e,n,r,-1)||P0(t,e,n,r,1))},hP=/^(img|br|input|textarea|hr)$/i;function P0(t,e,n,r,i){for(var o;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Ht(t))){let s=t.parentNode;if(!s||s.nodeType!=1||Sa(t)||hP.test(t.nodeName)||t.contentEditable=="false")return!1;e=Ke(t)+(i<0?0:1),t=s}else if(t.nodeType==1){let s=t.childNodes[e+(i<0?-1:0)];if(s.nodeType==1&&s.contentEditable=="false")if(!((o=s.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=i;else return!1;else t=s,e=i<0?Ht(t):0}else return!1}}function Ht(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function pP(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Ht(t)}else if(t.parentNode&&!Sa(t))e=Ke(t),t=t.parentNode;else return null}}function mP(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Sa(t))e=Ke(t)+1,t=t.parentNode;else return null}}function gP(t,e,n){for(let r=e==0,i=e==Ht(t);r||i;){if(t==n)return!0;let o=Ke(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==Ht(t)}}function Sa(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const bf=function(t){return t.focusNode&&Ki(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function vi(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function yP(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function vP(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Ht(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Ht(r.startContainer),r.startOffset)}}}const Dn=typeof navigator<"u"?navigator:null,N0=typeof document<"u"?document:null,oi=Dn&&Dn.userAgent||"",Tp=/Edge\/(\d+)/.exec(oi),zC=/MSIE \d/.exec(oi),Mp=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(oi),Mt=!!(zC||Mp||Tp),Vr=zC?document.documentMode:Mp?+Mp[1]:Tp?+Tp[1]:0,Qt=!Mt&&/gecko\/(\d+)/i.test(oi);Qt&&+(/Firefox\/(\d+)/.exec(oi)||[0,0])[1];const Op=!Mt&&/Chrome\/(\d+)/.exec(oi),ot=!!Op,UC=Op?+Op[1]:0,pt=!Mt&&!!Dn&&/Apple Computer/.test(Dn.vendor),ts=pt&&(/Mobile\/\w+/.test(oi)||!!Dn&&Dn.maxTouchPoints>2),Vt=ts||(Dn?/Mac/.test(Dn.platform):!1),wP=Dn?/Win/.test(Dn.platform):!1,Yn=/Android \d/.test(oi),ba=!!N0&&"webkitFontSmoothing"in N0.documentElement.style,SP=ba?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function bP(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function zn(t,e){return typeof t=="number"?t:t[e]}function kP(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function I0(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let s=n||t.dom;s;){if(s.nodeType!=1){s=es(s);continue}let l=s,a=l==o.body,c=a?bP(o):kP(l),u=0,f=0;if(e.top<c.top+zn(r,"top")?f=-(c.top-e.top+zn(i,"top")):e.bottom>c.bottom-zn(r,"bottom")&&(f=e.bottom-e.top>c.bottom-c.top?e.top+zn(i,"top")-c.top:e.bottom-c.bottom+zn(i,"bottom")),e.left<c.left+zn(r,"left")?u=-(c.left-e.left+zn(i,"left")):e.right>c.right-zn(r,"right")&&(u=e.right-c.right+zn(i,"right")),u||f)if(a)o.defaultView.scrollBy(u,f);else{let p=l.scrollLeft,h=l.scrollTop;f&&(l.scrollTop+=f),u&&(l.scrollLeft+=u);let m=l.scrollLeft-p,y=l.scrollTop-h;e={left:e.left-m,top:e.top-y,right:e.right-m,bottom:e.bottom-y}}let d=a?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(d))break;s=d=="absolute"?s.offsetParent:es(s)}}function CP(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let l=t.root.elementFromPoint(o,s);if(!l||l==t.dom||!t.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=n-20){r=l,i=a.top;break}}return{refDOM:r,refTop:i,stack:HC(t.dom)}}function HC(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=es(r));return e}function EP({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;WC(n,r==0?0:r-e)}function WC(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let ao=null;function xP(t){if(t.setActive)return t.setActive();if(ao)return t.focus(ao);let e=HC(t);t.focus(ao==null?{get preventScroll(){return ao={preventScroll:!0},!0}}:void 0),ao||(ao=!1,WC(e,0))}function GC(t,e){let n,r=2e8,i,o=0,s=e.top,l=e.top,a,c;for(let u=t.firstChild,f=0;u;u=u.nextSibling,f++){let d;if(u.nodeType==1)d=u.getClientRects();else if(u.nodeType==3)d=Gn(u).getClientRects();else continue;for(let p=0;p<d.length;p++){let h=d[p];if(h.top<=s&&h.bottom>=l){s=Math.max(h.bottom,s),l=Math.min(h.top,l);let m=h.left>e.left?h.left-e.left:h.right<e.left?e.left-h.right:0;if(m<r){n=u,r=m,i=m&&n.nodeType==3?{left:h.right<e.left?h.right:h.left,top:e.top}:e,u.nodeType==1&&m&&(o=f+(e.left>=(h.left+h.right)/2?1:0));continue}}else h.top>e.top&&!a&&h.left<=e.left&&h.right>=e.left&&(a=u,c={left:Math.max(h.left,Math.min(h.right,e.left)),top:h.top});!n&&(e.left>=h.right&&e.top>=h.top||e.left>=h.left&&e.top>=h.bottom)&&(o=f+1)}}return!n&&a&&(n=a,i=c,r=0),n&&n.nodeType==3?TP(n,i):!n||r&&n.nodeType==1?{node:t,offset:o}:GC(n,i)}function TP(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let o=pr(r,1);if(o.top!=o.bottom&&xg(e,o))return{node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}function xg(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function MP(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function OP(t,e,n){let{node:r,offset:i}=GC(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();o=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function AP(t,e,n,r){let i=-1;for(let o=e,s=!1;o!=t.dom;){let l=t.docView.nearestDesc(o,!0),a;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((a=l.dom.getBoundingClientRect()).width||a.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!s&&a.left>r.left||a.top>r.top?i=l.posBefore:(!s&&a.right<r.left||a.bottom<r.top)&&(i=l.posAfter),s=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter;o=l.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function KC(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let s=t.childNodes[o];if(s.nodeType==1){let l=s.getClientRects();for(let a=0;a<l.length;a++){let c=l[a];if(xg(e,c))return KC(s,e,c)}}if((o=(o+1)%r)==i)break}return t}function DP(t,e){let n=t.dom.ownerDocument,r,i=0,o=vP(n,e.left,e.top);o&&({node:r,offset:i}=o);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=t.dom.getBoundingClientRect();if(!xg(e,c)||(s=KC(t.dom,e,c),!s))return null}if(pt)for(let c=s;r&&c;c=es(c))c.draggable&&(r=void 0);if(s=MP(s,e),r){if(Qt&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],f;u.nodeName=="IMG"&&(f=u.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&i++}let c;ba&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=AP(t,r,i,e))}l==null&&(l=OP(t,s,e));let a=t.docView.nearestDesc(s,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function R0(t){return t.top<t.bottom||t.left<t.right}function pr(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(R0(r))return r}return Array.prototype.find.call(n,R0)||t.getBoundingClientRect()}const _P=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function qC(t,e,n){let{node:r,offset:i,atom:o}=t.docView.domFromPos(e,n<0?-1:1),s=ba||Qt;if(r.nodeType==3)if(s&&(_P.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let a=pr(Gn(r,i,i),n);if(Qt&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=pr(Gn(r,i-1,i-1),-1);if(c.top==a.top){let u=pr(Gn(r,i,i+1),-1);if(u.top!=a.top)return Ws(u,u.left<c.left)}}return a}else{let a=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(a--,u=1):n<0?a--:c++,Ws(pr(Gn(r,a,c),u),u<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(n<0||i==Ht(r))){let a=r.childNodes[i-1];if(a.nodeType==1)return Fd(a.getBoundingClientRect(),!1)}if(o==null&&i<Ht(r)){let a=r.childNodes[i];if(a.nodeType==1)return Fd(a.getBoundingClientRect(),!0)}return Fd(r.getBoundingClientRect(),n>=0)}if(o==null&&i&&(n<0||i==Ht(r))){let a=r.childNodes[i-1],c=a.nodeType==3?Gn(a,Ht(a)-(s?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(c)return Ws(pr(c,1),!1)}if(o==null&&i<Ht(r)){let a=r.childNodes[i];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let c=a?a.nodeType==3?Gn(a,0,s?0:1):a.nodeType==1?a:null:null;if(c)return Ws(pr(c,-1),!0)}return Ws(pr(r.nodeType==3?Gn(r):r,-n),n>=0)}function Ws(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Fd(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function JC(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function PP(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return JC(t,e,()=>{let{node:o}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(o,!0);if(!l)break;if(l.node.isBlock){o=l.contentDOM||l.dom;break}o=l.dom.parentNode}let s=qC(t,i.pos,1);for(let l=o.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=Gn(l,0,l.nodeValue.length).getClientRects();else continue;for(let c=0;c<a.length;c++){let u=a[c];if(u.bottom>u.top+1&&(n=="up"?s.top-u.top>(u.bottom-s.top)*2:u.bottom-s.bottom>(s.bottom-u.top)*2))return!1}}return!0})}const NP=/[\u0590-\u08ac]/;function IP(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,l=t.domSelection();return l?!NP.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?o:s:JC(t,e,()=>{let{focusNode:a,focusOffset:c,anchorNode:u,anchorOffset:f}=t.domSelectionRange(),d=l.caretBidiLevel;l.modify("move",n,"character");let p=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:h,focusOffset:m}=t.domSelectionRange(),y=h&&!p.contains(h.nodeType==1?h:h.parentNode)||a==h&&c==m;try{l.collapse(u,f),a&&(a!=u||c!=f)&&l.extend&&l.extend(a,c)}catch{}return d!=null&&(l.caretBidiLevel=d),y}):r.pos==r.start()||r.pos==r.end()}let L0=null,$0=null,B0=!1;function RP(t,e,n){return L0==e&&$0==n?B0:(L0=e,$0=n,B0=n=="up"||n=="down"?PP(t,e,n):IP(t,e,n))}const Xt=0,F0=1,xi=2,_n=3;class ka{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Xt,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,s;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Ke(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),s;if(o&&(!n||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)for(let s=0;s<i.children.length;s++){let l=i.children[s];if(l.size){i=l;break}}return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let s=this.children[r],l=o+s.size;if(l>e||s instanceof QC){i=e-o;break}o=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof YC&&o.side>=0;r--);if(n<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&n&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?Ke(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?Ke(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,l=0;;l++){let a=this.children[l],c=s+a.size;if(i==-1&&e<=c){let u=s+a.border;if(e>=u&&n<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,n,u);e=s;for(let f=l;f>0;f--){let d=this.children[f-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){i=Ke(d.dom)+1;break}e-=d.size}i==-1&&(i=0)}if(i>-1&&(c>n||l==this.children.length-1)){n=c;for(let u=l+1;u<this.children.length;u++){let f=this.children[u];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=Ke(f.dom);break}n+=f.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let o=Math.min(e,n),s=Math.max(e,n);for(let p=0,h=0;p<this.children.length;p++){let m=this.children[p],y=h+m.size;if(o>h&&s<y)return m.setSelection(e-h-m.border,n-h-m.border,r,i);h=y}let l=this.domFromPos(e,e?-1:1),a=n==e?l:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),f=!1;if((Qt||pt)&&e==n){let{node:p,offset:h}=l;if(p.nodeType==3){if(f=!!(h&&p.nodeValue[h-1]==`
`),f&&h==p.nodeValue.length)for(let m=p,y;m;m=m.parentNode){if(y=m.nextSibling){y.nodeName=="BR"&&(l=a={node:y.parentNode,offset:Ke(y)+1});break}let g=m.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else{let m=p.childNodes[h-1];f=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(Qt&&u.focusNode&&u.focusNode!=a.node&&u.focusNode.nodeType==1){let p=u.focusNode.childNodes[u.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||f&&pt)&&Ki(l.node,l.offset,u.anchorNode,u.anchorOffset)&&Ki(a.node,a.offset,u.focusNode,u.focusOffset))return;let d=!1;if((c.extend||e==n)&&!(f&&Qt)){c.collapse(l.node,l.offset);try{e!=n&&c.extend(a.node,a.offset),d=!0}catch{}}if(!d){if(e>n){let h=l;l=a,a=h}let p=document.createRange();p.setEnd(a.node,a.offset),p.setStart(l.node,l.offset),c.removeAllRanges(),c.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],s=r+o.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let l=r+o.border,a=s-o.border;if(e>=l&&n<=a){this.dirty=e==r||n==s?xi:F0,e==l&&n==a&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=_n:o.markDirty(e-l,n-l);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?xi:_n}r=s}this.dirty=xi}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?xi:F0;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class YC extends ka{constructor(e,n,r,i){let o,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(s.nodeType!=1){let l=document.createElement("span");l.appendChild(s),s=l}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==Xt&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class LP extends ka{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class qi extends ka{constructor(e,n,r,i,o){super(e,[],r,i),this.mark=n,this.spec=o}static create(e,n,r,i){let o=i.nodeViews[n.type.name],s=o&&o(n,i,r);return(!s||!s.dom)&&(s=no.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new qi(e,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&_n||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=_n&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Xt){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Xt}}slice(e,n,r){let i=qi.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;n<s&&(o=Dp(o,n,s,r)),e>0&&(o=Dp(o,0,e,r));for(let l=0;l<o.length;l++)o[l].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class zr extends ka{constructor(e,n,r,i,o,s,l,a,c){super(e,[],o,s),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,n,r,i,o,s){let l=o.nodeViews[n.type.name],a,c=l&&l(n,o,()=>{if(!a)return s;if(a.parent)return a.parent.posBeforeChild(a)},r,i),u=c&&c.dom,f=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:f}=no.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let d=u;return u=eE(u,r,n),c?a=new $P(e,n,r,i,u,f||null,d,c,o,s+1):n.isText?new kf(e,n,r,i,u,d,o):new zr(e,n,r,i,u,f||null,d,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>M.empty)}return e}matchesNode(e,n,r){return this.dirty==Xt&&e.eq(this.node)&&ku(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,o=e.composing?this.localCompositionInfo(e,n):null,s=o&&o.pos>-1?o:null,l=o&&o.pos<0,a=new FP(this,s&&s.node,e);zP(this.node,this.innerDeco,(c,u,f)=>{c.spec.marks?a.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!f&&a.syncToMarks(u==this.node.childCount?oe.none:this.node.child(u).marks,r,e),a.placeWidget(c,e,i)},(c,u,f,d)=>{a.syncToMarks(c.marks,r,e);let p;a.findNodeMatch(c,u,f,d)||l&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(p=a.findIndexWithChild(o.node))>-1&&a.updateNodeAt(c,u,f,p,e)||a.updateNextNode(c,u,f,e,d,i)||a.addNode(c,u,f,e,i),i+=c.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==xi)&&(s&&this.protectLocalComposition(e,s),XC(this.contentDOM,this.children,e),ts&&UP(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof z)||r<n||i>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let s=o.nodeValue,l=HP(this.node.content,s,r-n,i-n);return l<0?null:{node:o,pos:l,text:s}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new LP(this,o,n,i);e.input.compositionNodes.push(s),this.children=Dp(this.children,r,r+i.length,e,s)}update(e,n,r,i){return this.dirty==_n||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Xt}updateOuterDeco(e){if(ku(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=ZC(this.dom,this.nodeDOM,Ap(this.outerDeco,this.node,n),Ap(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function j0(t,e,n,r,i){eE(r,e,t);let o=new zr(void 0,t,e,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class kf extends zr{constructor(e,n,r,i,o,s,l){super(e,n,r,i,o,null,s,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==_n||this.dirty!=Xt&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Xt||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Xt,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),o=document.createTextNode(i.text);return new kf(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=_n)}get domAtom(){return!1}isText(e){return this.node.text==e}}class QC extends ka{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Xt&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class $P extends zr{constructor(e,n,r,i,o,s,l,a,c,u){super(e,n,r,i,o,s,l,c,u),this.spec=a}update(e,n,r,i){if(this.dirty==_n)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function XC(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let s=e[o],l=s.dom;if(l.parentNode==t){for(;l!=r;)r=V0(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(l,r);if(s instanceof qi){let a=r?r.previousSibling:t.lastChild;XC(s.contentDOM,s.children,n),r=a?a.nextSibling:t.firstChild}}for(;r;)r=V0(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const ml=function(t){t&&(this.nodeName=t)};ml.prototype=Object.create(null);const Ti=[new ml];function Ap(t,e,n){if(t.length==0)return Ti;let r=n?Ti[0]:new ml,i=[r];for(let o=0;o<t.length;o++){let s=t[o].type.attrs;if(s){s.nodeName&&i.push(r=new ml(s.nodeName));for(let l in s){let a=s[l];a!=null&&(n&&i.length==1&&i.push(r=new ml(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return i}function ZC(t,e,n,r){if(n==Ti&&r==Ti)return e;let i=e;for(let o=0;o<r.length;o++){let s=r[o],l=n[o];if(o){let a;l&&l.nodeName==s.nodeName&&i!=t&&(a=i.parentNode)&&a.nodeName.toLowerCase()==s.nodeName||(a=document.createElement(s.nodeName),a.pmIsDeco=!0,a.appendChild(i),l=Ti[0]),i=a}BP(i,l||Ti[0],s)}return i}function BP(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.add(i[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function eE(t,e,n){return ZC(t,t,Ti,Ap(e,n,t.nodeType!=1))}function ku(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function V0(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class FP{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=jP(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,o=this.stack.length>>1,s=Math.min(o,e.length);for(;i<s&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=Xt,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let c=this.top.children[a];if(c.matchesMark(e[o])&&!this.isLocked(c.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=qi.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,i){let o=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))o=this.top.children.indexOf(s,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let c=this.top.children[l];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){o=l;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,i,o){let s=this.top.children[i];return s.dirty==_n&&s.dom==s.contentDOM&&(s.dirty=xi),s.update(e,n,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,o,s){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof zr){let c=this.preMatch.matched.get(a);if(c!=null&&c!=o)return!1;let u=a.dom,f,d=this.isLocked(u)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=_n&&ku(n,a.outerDeco));if(!d&&a.update(e,n,r,i))return this.destroyBetween(this.index,l),a.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(f=this.recreateWrapper(a,e,n,r,i,s)))return this.destroyBetween(this.index,l),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=xi,f.updateChildren(i,s+1),f.dirty=Xt),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,o,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!ku(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let l=zr.create(this.top,n,r,i,o,s);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,n,r,i,o){let s=zr.create(this.top,e,n,r,i,o);s.contentDOM&&s.updateChildren(i,o+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new YC(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof qi;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof kf)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((pt||ot)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new QC(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function jP(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,s=[];e:for(;i>0;){let l;for(;;)if(r){let c=n.children[r-1];if(c instanceof qi)n=c,r=c.children.length;else{l=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=t.child(i-1))break;--i,o.set(l,i),s.push(l)}}return{index:i,matched:o,matches:s.reverse()}}function VP(t,e){return t.type.side-e.type.side}function zP(t,e,n,r){let i=e.locals(t),o=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(o,u),c),o+=u.nodeSize}return}let s=0,l=[],a=null;for(let c=0;;){let u,f;for(;s<i.length&&i[s].to==o;){let y=i[s++];y.widget&&(u?(f||(f=[u])).push(y):u=y)}if(u)if(f){f.sort(VP);for(let y=0;y<f.length;y++)n(f[y],c,!!a)}else n(u,c,!!a);let d,p;if(a)p=-1,d=a,a=null;else if(c<t.childCount)p=c,d=t.child(c++);else break;for(let y=0;y<l.length;y++)l[y].to<=o&&l.splice(y--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)l.push(i[s++]);let h=o+d.nodeSize;if(d.isText){let y=h;s<i.length&&i[s].from<y&&(y=i[s].from);for(let g=0;g<l.length;g++)l[g].to<y&&(y=l[g].to);y<h&&(a=d.cut(y-o),d=d.cut(0,y-o),h=y,p=-1)}else for(;s<i.length&&i[s].to<h;)s++;let m=d.isInline&&!d.isLeaf?l.filter(y=>!y.inline):l.slice();r(d,m,e.forChild(o,d),p),o=h}}function UP(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function HP(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let s=t.child(i++),l=o;if(o+=s.nodeSize,!s.isText)continue;let a=s.text;for(;i<t.childCount;){let c=t.child(i++);if(o+=c.nodeSize,!c.isText)break;a+=c.text}if(o>=n){if(o>=r&&a.slice(r-e.length-l,r-l)==e)return r-e.length;let c=l<r?a.lastIndexOf(e,r-l-1):-1;if(c>=0&&c+e.length+l>=n)return l+c;if(n==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function Dp(t,e,n,r,i){let o=[];for(let s=0,l=0;s<t.length;s++){let a=t[s],c=l,u=l+=a.size;c>=n||u<=e?o.push(a):(c<e&&o.push(a.slice(0,e-c,r)),i&&(o.push(i),i=void 0),u>n&&o.push(a.slice(n-c,a.size,r)))}return o}function Tg(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),o=i&&i.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let l=r.resolve(s),a,c;if(bf(n)){for(a=s;i&&!i.node;)i=i.parent;let f=i.node;if(i&&f.isAtom&&$.isSelectable(f)&&i.parent&&!(f.isInline&&gP(n.focusNode,n.focusOffset,i.dom))){let d=i.posBefore;c=new $(s==d?l:r.resolve(d))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let f=s,d=s;for(let p=0;p<n.rangeCount;p++){let h=n.getRangeAt(p);f=Math.min(f,t.docView.posFromDOM(h.startContainer,h.startOffset,1)),d=Math.max(d,t.docView.posFromDOM(h.endContainer,h.endOffset,-1))}if(f<0)return null;[a,s]=d==t.state.selection.anchor?[d,f]:[f,d],l=r.resolve(s)}else a=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let u=r.resolve(a);if(!c){let f=e=="pointer"||t.state.selection.head<l.pos&&!o?1:-1;c=Mg(t,u,l,f)}return c}function tE(t){return t.editable?t.hasFocus():rE(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Xn(t,e=!1){let n=t.state.selection;if(nE(t,n),!!tE(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&ot){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Ki(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)GP(t);else{let{anchor:r,head:i}=n,o,s;z0&&!(n instanceof z)&&(n.$from.parent.inlineContent||(o=U0(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=U0(t,n.to))),t.docView.setSelection(r,i,t,e),z0&&(o&&H0(o),s&&H0(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&WP(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const z0=pt||ot&&UC<63;function U0(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(pt&&i&&i.contentEditable=="false")return jd(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return jd(i);if(o)return jd(o)}}function jd(t){return t.contentEditable="true",pt&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function H0(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function WP(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!tE(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function GP(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,Ke(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&Mt&&Vr<=11&&(n.disabled=!0,n.disabled=!1)}function nE(t,e){if(e instanceof $){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(W0(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else W0(t)}function W0(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Mg(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||z.between(e,n,r)}function G0(t){return t.editable&&!t.hasFocus()?!1:rE(t)}function rE(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function KP(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Ki(e.node,e.offset,n.anchorNode,n.anchorOffset)}function _p(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return o&&W.findFrom(o,e)}function yr(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function K0(t,e,n){let r=t.state.selection;if(r instanceof z)if(n.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=t.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return yr(t,new z(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=_p(t.state,e);return i&&i instanceof $?yr(t,i):!1}else if(!(Vt&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let l=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=t.docView.descAt(l))&&!s.contentDOM?$.isSelectable(o)?yr(t,new $(e<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):ba?yr(t,new z(t.state.doc.resolve(e<0?l:l+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof $&&r.node.isInline)return yr(t,new z(e>0?r.$to:r.$from));{let i=_p(t.state,e);return i?yr(t,i):!1}}}function Cu(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function gl(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function co(t,e){return e<0?qP(t):JP(t)}function qP(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,s=!1;for(Qt&&n.nodeType==1&&r<Cu(n)&&gl(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(gl(l,-1))i=n,o=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(iE(n))break;{let l=n.previousSibling;for(;l&&gl(l,-1);)i=n.parentNode,o=Ke(l),l=l.previousSibling;if(l)n=l,r=Cu(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?Pp(t,n,r):i&&Pp(t,i,o)}function JP(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Cu(n),o,s;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(gl(l,1))o=n,s=++r;else break}else{if(iE(n))break;{let l=n.nextSibling;for(;l&&gl(l,1);)o=l.parentNode,s=Ke(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=Cu(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}o&&Pp(t,o,s)}function iE(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function YP(t,e){for(;t&&e==t.childNodes.length&&!Sa(t);)e=Ke(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function QP(t,e){for(;t&&!e&&!Sa(t);)e=Ke(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Pp(t,e,n){if(e.nodeType!=3){let o,s;(s=YP(e,n))?(e=s,n=0):(o=QP(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(!r)return;if(bf(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Xn(t)},50)}function q0(t,e){let n=t.state.doc.resolve(e);if(!(ot||wP)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function J0(t,e,n){let r=t.state.selection;if(r instanceof z&&!r.empty||n.indexOf("s")>-1||Vt&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=_p(t.state,e);if(s&&s instanceof $)return yr(t,s)}if(!i.parent.inlineContent){let s=e<0?i:o,l=r instanceof Yt?W.near(s,e):W.findFrom(s,e);return l?yr(t,l):!1}return!1}function Y0(t,e){if(!(t.state.selection instanceof z))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let s=t.state.tr;return e<0?s.delete(n.pos-o.nodeSize,n.pos):s.delete(n.pos,n.pos+o.nodeSize),t.dispatch(s),!0}return!1}function Q0(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function XP(t){if(!pt||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Q0(t,r,"true"),setTimeout(()=>Q0(t,r,"false"),20)}return!1}function ZP(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function eN(t,e){let n=e.keyCode,r=ZP(e);if(n==8||Vt&&n==72&&r=="c")return Y0(t,-1)||co(t,-1);if(n==46&&!e.shiftKey||Vt&&n==68&&r=="c")return Y0(t,1)||co(t,1);if(n==13||n==27)return!0;if(n==37||Vt&&n==66&&r=="c"){let i=n==37?q0(t,t.state.selection.from)=="ltr"?-1:1:-1;return K0(t,i,r)||co(t,i)}else if(n==39||Vt&&n==70&&r=="c"){let i=n==39?q0(t,t.state.selection.from)=="ltr"?1:-1:1;return K0(t,i,r)||co(t,i)}else{if(n==38||Vt&&n==80&&r=="c")return J0(t,-1,r)||co(t,-1);if(n==40||Vt&&n==78&&r=="c")return XP(t)||J0(t,1,r)||co(t,1);if(r==(Vt?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Og(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let n=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let p=r.firstChild;n.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let s=t.someProp("clipboardSerializer")||no.fromSchema(t.state.schema),l=uE(),a=l.createElement("div");a.appendChild(s.serializeFragment(r,{document:l}));let c=a.firstChild,u,f=0;for(;c&&c.nodeType==1&&(u=cE[c.nodeName.toLowerCase()]);){for(let p=u.length-1;p>=0;p--){let h=l.createElement(u[p]);for(;a.firstChild;)h.appendChild(a.firstChild);a.appendChild(h),f++}c=a.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${o}${f?` -${f}`:""} ${JSON.stringify(n)}`);let d=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:d,slice:e}}function oE(t,e,n,r,i){let o=i.parent.type.spec.code,s,l;if(!n&&!e)return null;let a=!!e&&(r||o||!n);if(a){if(t.someProp("transformPastedText",d=>{e=d(e,o||r,t)}),o)return l=new P(M.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",d=>{l=d(l,t,!0)}),l;let f=t.someProp("clipboardTextParser",d=>d(e,i,r,t));if(f)l=f;else{let d=i.marks(),{schema:p}=t.state,h=no.fromSchema(p);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let y=s.appendChild(document.createElement("p"));m&&y.appendChild(h.serializeNode(p.text(m,d)))})}}else t.someProp("transformPastedHTML",f=>{n=f(n,t)}),s=iN(n),ba&&oN(s);let c=s&&s.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let f=+u[3];f>0;f--){let d=s.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;s=d}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||hl.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(a||u),context:i,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!tN.test(d.parentNode.nodeName)?{ignore:!0}:null}})),u)l=sN(X0(l,+u[1],+u[2]),u[4]);else if(l=P.maxOpen(nN(l.content,i),!0),l.openStart||l.openEnd){let f=0,d=0;for(let p=l.content.firstChild;f<l.openStart&&!p.type.spec.isolating;f++,p=p.firstChild);for(let p=l.content.lastChild;d<l.openEnd&&!p.type.spec.isolating;d++,p=p.lastChild);l=X0(l,f,d)}return t.someProp("transformPasted",f=>{l=f(l,t,a)}),l}const tN=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function nN(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),o,s=[];if(t.forEach(l=>{if(!s)return;let a=i.findWrapping(l.type),c;if(!a)return s=null;if(c=s.length&&o.length&&lE(a,o,l,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=aE(s[s.length-1],o.length));let u=sE(l,a);s.push(u),i=i.matchType(u.type),o=a}}),s)return M.from(s)}return t}function sE(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,M.from(t));return t}function lE(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let o=lE(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(M.from(sE(n,t,i+1))))}}function aE(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,aE(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(M.empty,!0);return t.copy(n.append(r))}function Np(t,e,n,r,i,o){let s=e<0?t.firstChild:t.lastChild,l=s.content;return t.childCount>1&&(o=0),i<r-1&&(l=Np(l,e,n,r,i+1,o)),i>=n&&(l=e<0?s.contentMatchAt(0).fillBefore(l,o<=i).append(l):l.append(s.contentMatchAt(s.childCount).fillBefore(M.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(l))}function X0(t,e,n){return e<t.openStart&&(t=new P(Np(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new P(Np(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const cE={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Z0=null;function uE(){return Z0||(Z0=document.implementation.createHTMLDocument("title"))}let Vd=null;function rN(t){let e=window.trustedTypes;return e?(Vd||(Vd=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Vd.createHTML(t)):t}function iN(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=uE().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&cE[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=rN(t),i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function oN(t){let e=t.querySelectorAll(ot?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function sN(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:o,openEnd:s}=t;for(let l=r.length-2;l>=0;l-=2){let a=n.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;i=M.from(a.create(r[l+1],i)),o++,s++}return new P(i,o,s)}const mt={},gt={},lN={touchstart:!0,touchmove:!0};class aN{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function cN(t){for(let e in mt){let n=mt[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{fN(t,r)&&!Ag(t,r)&&(t.editable||!(r.type in gt))&&n(t,r)},lN[e]?{passive:!0}:void 0)}pt&&t.dom.addEventListener("input",()=>null),Ip(t)}function Or(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function uN(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Ip(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Ag(t,r))})}function Ag(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function fN(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function dN(t,e){!Ag(t,e)&&mt[e.type]&&(t.editable||!(e.type in gt))&&mt[e.type](t,e)}gt.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!dE(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Yn&&ot&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),ts&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,vi(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||eN(t,n)?n.preventDefault():Or(t,"key")};gt.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};gt.keypress=(t,e)=>{let n=e;if(dE(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Vt&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof z)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),o=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,i,o))&&t.dispatch(o()),n.preventDefault()}};function Cf(t){return{left:t.clientX,top:t.clientY}}function hN(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Dg(t,e,n,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(t.someProp(e,l=>s>o.depth?l(t,n,o.nodeAfter,o.before(s),i,!0):l(t,n,o.node(s),o.before(s),i,!1)))return!0;return!1}function Fo(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);n=="pointer"&&r.setMeta("pointer",!0),t.dispatch(r)}function pN(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&$.isSelectable(r)?(Fo(t,new $(n),"pointer"),!0):!1}function mN(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof $&&(r=n.node);let o=t.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let l=s>o.depth?o.nodeAfter:o.node(s);if($.isSelectable(l)){r&&n.$from.depth>0&&s>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(s);break}}return i!=null?(Fo(t,$.create(t.state.doc,i),"pointer"),!0):!1}function gN(t,e,n,r,i){return Dg(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(i?mN(t,n):pN(t,n))}function yN(t,e,n,r){return Dg(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function vN(t,e,n,r){return Dg(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||wN(t,n,r)}function wN(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Fo(t,z.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),l=i.before(o);if(s.inlineContent)Fo(t,z.create(r,l+1,l+1+s.content.size),"pointer");else if($.isSelectable(s))Fo(t,$.create(r,l),"pointer");else continue;return!0}}function _g(t){return Eu(t)}const fE=Vt?"metaKey":"ctrlKey";mt.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=_g(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&hN(n,t.input.lastClick)&&!n[fE]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o,button:n.button};let s=t.posAtCoords(Cf(n));s&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new SN(t,s,n,!!r)):(o=="doubleClick"?yN:vN)(t,s.pos,s.inside,n)?n.preventDefault():Or(t,"pointer"))};class SN{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[fE],this.allowDefault=r.shiftKey;let o,s;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),s=n.inside;else{let u=e.state.doc.resolve(n.pos);o=u.parent,s=u.depth?u.before():0}const l=i?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.nodeDOM.nodeType==1?a.nodeDOM:null;let{selection:c}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||c instanceof $&&c.from<=s&&c.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Qt&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Or(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Xn(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Cf(e))),this.updateAllowDefault(e),this.allowDefault||!n?Or(this.view,"pointer"):gN(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||pt&&this.mightDrag&&!this.mightDrag.node.isAtom||ot&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Fo(this.view,W.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):Or(this.view,"pointer")}move(e){this.updateAllowDefault(e),Or(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}mt.touchstart=t=>{t.input.lastTouch=Date.now(),_g(t),Or(t,"pointer")};mt.touchmove=t=>{t.input.lastTouch=Date.now(),Or(t,"pointer")};mt.contextmenu=t=>_g(t);function dE(t,e){return t.composing?!0:pt&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const bN=Yn?5e3:-1;gt.compositionstart=gt.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof z&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Eu(t,!0),t.markCursor=null;else if(Eu(t,!e.selection.empty),Qt&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){let l=t.domSelection();l&&l.collapse(s,s.nodeValue.length);break}else i=s,o=-1}}t.input.composing=!0}hE(t,bN)};gt.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,hE(t,20))};function hE(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Eu(t),e))}function pE(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=CN());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function kN(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=pP(e.focusNode,e.focusOffset),r=mP(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function CN(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Eu(t,e=!1){if(!(Yn&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),pE(t),e||t.docView&&t.docView.dirty){let n=Tg(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function EN(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Kl=Mt&&Vr<15||ts&&SP<604;mt.copy=gt.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let o=Kl?null:n.clipboardData,s=r.content(),{dom:l,text:a}=Og(t,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",l.innerHTML),o.setData("text/plain",a)):EN(t,l),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function xN(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function TN(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?ql(t,r.value,null,i,e):ql(t,r.textContent,r.innerHTML,i,e)},50)}function ql(t,e,n,r,i){let o=oE(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",a=>a(t,i,o||P.empty)))return!0;if(!o)return!1;let s=xN(o),l=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(o);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function mE(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}gt.paste=(t,e)=>{let n=e;if(t.composing&&!Yn)return;let r=Kl?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&ql(t,mE(r),r.getData("text/html"),i,n)?n.preventDefault():TN(t,n)};class gE{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const MN=Vt?"altKey":"ctrlKey";function yE(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[MN]}mt.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords(Cf(n)),s;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof $?i.to-1:i.to))){if(r&&r.mightDrag)s=$.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=t.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=t.docView&&(s=$.create(t.state.doc,f.posBefore))}}let l=(s||t.state.selection).content(),{dom:a,text:c,slice:u}=Og(t,l);(!n.dataTransfer.files.length||!ot||UC>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Kl?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",Kl||n.dataTransfer.setData("text/plain",c),t.dragging=new gE(u,yE(t,n),s)};mt.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};gt.dragover=gt.dragenter=(t,e)=>e.preventDefault();gt.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(Cf(n));if(!i)return;let o=t.state.doc.resolve(i.pos),s=r&&r.slice;s?t.someProp("transformPasted",h=>{s=h(s,t,!1)}):s=oE(t,mE(n.dataTransfer),Kl?null:n.dataTransfer.getData("text/html"),!1,o);let l=!!(r&&yE(t,n));if(t.someProp("handleDrop",h=>h(t,n,s||P.empty,l))){n.preventDefault();return}if(!s)return;n.preventDefault();let a=s?RC(t.state.doc,o.pos,s):o.pos;a==null&&(a=o.pos);let c=t.state.tr;if(l){let{node:h}=r;h?h.replace(c):c.deleteSelection()}let u=c.mapping.map(a),f=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,d=c.doc;if(f?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(d))return;let p=c.doc.resolve(u);if(f&&$.isSelectable(s.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new $(p));else{let h=c.mapping.map(a);c.mapping.maps[c.mapping.maps.length-1].forEach((m,y,g,v)=>h=v),c.setSelection(Mg(t,p,c.doc.resolve(h)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};mt.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Xn(t)},20))};mt.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};mt.beforeinput=(t,e)=>{if(ot&&Yn&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,vi(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in gt)mt[t]=gt[t];function Jl(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class xu{constructor(e,n){this.toDOM=e,this.spec=n||Ii,this.side=this.spec.side||0}map(e,n,r,i){let{pos:o,deleted:s}=e.mapResult(n.from+i,this.side<0?-1:1);return s?null:new qt(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof xu&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Jl(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ur{constructor(e,n){this.attrs=e,this.spec=n||Ii}map(e,n,r,i){let o=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new qt(o,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Ur&&Jl(this.attrs,e.attrs)&&Jl(this.spec,e.spec)}static is(e){return e.type instanceof Ur}destroy(){}}class Pg{constructor(e,n){this.attrs=e,this.spec=n||Ii}map(e,n,r,i){let o=e.mapResult(n.from+i,1);if(o.deleted)return null;let s=e.mapResult(n.to+i,-1);return s.deleted||s.pos<=o.pos?null:new qt(o.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),o;return i==n.from&&!(o=e.child(r)).isText&&i+o.nodeSize==n.to}eq(e){return this==e||e instanceof Pg&&Jl(this.attrs,e.attrs)&&Jl(this.spec,e.spec)}destroy(){}}class qt{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new qt(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new qt(e,e,new xu(n,r))}static inline(e,n,r,i){return new qt(e,n,new Ur(r,i))}static node(e,n,r,i){return new qt(e,n,new Pg(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ur}get widget(){return this.type instanceof xu}}const ho=[],Ii={};class Oe{constructor(e,n){this.local=e.length?e:ho,this.children=n.length?n:ho}static create(e,n){return n.length?Tu(n,e,0,Ii):tt}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,o){for(let s=0;s<this.local.length;s++){let l=this.local[s];l.from<=n&&l.to>=e&&(!o||o(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let l=this.children[s]+1;this.children[s+2].findInner(e-l,n-l,r,i+l,o)}}map(e,n,r){return this==tt||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Ii)}mapInner(e,n,r,i,o){let s;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,i);a&&a.type.valid(n,a)?(s||(s=[])).push(a):o.onRemove&&o.onRemove(this.local[l].spec)}return this.children.length?ON(this.children,s||[],e,n,r,i,o):s?new Oe(s.sort(Ri),ho):tt}add(e,n){return n.length?this==tt?Oe.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,o=0;e.forEach((l,a)=>{let c=a+r,u;if(u=wE(n,l,c)){for(i||(i=this.children.slice());o<i.length&&i[o]<a;)o+=3;i[o]==a?i[o+2]=i[o+2].addInner(l,u,c+1):i.splice(o,0,a,a+l.nodeSize,Tu(u,l,c+1,Ii)),o+=3}});let s=vE(o?SE(n):n,-r);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||s.splice(l--,1);return new Oe(s.length?this.local.concat(s).sort(Ri):this.local,i||this.children)}remove(e){return e.length==0||this==tt?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,l=r[o]+n,a=r[o+1]+n;for(let u=0,f;u<e.length;u++)(f=e[u])&&f.from>l&&f.to<a&&(e[u]=null,(s||(s=[])).push(f));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[o+2].removeInner(s,l+1);c!=tt?r[o+2]=c:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let l=0;l<i.length;l++)i[l].eq(s,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Oe(i,r):tt}forChild(e,n){if(this==tt)return this;if(n.isLeaf)return Oe.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let o=e+1,s=o+n.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<s&&a.to>o&&a.type instanceof Ur){let c=Math.max(o,a.from)-o,u=Math.min(s,a.to)-o;c<u&&(i||(i=[])).push(a.copy(c,u))}}if(i){let l=new Oe(i.sort(Ri),ho);return r?new kr([l,r]):l}return r||tt}eq(e){if(this==e)return!0;if(!(e instanceof Oe)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Ng(this.localsInner(e))}localsInner(e){if(this==tt)return ho;if(e.inlineContent||!this.local.some(Ur.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Ur||n.push(this.local[r]);return n}forEachSet(e){e(this)}}Oe.empty=new Oe([],[]);Oe.removeOverlap=Ng;const tt=Oe.empty;class kr{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Ii));return kr.from(r)}forChild(e,n){if(n.isLeaf)return Oe.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,n);o!=tt&&(o instanceof kr?r=r.concat(o.members):r.push(o))}return kr.from(r)}eq(e){if(!(e instanceof kr)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let s=0;s<o.length;s++)n.push(o[s])}}return n?Ng(r?n:n.sort(Ri)):ho}static from(e){switch(e.length){case 0:return tt;case 1:return e[0];default:return new kr(e.every(n=>n instanceof Oe)?e:e.reduce((n,r)=>n.concat(r instanceof Oe?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function ON(t,e,n,r,i,o,s){let l=t.slice();for(let c=0,u=o;c<n.maps.length;c++){let f=0;n.maps[c].forEach((d,p,h,m)=>{let y=m-h-(p-d);for(let g=0;g<l.length;g+=3){let v=l[g+1];if(v<0||d>v+u-f)continue;let w=l[g]+u-f;p>=w?l[g+1]=d<=w?-2:-1:d>=u&&y&&(l[g]+=y,l[g+1]+=y)}f+=y}),u=n.maps[c].map(u,-1)}let a=!1;for(let c=0;c<l.length;c+=3)if(l[c+1]<0){if(l[c+1]==-2){a=!0,l[c+1]=-1;continue}let u=n.map(t[c]+o),f=u-i;if(f<0||f>=r.content.size){a=!0;continue}let d=n.map(t[c+1]+o,-1),p=d-i,{index:h,offset:m}=r.content.findIndex(f),y=r.maybeChild(h);if(y&&m==f&&m+y.nodeSize==p){let g=l[c+2].mapInner(n,y,u+1,t[c]+o+1,s);g!=tt?(l[c]=f,l[c+1]=p,l[c+2]=g):(l[c+1]=-2,a=!0)}else a=!0}if(a){let c=AN(l,t,e,n,i,o,s),u=Tu(c,r,0,s);e=u.local;for(let f=0;f<l.length;f+=3)l[f+1]<0&&(l.splice(f,3),f-=3);for(let f=0,d=0;f<u.children.length;f+=3){let p=u.children[f];for(;d<l.length&&l[d]<p;)d+=3;l.splice(d,0,u.children[f],u.children[f+1],u.children[f+2])}}return new Oe(e.sort(Ri),l)}function vE(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new qt(i.from+e,i.to+e,i.type))}return n}function AN(t,e,n,r,i,o,s){function l(a,c){for(let u=0;u<a.local.length;u++){let f=a.local[u].map(r,i,c);f?n.push(f):s.onRemove&&s.onRemove(a.local[u].spec)}for(let u=0;u<a.children.length;u+=3)l(a.children[u+2],a.children[u]+c+1)}for(let a=0;a<t.length;a+=3)t[a+1]==-1&&l(t[a+2],e[a]+o+1);return n}function wE(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o=0,s;o<t.length;o++)(s=t[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),t[o]=null);return i}function SE(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Tu(t,e,n,r){let i=[],o=!1;e.forEach((l,a)=>{let c=wE(t,l,a+n);if(c){o=!0;let u=Tu(c,l,n+a+1,r);u!=tt&&i.push(a,a+l.nodeSize,u)}});let s=vE(o?SE(t):t,-n).sort(Ri);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||(r.onRemove&&r.onRemove(s[l].spec),s.splice(l--,1));return s.length||i.length?new Oe(s,i):tt}function Ri(t,e){return t.from-e.from||t.to-e.to}function Ng(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),ew(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),ew(e,i,r.copy(o.from,r.to)));break}}}return e}function ew(t,e,n){for(;e<t.length&&Ri(n,t[e])>0;)e++;t.splice(e,0,n)}function zd(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=tt&&e.push(r)}),t.cursorWrapper&&e.push(Oe.create(t.state.doc,[t.cursorWrapper.deco])),kr.from(e)}const DN={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},_N=Mt&&Vr<=11;class PN{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class NN{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new PN,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Mt&&Vr<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),_N&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,DN)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(G0(this.view)){if(this.suppressingSelectionUpdates)return Xn(this.view);if(Mt&&Vr<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Ki(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=es(o))n.add(o);for(let o=e.anchorNode;o;o=es(o))if(n.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&G0(e)&&!this.ignoreSelectionChange(r),o=-1,s=-1,l=!1,a=[];if(e.editable)for(let u=0;u<n.length;u++){let f=this.registerMutation(n[u],a);f&&(o=o<0?f.from:Math.min(f.from,o),s=s<0?f.to:Math.max(f.to,s),f.typeOver&&(l=!0))}if(Qt&&a.length){let u=a.filter(f=>f.nodeName=="BR");if(u.length==2){let[f,d]=u;f.parentNode&&f.parentNode.parentNode==d.parentNode?d.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let d of u){let p=d.parentNode;p&&p.nodeName=="LI"&&(!f||LN(e,f)!=p)&&d.remove()}}}let c=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&bf(r)&&(c=Tg(e))&&c.eq(W.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Xn(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,s),IN(e)),this.handleDOMChange(o,s,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Xn(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let f=e.addedNodes[u];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(Mt&&Vr<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:f,nextSibling:d}=e.addedNodes[u];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(o=d)}let s=i&&i.parentNode==e.target?Ke(i)+1:0,l=r.localPosFromDOM(e.target,s,-1),a=o&&o.parentNode==e.target?Ke(o):e.target.childNodes.length,c=r.localPosFromDOM(e.target,a,1);return{from:l,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let tw=new WeakMap,nw=!1;function IN(t){if(!tw.has(t)&&(tw.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Qt,nw)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),nw=!0}}function rw(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return Ki(s.node,s.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function RN(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return rw(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?rw(t,n):null}function LN(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function $N(t,e,n){let{node:r,fromOffset:i,toOffset:o,from:s,to:l}=t.docView.parseRange(e,n),a=t.domSelectionRange(),c,u=a.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:a.anchorOffset}],bf(a)||c.push({node:a.focusNode,offset:a.focusOffset})),ot&&t.input.lastKeyCode===8)for(let y=o;y>i;y--){let g=r.childNodes[y-1],v=g.pmViewDesc;if(g.nodeName=="BR"&&!v){o=y;break}if(!v||v.size)break}let f=t.state.doc,d=t.someProp("domParser")||hl.fromSchema(t.state.schema),p=f.resolve(s),h=null,m=d.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:o,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:BN,context:p});if(c&&c[0].pos!=null){let y=c[0].pos,g=c[1]&&c[1].pos;g==null&&(g=y),h={anchor:y+s,head:g+s}}return{doc:m,sel:h,from:s,to:l}}function BN(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(pt&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||pt&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const FN=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function jN(t,e,n,r,i){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let C=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,E=Tg(t,C);if(E&&!t.state.selection.eq(E)){if(ot&&Yn&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",A=>A(t,vi(13,"Enter"))))return;let x=t.state.tr.setSelection(E);C=="pointer"?x.setMeta("pointer",!0):C=="key"&&x.scrollIntoView(),o&&x.setMeta("composition",o),t.dispatch(x)}return}let s=t.state.doc.resolve(e),l=s.sharedDepth(n);e=s.before(l+1),n=t.state.doc.resolve(n).after(l+1);let a=t.state.selection,c=$N(t,e,n),u=t.state.doc,f=u.slice(c.from,c.to),d,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(d=t.state.selection.to,p="end"):(d=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let h=UN(f.content,c.doc.content,c.from,d,p);if(h&&t.input.domChangeCount++,(ts&&t.input.lastIOSEnter>Date.now()-225||Yn)&&i.some(C=>C.nodeType==1&&!FN.test(C.nodeName))&&(!h||h.endA>=h.endB)&&t.someProp("handleKeyDown",C=>C(t,vi(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!h)if(r&&a instanceof z&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))h={start:a.from,endA:a.to,endB:a.to};else{if(c.sel){let C=iw(t,t.state.doc,c.sel);if(C&&!C.eq(t.state.selection)){let E=t.state.tr.setSelection(C);o&&E.setMeta("composition",o),t.dispatch(E)}}return}t.state.selection.from<t.state.selection.to&&h.start==h.endB&&t.state.selection instanceof z&&(h.start>t.state.selection.from&&h.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?h.start=t.state.selection.from:h.endA<t.state.selection.to&&h.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(h.endB+=t.state.selection.to-h.endA,h.endA=t.state.selection.to)),Mt&&Vr<=11&&h.endB==h.start+1&&h.endA==h.start&&h.start>c.from&&c.doc.textBetween(h.start-c.from-1,h.start-c.from+1)=="  "&&(h.start--,h.endA--,h.endB--);let m=c.doc.resolveNoCache(h.start-c.from),y=c.doc.resolveNoCache(h.endB-c.from),g=u.resolve(h.start),v=m.sameParent(y)&&m.parent.inlineContent&&g.end()>=h.endA;if((ts&&t.input.lastIOSEnter>Date.now()-225&&(!v||i.some(C=>C.nodeName=="DIV"||C.nodeName=="P"))||!v&&m.pos<c.doc.content.size&&(!m.sameParent(y)||!m.parent.inlineContent)&&m.pos<y.pos&&!/\S/.test(c.doc.textBetween(m.pos,y.pos,"","")))&&t.someProp("handleKeyDown",C=>C(t,vi(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>h.start&&zN(u,h.start,h.endA,m,y)&&t.someProp("handleKeyDown",C=>C(t,vi(8,"Backspace")))){Yn&&ot&&t.domObserver.suppressSelectionUpdates();return}ot&&h.endB==h.start&&(t.input.lastChromeDelete=Date.now()),Yn&&!v&&m.start()!=y.start()&&y.parentOffset==0&&m.depth==y.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==h.endA&&(h.endB-=2,y=c.doc.resolveNoCache(h.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(C){return C(t,vi(13,"Enter"))})},20));let w=h.start,S=h.endA,k=C=>{let E=C||t.state.tr.replace(w,S,c.doc.slice(h.start-c.from,h.endB-c.from));if(c.sel){let x=iw(t,E.doc,c.sel);x&&!(ot&&t.composing&&x.empty&&(h.start!=h.endB||t.input.lastChromeDelete<Date.now()-100)&&(x.head==w||x.head==E.mapping.map(S)-1)||Mt&&x.empty&&x.head==w)&&E.setSelection(x)}return o&&E.setMeta("composition",o),E.scrollIntoView()},b;if(v)if(m.pos==y.pos){Mt&&Vr<=11&&m.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Xn(t),20));let C=k(t.state.tr.delete(w,S)),E=u.resolve(h.start).marksAcross(u.resolve(h.endA));E&&C.ensureMarks(E),t.dispatch(C)}else if(h.endA==h.endB&&(b=VN(m.parent.content.cut(m.parentOffset,y.parentOffset),g.parent.content.cut(g.parentOffset,h.endA-g.start())))){let C=k(t.state.tr);b.type=="add"?C.addMark(w,S,b.mark):C.removeMark(w,S,b.mark),t.dispatch(C)}else if(m.parent.child(m.index()).isText&&m.index()==y.index()-(y.textOffset?0:1)){let C=m.parent.textBetween(m.parentOffset,y.parentOffset),E=()=>k(t.state.tr.insertText(C,w,S));t.someProp("handleTextInput",x=>x(t,w,S,C,E))||t.dispatch(E())}else t.dispatch(k());else t.dispatch(k())}function iw(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Mg(t,e.resolve(n.anchor),e.resolve(n.head))}function VN(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,o=r,s,l,a;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)o=n[u].removeFromSet(o);if(i.length==1&&o.length==0)l=i[0],s="add",a=u=>u.mark(l.addToSet(u.marks));else if(i.length==0&&o.length==1)l=o[0],s="remove",a=u=>u.mark(l.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(a(e.child(u)));if(M.from(c).eq(t))return{mark:l,type:s}}function zN(t,e,n,r,i){if(n-e<=i.pos-r.pos||Ud(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let l=o.nodeAfter;return l!=null&&n==e+l.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=t.resolve(Ud(o,!0,!0));return!s.parent.isTextblock||s.pos>n||Ud(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function Ud(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function UN(t,e,n,r,i){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:s,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let a=Math.max(0,o-Math.min(s,l));r-=s+a-o}if(s<o&&t.size<e.size){let a=r<=o&&r>=s?o-r:0;o-=a,o&&o<e.size&&ow(e.textBetween(o-1,o+1))&&(o+=a?1:-1),l=o+(l-s),s=o}else if(l<o){let a=r<=o&&r>=l?o-r:0;o-=a,o&&o<t.size&&ow(t.textBetween(o-1,o+1))&&(o+=a?1:-1),s=o+(s-l),l=o}return{start:o,endA:s,endB:l}}function ow(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class bE{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new aN,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(uw),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=aw(this),lw(this),this.nodeViews=cw(this),this.docView=j0(this.state.doc,sw(this),zd(this),this.dom,this),this.domObserver=new NN(this,(r,i,o,s)=>jN(this,r,i,o,s)),this.domObserver.start(),cN(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Ip(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(uw),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,o=!1,s=!1;e.storedMarks&&this.composing&&(pE(this),s=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let p=cw(this);WN(p,this.nodeViews)&&(this.nodeViews=p,o=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&Ip(this),this.editable=aw(this),lw(this);let a=zd(this),c=sw(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=o||!this.docView.matchesNode(e.doc,c,a);(f||!e.selection.eq(i.selection))&&(s=!0);let d=u=="preserve"&&s&&this.dom.style.overflowAnchor==null&&CP(this);if(s){this.domObserver.stop();let p=f&&(Mt||ot)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&HN(i.selection,e.selection);if(f){let h=ot?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=kN(this)),(o||!this.docView.update(e.doc,c,a,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=j0(e.doc,c,a,this.dom,this)),h&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&KP(this))?Xn(this,p):(nE(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():d&&EP(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof $){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&I0(this,n.getBoundingClientRect(),e)}else I0(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new gE(e.slice,e.move,i<0?void 0:$.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let l=this.directPlugins[s].props[e];if(l!=null&&(i=n?n(l):l))return i}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let l=o[s].props[e];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(Mt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&xP(this.dom),Xn(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return DP(this,e)}coordsAtPos(e,n=1){return qC(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return RP(this,n||this.state,e)}pasteHTML(e,n){return ql(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return ql(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return Og(this,e)}destroy(){this.docView&&(uN(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],zd(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,dP())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return dN(this,e)}domSelectionRange(){let e=this.domSelection();return e?pt&&this.root.nodeType===11&&yP(this.dom.ownerDocument)==this.dom&&RN(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}bE.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function sw(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[qt.node(0,t.state.doc.content.size,e)]}function lw(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:qt.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function aw(t){return!t.someProp("editable",e=>e(t.state)===!1)}function HN(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function cw(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function WN(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function uw(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var qr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Mu={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},GN=typeof navigator<"u"&&/Mac/.test(navigator.platform),KN=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var qe=0;qe<10;qe++)qr[48+qe]=qr[96+qe]=String(qe);for(var qe=1;qe<=24;qe++)qr[qe+111]="F"+qe;for(var qe=65;qe<=90;qe++)qr[qe]=String.fromCharCode(qe+32),Mu[qe]=String.fromCharCode(qe);for(var Hd in qr)Mu.hasOwnProperty(Hd)||(Mu[Hd]=qr[Hd]);function qN(t){var e=GN&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||KN&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Mu:qr)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const JN=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),YN=typeof navigator<"u"&&/Win/.test(navigator.platform);function QN(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,o,s;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))JN?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),s&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function XN(t){let e=Object.create(null);for(let n in t)e[QN(n)]=t[n];return e}function Wd(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function ZN(t){return new At({props:{handleKeyDown:kE(t)}})}function kE(t){let e=XN(t);return function(n,r){let i=qN(r),o,s=e[Wd(i,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[Wd(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(YN&&r.ctrlKey&&r.altKey)&&(o=qr[r.keyCode])&&o!=i){let l=e[Wd(o,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const eI=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function CE(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const tI=(t,e,n)=>{let r=CE(t,n);if(!r)return!1;let i=Ig(r);if(!i){let s=r.blockRange(),l=s&&bs(s);return l==null?!1:(e&&e(t.tr.lift(s,l).scrollIntoView()),!0)}let o=i.nodeBefore;if(ME(t,i,e,-1))return!0;if(r.parent.content.size==0&&(ns(o,"end")||$.isSelectable(o)))for(let s=r.depth;;s--){let l=wf(t.doc,r.before(s),r.after(s),P.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=t.tr.step(l);a.setSelection(ns(o,"end")?W.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):$.create(a.doc,i.pos-o.nodeSize)),e(a.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},nI=(t,e,n)=>{let r=CE(t,n);if(!r)return!1;let i=Ig(r);return i?EE(t,i,e):!1},rI=(t,e,n)=>{let r=xE(t,n);if(!r)return!1;let i=Rg(r);return i?EE(t,i,e):!1};function EE(t,e,n){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let s=e.nodeAfter,l=s,a=e.pos+1;for(;!l.isTextblock;a++){if(l.type.spec.isolating)return!1;let u=l.firstChild;if(!u)return!1;l=u}let c=wf(t.doc,o,a,P.empty);if(!c||c.from!=o||c instanceof Be&&c.slice.size>=a-o)return!1;if(n){let u=t.tr.step(c);u.setSelection(z.create(u.doc,o)),n(u.scrollIntoView())}return!0}function ns(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const iI=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=Ig(r)}let s=o&&o.nodeBefore;return!s||!$.isSelectable(s)?!1:(e&&e(t.tr.setSelection($.create(t.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function Ig(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function xE(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const oI=(t,e,n)=>{let r=xE(t,n);if(!r)return!1;let i=Rg(r);if(!i)return!1;let o=i.nodeAfter;if(ME(t,i,e,1))return!0;if(r.parent.content.size==0&&(ns(o,"start")||$.isSelectable(o))){let s=wf(t.doc,r.before(),r.after(),P.empty);if(s&&s.slice.size<s.to-s.from){if(e){let l=t.tr.step(s);l.setSelection(ns(o,"start")?W.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):$.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},sI=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=Rg(r)}let s=o&&o.nodeAfter;return!s||!$.isSelectable(s)?!1:(e&&e(t.tr.setSelection($.create(t.doc,o.pos)).scrollIntoView()),!0)};function Rg(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const lI=(t,e)=>{let n=t.selection,r=n instanceof $,i;if(r){if(n.node.isTextblock||!ii(t.doc,n.from))return!1;i=n.from}else if(i=vf(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection($.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},aI=(t,e)=>{let n=t.selection,r;if(n instanceof $){if(n.node.isTextblock||!ii(t.doc,n.to))return!1;r=n.to}else if(r=vf(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},cI=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&bs(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},uI=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function TE(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const fI=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=TE(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let l=n.after(),a=t.tr.replaceWith(l,l,s.createAndFill());a.setSelection(W.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},dI=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Yt||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=TE(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=t.tr.insert(s,o.createAndFill());l.setSelection(z.create(l.doc,s+1)),e(l.scrollIntoView())}return!0},hI=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if($o(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&bs(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},pI=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection($.create(t.doc,i))),!0)};function mI(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||ii(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function ME(t,e,n,r){let i=e.nodeBefore,o=e.nodeAfter,s,l,a=i.type.spec.isolating||o.type.spec.isolating;if(!a&&mI(t,e,n))return!0;let c=!a&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(s=(l=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&l.matchType(s[0]||o.type).validEnd){if(n){let p=e.pos+o.nodeSize,h=M.empty;for(let g=s.length-1;g>=0;g--)h=M.from(s[g].create(null,h));h=M.from(i.copy(h));let m=t.tr.step(new Ve(e.pos-1,p,e.pos,p,new P(h,1,0),s.length,!0)),y=m.doc.resolve(p+2*s.length);y.nodeAfter&&y.nodeAfter.type==i.type&&ii(m.doc,y.pos)&&m.join(y.pos),n(m.scrollIntoView())}return!0}let u=o.type.spec.isolating||r>0&&a?null:W.findFrom(e,1),f=u&&u.$from.blockRange(u.$to),d=f&&bs(f);if(d!=null&&d>=e.depth)return n&&n(t.tr.lift(f,d).scrollIntoView()),!0;if(c&&ns(o,"start",!0)&&ns(i,"end")){let p=i,h=[];for(;h.push(p),!p.isTextblock;)p=p.lastChild;let m=o,y=1;for(;!m.isTextblock;m=m.firstChild)y++;if(p.canReplace(p.childCount,p.childCount,m.content)){if(n){let g=M.empty;for(let w=h.length-1;w>=0;w--)g=M.from(h[w].copy(g));let v=t.tr.step(new Ve(e.pos-h.length,e.pos+o.nodeSize,e.pos+y,e.pos+o.nodeSize-y,new P(g,h.length,0),0,!0));n(v.scrollIntoView())}return!0}}return!1}function OE(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(z.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const gI=OE(-1),yI=OE(1);function vI(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),l=s&&Cg(s,t,e);return l?(r&&r(n.tr.wrap(s,l).scrollIntoView()),!0):!1}}function fw(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:l}}=n.selection.ranges[o];n.doc.nodesBetween(s,l,(a,c)=>{if(i)return!1;if(!(!a.isTextblock||a.hasMarkup(t,e)))if(a.type==t)i=!0;else{let u=n.doc.resolve(c),f=u.index();i=u.parent.canReplaceWith(f,f+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:l},$to:{pos:a}}=n.selection.ranges[s];o.setBlockType(l,a,t,e)}r(o.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function wI(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o);if(!s)return!1;let l=r?n.tr:null;return SI(l,s,t,e)?(r&&r(l.scrollIntoView()),!0):!1}}function SI(t,e,n,r=null){let i=!1,o=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let a=s.resolve(e.start-2);o=new Su(a,a,e.depth),e.endIndex<e.parent.childCount&&(e=new Su(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let l=Cg(o,n,r,e);return l?(t&&bI(t,e,l,i,n),!0):!1}function bI(t,e,n,r,i){let o=M.empty;for(let u=n.length-1;u>=0;u--)o=M.from(n[u].type.create(n[u].attrs,o));t.step(new Ve(e.start-(r?2:0),e.end,e.start,e.end,new P(o,0,0),n.length,!0));let s=0;for(let u=0;u<n.length;u++)n[u].type==i&&(s=u+1);let l=n.length-s,a=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,f=e.endIndex,d=!0;u<f;u++,d=!1)!d&&$o(t.doc,a,l)&&(t.split(a,l),a+=2*l),a+=c.child(u).nodeSize;return t}function kI(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?CI(e,n,t,o):EI(e,n,o):!0:!1}}function CI(t,e,n,r){let i=t.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new Ve(o-1,s,o,s,new P(M.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Su(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const l=bs(r);if(l==null)return!1;i.lift(r,l);let a=i.doc.resolve(i.mapping.map(o,-1)-1);return ii(i.doc,a.pos)&&a.nodeBefore.type==a.nodeAfter.type&&i.join(a.pos),e(i.scrollIntoView()),!0}function EI(t,e,n){let r=t.tr,i=n.parent;for(let p=n.end,h=n.endIndex-1,m=n.startIndex;h>m;h--)p-=i.child(h).nodeSize,r.delete(p-1,p+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,a=n.endIndex==i.childCount,c=o.node(-1),u=o.index(-1);if(!c.canReplace(u+(l?0:1),u+1,s.content.append(a?M.empty:M.from(i))))return!1;let f=o.pos,d=f+s.nodeSize;return r.step(new Ve(f-(l?1:0),d+(a?1:0),f+1,d-1,new P((l?M.empty:M.from(i.copy(M.empty))).append(a?M.empty:M.from(i.copy(M.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function xI(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let l=o.parent,a=l.child(s-1);if(a.type!=t)return!1;if(n){let c=a.lastChild&&a.lastChild.type==l.type,u=M.from(c?t.create():null),f=new P(M.from(t.create(null,M.from(l.type.create(null,u)))),c?3:1,0),d=o.start,p=o.end;n(e.tr.step(new Ve(d-(c?3:1),p,d,p,f,1,!0)).scrollIntoView())}return!0}}function Ef(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}class xf{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:o}=r,s=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...u)=>{const f=a(...u)(s);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(o),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,l=[],a=!!e,c=e||o.tr,u=()=>(!a&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),l.every(d=>d===!0)),f={...Object.fromEntries(Object.entries(r).map(([d,p])=>[d,(...m)=>{const y=this.buildProps(c,n),g=p(...m)(y);return l.push(g),f}])),run:u};return f}createCan(e){const{rawCommands:n,state:r}=this,i=!1,o=e||r.tr,s=this.buildProps(o,i);return{...Object.fromEntries(Object.entries(n).map(([a,c])=>[a,(...u)=>c(...u)({...s,dispatch:void 0})])),chain:()=>this.createChain(o,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,l={tr:e,editor:i,view:s,state:Ef({state:o,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([a,c])=>[a,(...u)=>c(...u)(l)]))}};return l}}let TI=class{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}once(e,n){const r=(...i)=>{this.off(e,r),n.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}};function L(t,e,n){return t.config[e]===void 0&&t.parent?L(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?L(t.parent,e,n):null}):t.config[e]}function Tf(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function AE(t){const e=[],{nodeExtensions:n,markExtensions:r}=Tf(t),i=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage,extensions:i},a=L(s,"addGlobalAttributes",l);if(!a)return;a().forEach(u=>{u.types.forEach(f=>{Object.entries(u.attributes).forEach(([d,p])=>{e.push({type:f,name:d,attribute:{...o,...p}})})})})}),i.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage},a=L(s,"addAttributes",l);if(!a)return;const c=a();Object.entries(c).forEach(([u,f])=>{const d={...o,...f};typeof(d==null?void 0:d.default)=="function"&&(d.default=d.default()),d!=null&&d.isRequired&&(d==null?void 0:d.default)===void 0&&delete d.default,e.push({type:s.name,name:u,attribute:d})})}),e}function He(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function ct(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const l=o?String(o).split(" "):[],a=r[i]?r[i].split(" "):[],c=l.filter(u=>!a.includes(u));r[i]=[...a,...c].join(" ")}else if(i==="style"){const l=o?o.split(";").map(u=>u.trim()).filter(Boolean):[],a=r[i]?r[i].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;a.forEach(u=>{const[f,d]=u.split(":").map(p=>p.trim());c.set(f,d)}),l.forEach(u=>{const[f,d]=u.split(":").map(p=>p.trim());c.set(f,d)}),r[i]=Array.from(c.entries()).map(([u,f])=>`${u}: ${f}`).join("; ")}else r[i]=o}),r},{})}function Ou(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>ct(n,r),{})}function DE(t){return typeof t=="function"}function G(t,e=void 0,...n){return DE(t)?e?t.bind(e)(...n):t(...n):t}function MI(t={}){return Object.keys(t).length===0&&t.constructor===Object}function OI(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function dw(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((o,s)=>{const l=s.attribute.parseHTML?s.attribute.parseHTML(n):OI(n.getAttribute(s.name));return l==null?o:{...o,[s.name]:l}},{});return{...r,...i}}}}function hw(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&MI(n)?!1:n!=null))}function AI(t,e){var n;const r=AE(t),{nodeExtensions:i,markExtensions:o}=Tf(t),s=(n=i.find(c=>L(c,"topNode")))===null||n===void 0?void 0:n.name,l=Object.fromEntries(i.map(c=>{const u=r.filter(g=>g.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:e},d=t.reduce((g,v)=>{const w=L(v,"extendNodeSchema",f);return{...g,...w?w(c):{}}},{}),p=hw({...d,content:G(L(c,"content",f)),marks:G(L(c,"marks",f)),group:G(L(c,"group",f)),inline:G(L(c,"inline",f)),atom:G(L(c,"atom",f)),selectable:G(L(c,"selectable",f)),draggable:G(L(c,"draggable",f)),code:G(L(c,"code",f)),whitespace:G(L(c,"whitespace",f)),linebreakReplacement:G(L(c,"linebreakReplacement",f)),defining:G(L(c,"defining",f)),isolating:G(L(c,"isolating",f)),attrs:Object.fromEntries(u.map(g=>{var v;return[g.name,{default:(v=g==null?void 0:g.attribute)===null||v===void 0?void 0:v.default}]}))}),h=G(L(c,"parseHTML",f));h&&(p.parseDOM=h.map(g=>dw(g,u)));const m=L(c,"renderHTML",f);m&&(p.toDOM=g=>m({node:g,HTMLAttributes:Ou(g,u)}));const y=L(c,"renderText",f);return y&&(p.toText=y),[c.name,p]})),a=Object.fromEntries(o.map(c=>{const u=r.filter(y=>y.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:e},d=t.reduce((y,g)=>{const v=L(g,"extendMarkSchema",f);return{...y,...v?v(c):{}}},{}),p=hw({...d,inclusive:G(L(c,"inclusive",f)),excludes:G(L(c,"excludes",f)),group:G(L(c,"group",f)),spanning:G(L(c,"spanning",f)),code:G(L(c,"code",f)),attrs:Object.fromEntries(u.map(y=>{var g;return[y.name,{default:(g=y==null?void 0:y.attribute)===null||g===void 0?void 0:g.default}]}))}),h=G(L(c,"parseHTML",f));h&&(p.parseDOM=h.map(y=>dw(y,u)));const m=L(c,"renderHTML",f);return m&&(p.toDOM=y=>m({mark:y,HTMLAttributes:Ou(y,u)})),[c.name,p]}));return new EC({topNode:s,nodes:l,marks:a})}function Gd(t,e){return e.nodes[t]||e.marks[t]||null}function pw(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function Lg(t,e){const n=no.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}const DI=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,o,s,l)=>{var a,c;const u=((c=(a=i.type.spec).toText)===null||c===void 0?void 0:c.call(a,{node:i,pos:o,parent:s,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?u:u.slice(0,Math.max(0,r-o))}),n};function $g(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class Mf{constructor(e){this.find=e.find,this.handler=e.handler}}const _I=(t,e)=>{if($g(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function ic(t){var e;const{editor:n,from:r,to:i,text:o,rules:s,plugin:l}=t,{view:a}=n;if(a.composing)return!1;const c=a.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(d=>d.type.spec.code))return!1;let u=!1;const f=DI(c)+o;return s.forEach(d=>{if(u)return;const p=_I(f,d.find);if(!p)return;const h=a.state.tr,m=Ef({state:a.state,transaction:h}),y={from:r-(p[0].length-o.length),to:i},{commands:g,chain:v,can:w}=new xf({editor:n,state:m});d.handler({state:m,range:y,match:p,commands:g,chain:v,can:w})===null||!h.steps.length||(h.setMeta(l,{transform:h,from:r,to:i,text:o}),a.dispatch(h),u=!0)}),u}function PI(t){const{editor:e,rules:n}=t,r=new At({state:{init(){return null},apply(i,o,s){const l=i.getMeta(r);if(l)return l;const a=i.getMeta("applyInputRules");return!!a&&setTimeout(()=>{let{text:u}=a;typeof u=="string"?u=u:u=Lg(M.from(u),s.schema);const{from:f}=a,d=f+u.length;ic({editor:e,from:f,to:d,text:u,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,s,l){return ic({editor:e,from:o,to:s,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&ic({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?ic({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function NI(t){return Object.prototype.toString.call(t).slice(8,-1)}function oc(t){return NI(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Of(t,e){const n={...t};return oc(t)&&oc(e)&&Object.keys(e).forEach(r=>{oc(e[r])&&oc(t[r])?n[r]=Of(t[r],e[r]):n[r]=e[r]}),n}class Jr{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=G(L(this,"addOptions",{name:this.name}))),this.storage=G(L(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Jr(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Of(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Jr(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=G(L(n,"addOptions",{name:n.name})),n.storage=G(L(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const a=s.find(c=>(c==null?void 0:c.type.name)===n.name);return a&&r.removeStoredMark(a),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function II(t){return typeof t=="number"}class RI{constructor(e){this.find=e.find,this.handler=e.handler}}const LI=(t,e,n)=>{if($g(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const o=[i.text];return o.index=i.index,o.input=t,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function $I(t){const{editor:e,state:n,from:r,to:i,rule:o,pasteEvent:s,dropEvent:l}=t,{commands:a,chain:c,can:u}=new xf({editor:e,state:n}),f=[];return n.doc.nodesBetween(r,i,(p,h)=>{if(!p.isTextblock||p.type.spec.code)return;const m=Math.max(r,h),y=Math.min(i,h+p.content.size),g=p.textBetween(m-h,y-h,void 0,"￼");LI(g,o.find,s).forEach(w=>{if(w.index===void 0)return;const S=m+w.index+1,k=S+w[0].length,b={from:n.tr.mapping.map(S),to:n.tr.mapping.map(k)},C=o.handler({state:n,range:b,match:w,commands:a,chain:c,can:u,pasteEvent:s,dropEvent:l});f.push(C)})}),f.every(p=>p!==null)}let sc=null;const BI=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function FI(t){const{editor:e,rules:n}=t;let r=null,i=!1,o=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const a=({state:u,from:f,to:d,rule:p,pasteEvt:h})=>{const m=u.tr,y=Ef({state:u,transaction:m});if(!(!$I({editor:e,state:y,from:Math.max(f-1,0),to:d.b-1,rule:p,pasteEvent:h,dropEvent:l})||!m.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,m}};return n.map(u=>new At({view(f){const d=h=>{var m;r=!((m=f.dom.parentElement)===null||m===void 0)&&m.contains(h.target)?f.dom.parentElement:null,r&&(sc=e)},p=()=>{sc&&(sc=null)};return window.addEventListener("dragstart",d),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",d),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(f,d)=>{if(o=r===f.dom.parentElement,l=d,!o){const p=sc;p!=null&&p.isEditable&&setTimeout(()=>{const h=p.state.selection;h&&p.commands.deleteRange({from:h.from,to:h.to})},10)}return!1},paste:(f,d)=>{var p;const h=(p=d.clipboardData)===null||p===void 0?void 0:p.getData("text/html");return s=d,i=!!(h!=null&&h.includes("data-pm-slice")),!1}}},appendTransaction:(f,d,p)=>{const h=f[0],m=h.getMeta("uiEvent")==="paste"&&!i,y=h.getMeta("uiEvent")==="drop"&&!o,g=h.getMeta("applyPasteRules"),v=!!g;if(!m&&!y&&!v)return;if(v){let{text:k}=g;typeof k=="string"?k=k:k=Lg(M.from(k),p.schema);const{from:b}=g,C=b+k.length,E=BI(k);return a({rule:u,state:p,from:b,to:{b:C},pasteEvt:E})}const w=d.doc.content.findDiffStart(p.doc.content),S=d.doc.content.findDiffEnd(p.doc.content);if(!(!II(w)||!S||w===S.b))return a({rule:u,state:p,from:w,to:S,pasteEvt:s})}}))}function jI(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class Do{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Do.resolve(e),this.schema=AI(this.extensions,n),this.setupExtensions()}static resolve(e){const n=Do.sort(Do.flatten(e)),r=jI(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=L(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const o=L(r,"priority")||100,s=L(i,"priority")||100;return o>s?-1:o<s?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Gd(n.name,this.schema)},i=L(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=Do.sort([...this.extensions].reverse()),r=[],i=[],o=n.map(s=>{const l={name:s.name,options:s.options,storage:s.storage,editor:e,type:Gd(s.name,this.schema)},a=[],c=L(s,"addKeyboardShortcuts",l);let u={};if(s.type==="mark"&&L(s,"exitable",l)&&(u.ArrowRight=()=>Jr.handleExit({editor:e,mark:s})),c){const m=Object.fromEntries(Object.entries(c()).map(([y,g])=>[y,()=>g({editor:e})]));u={...u,...m}}const f=ZN(u);a.push(f);const d=L(s,"addInputRules",l);pw(s,e.options.enableInputRules)&&d&&r.push(...d());const p=L(s,"addPasteRules",l);pw(s,e.options.enablePasteRules)&&p&&i.push(...p());const h=L(s,"addProseMirrorPlugins",l);if(h){const m=h();a.push(...m)}return a}).flat();return[PI({editor:e,rules:r}),...FI({editor:e,rules:i}),...o]}get attributes(){return AE(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=Tf(this.extensions);return Object.fromEntries(n.filter(r=>!!L(r,"addNodeView")).map(r=>{const i=this.attributes.filter(a=>a.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:He(r.name,this.schema)},s=L(r,"addNodeView",o);if(!s)return[];const l=(a,c,u,f,d)=>{const p=Ou(a,i);return s()({node:a,view:c,getPos:u,decorations:f,innerDecorations:d,editor:e,extension:r,HTMLAttributes:p})};return[r.name,l]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Gd(e.name,this.schema)};e.type==="mark"&&(!((n=G(L(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=L(e,"onBeforeCreate",r),o=L(e,"onCreate",r),s=L(e,"onUpdate",r),l=L(e,"onSelectionUpdate",r),a=L(e,"onTransaction",r),c=L(e,"onFocus",r),u=L(e,"onBlur",r),f=L(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),s&&this.editor.on("update",s),l&&this.editor.on("selectionUpdate",l),a&&this.editor.on("transaction",a),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),f&&this.editor.on("destroy",f)})}}class yt{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=G(L(this,"addOptions",{name:this.name}))),this.storage=G(L(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new yt(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Of(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new yt({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=G(L(n,"addOptions",{name:n.name})),n.storage=G(L(n,"addStorage",{name:n.name,options:n.options})),n}}function _E(t,e,n){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:s={}}=n||{};let l="";return t.nodesBetween(r,i,(a,c,u,f)=>{var d;a.isBlock&&c>r&&(l+=o);const p=s==null?void 0:s[a.type.name];if(p)return u&&(l+=p({node:a,pos:c,parent:u,index:f,range:e})),!1;a.isText&&(l+=(d=a==null?void 0:a.text)===null||d===void 0?void 0:d.slice(Math.max(r,c)-c,i-c))}),l}function PE(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const VI=yt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new At({key:new $n("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map(u=>u.$from.pos)),l=Math.max(...o.map(u=>u.$to.pos)),a=PE(n);return _E(r,{from:s,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:a})}}})]}}),zI=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),UI=(t=!1)=>({commands:e})=>e.setContent("",t),HI=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:s})=>{t.doc.nodesBetween(o.pos,s.pos,(l,a)=>{if(l.type.isText)return;const{doc:c,mapping:u}=e,f=c.resolve(u.map(a)),d=c.resolve(u.map(a+l.nodeSize)),p=f.blockRange(d);if(!p)return;const h=bs(p);if(l.type.isTextblock){const{defaultType:m}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(p.start,m)}(h||h===0)&&e.lift(p,h)})}),!0},WI=t=>e=>t(e),GI=()=>({state:t,dispatch:e})=>dI(t,e),KI=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,o.content),r.setSelection(new z(r.doc.resolve(Math.max(s-1,0)))),!0},qI=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const l=i.before(o),a=i.after(o);t.delete(l,a).scrollIntoView()}return!0}return!1},JI=t=>({tr:e,state:n,dispatch:r})=>{const i=He(t,n.schema),o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i){if(r){const a=o.before(s),c=o.after(s);e.delete(a,c).scrollIntoView()}return!0}return!1},YI=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},QI=()=>({state:t,dispatch:e})=>eI(t,e),XI=()=>({commands:t})=>t.keyboardShortcut("Enter"),ZI=()=>({state:t,dispatch:e})=>fI(t,e);function Au(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:$g(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function NE(t,e,n={}){return t.find(r=>r.type===e&&Au(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function mw(t,e,n={}){return!!NE(t,e,n)}function Bg(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(u=>u.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(u=>u.type===e)||(n=n||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!NE([...i.node.marks],e,n)))return;let s=i.index,l=t.start()+i.offset,a=s+1,c=l+i.node.nodeSize;for(;s>0&&mw([...t.parent.child(s-1).marks],e,n);)s-=1,l-=t.parent.child(s).nodeSize;for(;a<t.parent.childCount&&mw([...t.parent.child(a).marks],e,n);)c+=t.parent.child(a).nodeSize,a+=1;return{from:l,to:c}}function si(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const eR=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const o=si(t,r.schema),{doc:s,selection:l}=n,{$from:a,from:c,to:u}=l;if(i){const f=Bg(a,o,e);if(f&&f.from<=c&&f.to>=u){const d=z.create(s,f.from,f.to);n.setSelection(d)}}return!0},tR=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function IE(t){return t instanceof z}function Mi(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function RE(t,e=null){if(!e)return null;const n=W.atStart(t),r=W.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,o=r.to;return e==="all"?z.create(t,Mi(0,i,o),Mi(t.content.size,i,o)):z.create(t,Mi(e,i,o),Mi(e,i,o))}function LE(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Af(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const nR=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const s=()=>{(Af()||LE())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!IE(n.state.selection))return s(),!0;const l=RE(i.doc,t)||n.state.selection,a=n.state.selection.eq(l);return o&&(a||i.setSelection(l),a&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},rR=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),iR=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),$E=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&$E(r)}return t};function lc(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return $E(n)}function Yl(t,e,n){if(t instanceof jr||t instanceof M)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return M.fromArray(t.map(l=>e.nodeFromJSON(l)));const s=e.nodeFromJSON(t);return n.errorOnInvalidContent&&s.check(),s}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),Yl("",e,n)}if(i){if(n.errorOnInvalidContent){let s=!1,l="";const a=new EC({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,l=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?hl.fromSchema(a).parseSlice(lc(t),n.parseOptions):hl.fromSchema(a).parse(lc(t),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const o=hl.fromSchema(e);return n.slice?o.parseSlice(lc(t),n.parseOptions).content:o.parse(lc(t),n.parseOptions)}return Yl("",e,n)}function oR(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Be||i instanceof Ve))return;const o=t.mapping.maps[r];let s=0;o.forEach((l,a,c,u)=>{s===0&&(s=u)}),t.setSelection(W.near(t.doc.resolve(s),n))}const sR=t=>!("type"in t),lR=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{var s;if(i){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;const a=y=>{o.emit("contentError",{editor:o,error:y,disableCollaboration:()=>{o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Yl(e,o.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(y){a(y)}try{l=Yl(e,o.schema,{parseOptions:c,errorOnInvalidContent:(s=n.errorOnInvalidContent)!==null&&s!==void 0?s:o.options.enableContentCheck})}catch(y){return a(y),!1}let{from:u,to:f}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},d=!0,p=!0;if((sR(l)?l:[l]).forEach(y=>{y.check(),d=d?y.isText&&y.marks.length===0:!1,p=p?y.isBlock:!1}),u===f&&p){const{parent:y}=r.doc.resolve(u);y.isTextblock&&!y.type.spec.code&&!y.childCount&&(u-=1,f+=1)}let m;if(d){if(Array.isArray(e))m=e.map(y=>y.text||"").join("");else if(e instanceof M){let y="";e.forEach(g=>{g.text&&(y+=g.text)}),m=y}else typeof e=="object"&&e&&e.text?m=e.text:m=e;r.insertText(m,u,f)}else m=l,r.replaceWith(u,f,m);n.updateSelection&&oR(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:u,text:m}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:u,text:m})}return!0},aR=()=>({state:t,dispatch:e})=>lI(t,e),cR=()=>({state:t,dispatch:e})=>aI(t,e),uR=()=>({state:t,dispatch:e})=>tI(t,e),fR=()=>({state:t,dispatch:e})=>oI(t,e),dR=()=>({state:t,dispatch:e,tr:n})=>{try{const r=vf(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},hR=()=>({state:t,dispatch:e,tr:n})=>{try{const r=vf(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},pR=()=>({state:t,dispatch:e})=>nI(t,e),mR=()=>({state:t,dispatch:e})=>rI(t,e);function BE(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function gR(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,s;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))Af()||BE()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}const yR=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=gR(t).split(/-(?!$)/),s=o.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),l=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,l))});return a==null||a.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function Ql(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,s=e?He(e,t.schema):null,l=[];t.doc.nodesBetween(r,i,(f,d)=>{if(f.isText)return;const p=Math.max(r,d),h=Math.min(i,d+f.nodeSize);l.push({node:f,from:p,to:h})});const a=i-r,c=l.filter(f=>s?s.name===f.node.type.name:!0).filter(f=>Au(f.node.attrs,n,{strict:!1}));return o?!!c.length:c.reduce((f,d)=>f+d.to-d.from,0)>=a}const vR=(t,e={})=>({state:n,dispatch:r})=>{const i=He(t,n.schema);return Ql(n,i,e)?cI(n,r):!1},wR=()=>({state:t,dispatch:e})=>hI(t,e),SR=t=>({state:e,dispatch:n})=>{const r=He(t,e.schema);return kI(r)(e,n)},bR=()=>({state:t,dispatch:e})=>uI(t,e);function Df(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function gw(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const kR=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const l=Df(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(o=He(t,r.schema)),l==="mark"&&(s=si(t,r.schema)),i&&n.selection.ranges.forEach(a=>{r.doc.nodesBetween(a.$from.pos,a.$to.pos,(c,u)=>{o&&o===c.type&&n.setNodeMarkup(u,void 0,gw(c.attrs,e)),s&&c.marks.length&&c.marks.forEach(f=>{s===f.type&&n.addMark(u,u+c.nodeSize,s.create(gw(f.attrs,e)))})})}),!0):!1},CR=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),ER=()=>({tr:t,dispatch:e})=>{if(e){const n=new Yt(t.doc);t.setSelection(n)}return!0},xR=()=>({state:t,dispatch:e})=>iI(t,e),TR=()=>({state:t,dispatch:e})=>sI(t,e),MR=()=>({state:t,dispatch:e})=>pI(t,e),OR=()=>({state:t,dispatch:e})=>yI(t,e),AR=()=>({state:t,dispatch:e})=>gI(t,e);function Rp(t,e,n={},r={}){return Yl(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const DR=(t,e=!1,n={},r={})=>({editor:i,tr:o,dispatch:s,commands:l})=>{var a,c;const{doc:u}=o;if(n.preserveWhitespace!=="full"){const f=Rp(t,i.schema,n,{errorOnInvalidContent:(a=r.errorOnInvalidContent)!==null&&a!==void 0?a:i.options.enableContentCheck});return s&&o.replaceWith(0,u.content.size,f).setMeta("preventUpdate",!e),!0}return s&&o.setMeta("preventUpdate",!e),l.insertContentAt({from:0,to:u.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:i.options.enableContentCheck})};function FE(t,e){const n=si(e,t.schema),{from:r,to:i,empty:o}=t.selection,s=[];o?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,a=>{s.push(...a.marks)});const l=s.find(a=>a.type.name===n.name);return l?{...l.attrs}:{}}function _R(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function PR(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Fg(t){return e=>PR(e.$from,t)}function NR(t,e){const n={from:0,to:t.content.size};return _E(t,n,e)}function IR(t,e){const n=He(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,l=>{o.push(l)});const s=o.reverse().find(l=>l.type.name===n.name);return s?{...s.attrs}:{}}function RR(t,e){const n=Df(typeof e=="string"?e:e.name,t.schema);return n==="node"?IR(t,e):n==="mark"?FE(t,e):{}}function jE(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const o=n.resolve(t),s=Bg(o,i.type);s&&r.push({mark:i,...s})}):n.nodesBetween(t,e,(i,o)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(s=>({from:o,to:o+i.nodeSize,mark:s})))}),r}function Nc(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function Lp(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?si(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(f=>o?o.name===f.type.name:!0).find(f=>Au(f.attrs,n,{strict:!1}));let s=0;const l=[];if(i.forEach(({$from:f,$to:d})=>{const p=f.pos,h=d.pos;t.doc.nodesBetween(p,h,(m,y)=>{if(!m.isText&&!m.marks.length)return;const g=Math.max(p,y),v=Math.min(h,y+m.nodeSize),w=v-g;s+=w,l.push(...m.marks.map(S=>({mark:S,from:g,to:v})))})}),s===0)return!1;const a=l.filter(f=>o?o.name===f.mark.type.name:!0).filter(f=>Au(f.mark.attrs,n,{strict:!1})).reduce((f,d)=>f+d.to-d.from,0),c=l.filter(f=>o?f.mark.type!==o&&f.mark.type.excludes(o):!0).reduce((f,d)=>f+d.to-d.from,0);return(a>0?a+c:a)>=s}function LR(t,e,n={}){if(!e)return Ql(t,null,n)||Lp(t,null,n);const r=Df(e,t.schema);return r==="node"?Ql(t,e,n):r==="mark"?Lp(t,e,n):!1}function yw(t,e){const{nodeExtensions:n}=Tf(e),r=n.find(s=>s.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=G(L(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function jg(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(o=>{i!==!1&&(jg(o,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function $R(t){return t instanceof $}function BR(t,e,n){var r;const{selection:i}=e;let o=null;if(IE(i)&&(o=i.$cursor),o){const l=(r=t.storedMarks)!==null&&r!==void 0?r:o.marks();return!!n.isInSet(l)||!l.some(a=>a.type.excludes(n))}const{ranges:s}=i;return s.some(({$from:l,$to:a})=>{let c=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,a.pos,(u,f,d)=>{if(c)return!1;if(u.isInline){const p=!d||d.type.allowsMarkType(n),h=!!n.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(n));c=p&&h}return!c}),c})}const FR=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:s,ranges:l}=o,a=si(t,r.schema);if(i)if(s){const c=FE(r,a);n.addStoredMark(a.create({...c,...e}))}else l.forEach(c=>{const u=c.$from.pos,f=c.$to.pos;r.doc.nodesBetween(u,f,(d,p)=>{const h=Math.max(p,u),m=Math.min(p+d.nodeSize,f);d.marks.find(g=>g.type===a)?d.marks.forEach(g=>{a===g.type&&n.addMark(h,m,a.create({...g.attrs,...e}))}):n.addMark(h,m,a.create(e))})});return BR(r,n,a)},jR=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),VR=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=He(t,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:l})=>fw(o,{...s,...e})(n)?!0:l.clearNodes()).command(({state:l})=>fw(o,{...s,...e})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},zR=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Mi(t,0,r.content.size),o=$.create(r,i);e.setSelection(o)}return!0},UR=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,s=z.atStart(r).from,l=z.atEnd(r).to,a=Mi(i,s,l),c=Mi(o,s,l),u=z.create(r,a,c);e.setSelection(u)}return!0},HR=t=>({state:e,dispatch:n})=>{const r=He(t,e.schema);return xI(r)(e,n)};function vw(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const WR=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:s}=e,{$from:l,$to:a}=o,c=i.extensionManager.attributes,u=Nc(c,l.node().type.name,l.node().attrs);if(o instanceof $&&o.node.isBlock)return!l.parentOffset||!$o(s,l.pos)?!1:(r&&(t&&vw(n,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const f=a.parentOffset===a.parent.content.size,d=l.depth===0?void 0:_R(l.node(-1).contentMatchAt(l.indexAfter(-1)));let p=f&&d?[{type:d,attrs:u}]:void 0,h=$o(e.doc,e.mapping.map(l.pos),1,p);if(!p&&!h&&$o(e.doc,e.mapping.map(l.pos),1,d?[{type:d}]:void 0)&&(h=!0,p=d?[{type:d,attrs:u}]:void 0),r){if(h&&(o instanceof z&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,p),d&&!f&&!l.parentOffset&&l.parent.type!==d)){const m=e.mapping.map(l.before()),y=e.doc.resolve(m);l.node(-1).canReplaceWith(y.index(),y.index()+1,d)&&e.setNodeMarkup(e.mapping.map(l.before()),d)}t&&vw(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return h},GR=(t,e={})=>({tr:n,state:r,dispatch:i,editor:o})=>{var s;const l=He(t,r.schema),{$from:a,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||a.depth<2||!a.sameParent(c))return!1;const f=a.node(-1);if(f.type!==l)return!1;const d=o.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==l||a.index(-2)!==a.node(-2).childCount-1)return!1;if(i){let g=M.empty;const v=a.index(-1)?1:a.index(-2)?2:3;for(let E=a.depth-v;E>=a.depth-3;E-=1)g=M.from(a.node(E).copy(g));const w=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,S={...Nc(d,a.node().type.name,a.node().attrs),...e},k=((s=l.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(S))||void 0;g=g.append(M.from(l.createAndFill(null,k)||void 0));const b=a.before(a.depth-(v-1));n.replace(b,a.after(-w),new P(g,4-v,0));let C=-1;n.doc.nodesBetween(b,n.doc.content.size,(E,x)=>{if(C>-1)return!1;E.isTextblock&&E.content.size===0&&(C=x+1)}),C>-1&&n.setSelection(z.near(n.doc.resolve(C))),n.scrollIntoView()}return!0}const p=c.pos===a.end()?f.contentMatchAt(0).defaultType:null,h={...Nc(d,f.type.name,f.attrs),...e},m={...Nc(d,a.node().type.name,a.node().attrs),...e};n.delete(a.pos,c.pos);const y=p?[{type:l,attrs:h},{type:p,attrs:m}]:[{type:l,attrs:h}];if(!$o(n.doc,a.pos,2))return!1;if(i){const{selection:g,storedMarks:v}=r,{splittableMarks:w}=o.extensionManager,S=v||g.$to.parentOffset&&g.$from.marks();if(n.split(a.pos,2,y).scrollIntoView(),!S||!i)return!0;const k=S.filter(b=>w.includes(b.type.name));n.ensureMarks(k)}return!0},Kd=(t,e)=>{const n=Fg(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&ii(t.doc,n.pos)&&t.join(n.pos),!0},qd=(t,e)=>{const n=Fg(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&ii(t.doc,r)&&t.join(r),!0},KR=(t,e,n,r={})=>({editor:i,tr:o,state:s,dispatch:l,chain:a,commands:c,can:u})=>{const{extensions:f,splittableMarks:d}=i.extensionManager,p=He(t,s.schema),h=He(e,s.schema),{selection:m,storedMarks:y}=s,{$from:g,$to:v}=m,w=g.blockRange(v),S=y||m.$to.parentOffset&&m.$from.marks();if(!w)return!1;const k=Fg(b=>yw(b.type.name,f))(m);if(w.depth>=1&&k&&w.depth-k.depth<=1){if(k.node.type===p)return c.liftListItem(h);if(yw(k.node.type.name,f)&&p.validContent(k.node.content)&&l)return a().command(()=>(o.setNodeMarkup(k.pos,p),!0)).command(()=>Kd(o,p)).command(()=>qd(o,p)).run()}return!n||!S||!l?a().command(()=>u().wrapInList(p,r)?!0:c.clearNodes()).wrapInList(p,r).command(()=>Kd(o,p)).command(()=>qd(o,p)).run():a().command(()=>{const b=u().wrapInList(p,r),C=S.filter(E=>d.includes(E.type.name));return o.ensureMarks(C),b?!0:c.clearNodes()}).wrapInList(p,r).command(()=>Kd(o,p)).command(()=>qd(o,p)).run()},qR=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,s=si(t,r.schema);return Lp(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)},JR=(t,e,n={})=>({state:r,commands:i})=>{const o=He(t,r.schema),s=He(e,r.schema),l=Ql(r,o,n);let a;return r.selection.$anchor.sameParent(r.selection.$head)&&(a=r.selection.$anchor.parent.attrs),l?i.setNode(s,a):i.setNode(o,{...a,...n})},YR=(t,e={})=>({state:n,commands:r})=>{const i=He(t,n.schema);return Ql(n,i,e)?r.lift(i):r.wrapIn(i,e)},QR=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const s=t.tr,l=o.transform;for(let a=l.steps.length-1;a>=0;a-=1)s.step(l.steps[a].invert(l.docs[a]));if(o.text){const a=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,t.schema.text(o.text,a))}else s.delete(o.from,o.to)}return!0}}return!1},XR=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},ZR=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:s=!1}=e,{selection:l}=n,a=si(t,r.schema),{$from:c,empty:u,ranges:f}=l;if(!i)return!0;if(u&&s){let{from:d,to:p}=l;const h=(o=c.marks().find(y=>y.type===a))===null||o===void 0?void 0:o.attrs,m=Bg(c,a,h);m&&(d=m.from,p=m.to),n.removeMark(d,p,a)}else f.forEach(d=>{n.removeMark(d.$from.pos,d.$to.pos,a)});return n.removeStoredMark(a),!0},eL=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const l=Df(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(o=He(t,r.schema)),l==="mark"&&(s=si(t,r.schema)),i&&n.selection.ranges.forEach(a=>{const c=a.$from.pos,u=a.$to.pos;let f,d,p,h;n.selection.empty?r.doc.nodesBetween(c,u,(m,y)=>{o&&o===m.type&&(p=Math.max(y,c),h=Math.min(y+m.nodeSize,u),f=y,d=m)}):r.doc.nodesBetween(c,u,(m,y)=>{y<c&&o&&o===m.type&&(p=Math.max(y,c),h=Math.min(y+m.nodeSize,u),f=y,d=m),y>=c&&y<=u&&(o&&o===m.type&&n.setNodeMarkup(y,void 0,{...m.attrs,...e}),s&&m.marks.length&&m.marks.forEach(g=>{if(s===g.type){const v=Math.max(y,c),w=Math.min(y+m.nodeSize,u);n.addMark(v,w,s.create({...g.attrs,...e}))}}))}),d&&(f!==void 0&&n.setNodeMarkup(f,void 0,{...d.attrs,...e}),s&&d.marks.length&&d.marks.forEach(m=>{s===m.type&&n.addMark(p,h,s.create({...m.attrs,...e}))}))}),!0):!1},tL=(t,e={})=>({state:n,dispatch:r})=>{const i=He(t,n.schema);return vI(i,e)(n,r)},nL=(t,e={})=>({state:n,dispatch:r})=>{const i=He(t,n.schema);return wI(i,e)(n,r)};var rL=Object.freeze({__proto__:null,blur:zI,clearContent:UI,clearNodes:HI,command:WI,createParagraphNear:GI,cut:KI,deleteCurrentNode:qI,deleteNode:JI,deleteRange:YI,deleteSelection:QI,enter:XI,exitCode:ZI,extendMarkRange:eR,first:tR,focus:nR,forEach:rR,insertContent:iR,insertContentAt:lR,joinBackward:uR,joinDown:cR,joinForward:fR,joinItemBackward:dR,joinItemForward:hR,joinTextblockBackward:pR,joinTextblockForward:mR,joinUp:aR,keyboardShortcut:yR,lift:vR,liftEmptyBlock:wR,liftListItem:SR,newlineInCode:bR,resetAttributes:kR,scrollIntoView:CR,selectAll:ER,selectNodeBackward:xR,selectNodeForward:TR,selectParentNode:MR,selectTextblockEnd:OR,selectTextblockStart:AR,setContent:DR,setMark:FR,setMeta:jR,setNode:VR,setNodeSelection:zR,setTextSelection:UR,sinkListItem:HR,splitBlock:WR,splitListItem:GR,toggleList:KR,toggleMark:qR,toggleNode:JR,toggleWrap:YR,undoInputRule:QR,unsetAllMarks:XR,unsetMark:ZR,updateAttributes:eL,wrapIn:tL,wrapInList:nL});const iL=yt.create({name:"commands",addCommands(){return{...rL}}}),oL=yt.create({name:"drop",addProseMirrorPlugins(){return[new At({key:new $n("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),sL=yt.create({name:"editable",addProseMirrorPlugins(){return[new At({key:new $n("editable"),props:{editable:()=>this.editor.options.editable}})]}}),lL=new $n("focusEvents"),aL=yt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new At({key:lL,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),cL=yt.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:l})=>{const{selection:a,doc:c}=l,{empty:u,$anchor:f}=a,{pos:d,parent:p}=f,h=f.parent.isTextblock&&d>0?l.doc.resolve(d-1):f,m=h.parent.type.spec.isolating,y=f.pos-f.parentOffset,g=m&&h.parent.childCount===1?y===f.pos:W.atStart(c).from===d;return!u||!p.type.isTextblock||p.textContent.length||!g||g&&f.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Af()||BE()?o:i},addProseMirrorPlugins(){return[new At({key:new $n("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(m=>m.getMeta("composition")))return;const r=t.some(m=>m.docChanged)&&!e.doc.eq(n.doc),i=t.some(m=>m.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:s,to:l}=e.selection,a=W.atStart(e.doc).from,c=W.atEnd(e.doc).to;if(o||!(s===a&&l===c)||!jg(n.doc))return;const d=n.tr,p=Ef({state:n,transaction:d}),{commands:h}=new xf({editor:this.editor,state:p});if(h.clearNodes(),!!d.steps.length)return d}})]}}),uL=yt.create({name:"paste",addProseMirrorPlugins(){return[new At({key:new $n("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),fL=yt.create({name:"tabindex",addProseMirrorPlugins(){return[new At({key:new $n("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class wi{get name(){return this.node.type.name}constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new wi(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new wi(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new wi(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,s=this.pos+r+(o?0:1);if(s<0||s>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(s);if(!i&&l.depth<=this.depth)return;const a=new wi(l,this.editor,i,i?n:null);i&&(a.actualDepth=this.depth+1),e.push(new wi(l,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const o=i.node.attrs,s=Object.keys(n);for(let l=0;l<s.length;l+=1){const a=s[l];if(o[a]!==n[a])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(n);return this.children.forEach(s=>{r&&i.length>0||(s.node.type.name===e&&o.every(a=>n[a]===s.node.attrs[a])&&i.push(s),!(r&&i.length>0)&&(i=i.concat(s.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const dL=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function hL(t,e,n){const r=document.querySelector(`style[data-tiptap-style${n?`-${n}`:""}]`);if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute(`data-tiptap-style${n?`-${n}`:""}`,""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}let pL=class extends TI{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:i})=>this.options.onDrop(n,r,i)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=hL(dL,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=DE(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(o=>{const s=typeof o=="string"?`${o}$`:o.key;r=r.filter(l=>!l.key.startsWith(s))}),n.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[sL,VI.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),iL,aL,cL,fL,oL,uL].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o==null?void 0:o.type));this.extensionManager=new Do(i,this)}createCommandManager(){this.commandManager=new xf({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=Rp(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(l=>l.name!=="collaboration"),this.createExtensionManager()}}),n=Rp(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=RE(n,this.options.autofocus);this.view=new bE(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Ao.create({doc:n,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(s)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),o=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return RR(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return LR(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Lg(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return NR(this.state.doc,{blockSeparator:n,textSerializers:{...PE(this.schema),...r}})}get isEmpty(){return jg(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new wi(n,this)}get $doc(){return this.$pos(0)}};function rs(t){return new Mf({find:t.find,handler:({state:e,range:n,match:r})=>{const i=G(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,s=r[r.length-1],l=r[0];if(s){const a=l.search(/\S/),c=n.from+l.indexOf(s),u=c+s.length;if(jE(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(m=>m===t.type&&m!==p.mark.type)).filter(p=>p.to>c).length)return null;u<n.to&&o.delete(u,n.to),c>n.from&&o.delete(n.from+a,c);const d=n.from+a+s.length;o.addMark(n.from+a,d,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}function mL(t){return new Mf({find:t.find,handler:({state:e,range:n,match:r})=>{const i=G(t.getAttributes,void 0,r)||{},{tr:o}=e,s=n.from;let l=n.to;const a=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=s+c;u>l?u=l:l=u+r[1].length;const f=r[0][r[0].length-1];o.insertText(f,s+r[0].length-1),o.replaceWith(u,l,a)}else if(r[0]){const c=t.type.isInline?s:s-1;o.insert(c,t.type.create(i)).delete(o.mapping.map(s),o.mapping.map(l))}o.scrollIntoView()}})}function $p(t){return new Mf({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),o=G(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)}})}function Xl(t){return new Mf({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const o=G(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),a=s.doc.resolve(n.from).blockRange(),c=a&&Cg(a,t.type,o);if(!c)return null;if(s.wrap(a,c),t.keepMarks&&t.editor){const{selection:f,storedMarks:d}=e,{splittableMarks:p}=t.editor.extensionManager,h=d||f.$to.parentOffset&&f.$from.marks();if(h){const m=h.filter(y=>p.includes(y.type.name));s.ensureMarks(m)}}if(t.keepAttributes){const f=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(f,o).run()}const u=s.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&ii(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&s.join(n.from-1)}})}let tn=class Bp{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=G(L(this,"addOptions",{name:this.name}))),this.storage=G(L(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Bp(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Of(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Bp(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=G(L(n,"addOptions",{name:n.name})),n.storage=G(L(n,"addStorage",{name:n.name,options:n.options})),n}};class gL{constructor(e,n,r){this.isDragging=!1,this.component=e,this.editor=n.editor,this.options={stopEvent:null,ignoreMutation:null,...r},this.extension=n.extension,this.node=n.node,this.decorations=n.decorations,this.innerDecorations=n.innerDecorations,this.view=n.view,this.HTMLAttributes=n.HTMLAttributes,this.getPos=n.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var n,r,i,o,s,l,a;const{view:c}=this.editor,u=e.target,f=u.nodeType===3?(n=u.parentElement)===null||n===void 0?void 0:n.closest("[data-drag-handle]"):u.closest("[data-drag-handle]");if(!this.dom||!((r=this.contentDOM)===null||r===void 0)&&r.contains(u)||!f)return;let d=0,p=0;if(this.dom!==f){const v=this.dom.getBoundingClientRect(),w=f.getBoundingClientRect(),S=(i=e.offsetX)!==null&&i!==void 0?i:(o=e.nativeEvent)===null||o===void 0?void 0:o.offsetX,k=(s=e.offsetY)!==null&&s!==void 0?s:(l=e.nativeEvent)===null||l===void 0?void 0:l.offsetY;d=w.x-v.x+S,p=w.y-v.y+k}const h=this.dom.cloneNode(!0);(a=e.dataTransfer)===null||a===void 0||a.setDragImage(h,d,p);const m=this.getPos();if(typeof m!="number")return;const y=$.create(c.state.doc,m),g=c.state.tr.setSelection(y);c.dispatch(g)}stopEvent(e){var n;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const r=e.target;if(!(this.dom.contains(r)&&!(!((n=this.contentDOM)===null||n===void 0)&&n.contains(r))))return!1;const o=e.type.startsWith("drag"),s=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!s&&!o)return!0;const{isEditable:a}=this.editor,{isDragging:c}=this,u=!!this.node.type.spec.draggable,f=$.isSelectable(this.node),d=e.type==="copy",p=e.type==="paste",h=e.type==="cut",m=e.type==="mousedown";if(!u&&f&&o&&e.target===this.dom&&e.preventDefault(),u&&o&&!c&&e.target===this.dom)return e.preventDefault(),!1;if(u&&a&&!c&&m){const y=r.closest("[data-drag-handle]");y&&(this.dom===y||this.dom.contains(y))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(c||s||d||p||h||m&&f)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&(Af()||LE())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(r=>r.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:n})=>{const r=this.getPos();return typeof r!="number"?!1:(n.setNodeMarkup(r,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){const e=this.getPos();if(typeof e!="number")return;const n=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:n})}}function is(t){return new RI({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const o=G(t.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:s}=e,l=r[r.length-1],a=r[0];let c=n.to;if(l){const u=a.search(/\S/),f=n.from+a.indexOf(l),d=f+l.length;if(jE(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(y=>y===t.type&&y!==h.mark.type)).filter(h=>h.to>f).length)return null;d<n.to&&s.delete(d,n.to),f>n.from&&s.delete(n.from+u,f),c=n.from+u+l.length,s.addMark(n.from+u,c,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}function yL(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof $){const o=r.index();return r.parent.canReplaceWith(o,o+1,e)}let i=r.depth;for(;i>=0;){const o=r.index(i);if(r.node(i).contentMatchAt(o).matchType(e))return!0;i-=1}return!1}function vL(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var VE={exports:{}},Jd={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ww;function wL(){if(ww)return Jd;ww=1;var t=$e;function e(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,s=t.useDebugValue;function l(f,d){var p=d(),h=r({inst:{value:p,getSnapshot:d}}),m=h[0].inst,y=h[1];return o(function(){m.value=p,m.getSnapshot=d,a(m)&&y({inst:m})},[f,p,d]),i(function(){return a(m)&&y({inst:m}),f(function(){a(m)&&y({inst:m})})},[f]),s(p),p}function a(f){var d=f.getSnapshot;f=f.value;try{var p=d();return!n(f,p)}catch{return!0}}function c(f,d){return d()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:l;return Jd.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,Jd}VE.exports=wL();var Vg=VE.exports;const SL=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},bL=({contentComponent:t})=>{const e=Vg.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return $e.createElement($e.Fragment,null,Object.values(e))};function kL(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:m_.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}class CL extends $e.Component{constructor(e){var n;super(e),this.editorContentRef=$e.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=kL(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return $e.createElement($e.Fragment,null,$e.createElement("div",{ref:SL(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&$e.createElement(bL,{contentComponent:e.contentComponent}))}}const EL=F.forwardRef((t,e)=>{const n=$e.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return $e.createElement(CL,{key:n,innerRef:e,...t})}),xL=$e.memo(EL);var TL=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var s=o[i];if(!(s==="_owner"&&e.$$typeof)&&!t(e[s],n[s]))return!1}return!0}return e!==e&&n!==n},ML=vL(TL),zE={exports:{}},Yd={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sw;function OL(){if(Sw)return Yd;Sw=1;var t=$e,e=Vg;function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,o=t.useRef,s=t.useEffect,l=t.useMemo,a=t.useDebugValue;return Yd.useSyncExternalStoreWithSelector=function(c,u,f,d,p){var h=o(null);if(h.current===null){var m={hasValue:!1,value:null};h.current=m}else m=h.current;h=l(function(){function g(b){if(!v){if(v=!0,w=b,b=d(b),p!==void 0&&m.hasValue){var C=m.value;if(p(C,b))return S=C}return S=b}if(C=S,r(w,b))return C;var E=d(b);return p!==void 0&&p(C,E)?C:(w=b,S=E)}var v=!1,w,S,k=f===void 0?null:f;return[function(){return g(u())},k===null?void 0:function(){return g(k())}]},[u,f,d,p]);var y=i(c,h[0],h[1]);return s(function(){m.hasValue=!0,m.value=y},[y]),a(y),y},Yd}zE.exports=OL();var AL=zE.exports;const DL=typeof window<"u"?F.useLayoutEffect:F.useEffect;class _L{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",n),()=>{r.off("transaction",n)}}}}function PL(t){var e;const[n]=F.useState(()=>new _L(t.editor)),r=AL.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!==null&&e!==void 0?e:ML);return DL(()=>n.watch(t.editor),[t.editor,n]),F.useDebugValue(r),r}const NL=!1,Fp=typeof window>"u",IL=Fp||!!(typeof window<"u"&&window.next);class zg{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return Fp||IL?null:this.createEditor();if(this.options.current.immediatelyRender&&Fp&&NL)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onBeforeCreate)===null||o===void 0?void 0:o.call(i,...r)},onBlur:(...r)=>{var i,o;return(o=(i=this.options.current).onBlur)===null||o===void 0?void 0:o.call(i,...r)},onCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onCreate)===null||o===void 0?void 0:o.call(i,...r)},onDestroy:(...r)=>{var i,o;return(o=(i=this.options.current).onDestroy)===null||o===void 0?void 0:o.call(i,...r)},onFocus:(...r)=>{var i,o;return(o=(i=this.options.current).onFocus)===null||o===void 0?void 0:o.call(i,...r)},onSelectionUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onSelectionUpdate)===null||o===void 0?void 0:o.call(i,...r)},onTransaction:(...r)=>{var i,o;return(o=(i=this.options.current).onTransaction)===null||o===void 0?void 0:o.call(i,...r)},onUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onUpdate)===null||o===void 0?void 0:o.call(i,...r)},onContentError:(...r)=>{var i,o;return(o=(i=this.options.current).onContentError)===null||o===void 0?void 0:o.call(i,...r)},onDrop:(...r)=>{var i,o;return(o=(i=this.options.current).onDrop)===null||o===void 0?void 0:o.call(i,...r)},onPaste:(...r)=>{var i,o;return(o=(i=this.options.current).onPaste)===null||o===void 0?void 0:o.call(i,...r)}};return new pL(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,o)=>{var s;return i===((s=n.extensions)===null||s===void 0?void 0:s[o])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?zg.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function RL(t={},e=[]){const n=F.useRef(t);n.current=t;const[r]=F.useState(()=>new zg(n)),i=Vg.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return F.useDebugValue(i),F.useEffect(r.onRender(e)),PL({editor:i,selector:({transactionNumber:o})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&o===0?0:o+1}),i}const LL=F.createContext({editor:null});LL.Consumer;const UE=F.createContext({onDragStart:void 0}),$L=()=>F.useContext(UE),BL=$e.forwardRef((t,e)=>{const{onDragStart:n}=$L(),r=t.as||"div";return $e.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});function bw(t){return!!(typeof t=="function"&&t.prototype&&t.prototype.isReactComponent)}function kw(t){return!!(typeof t=="object"&&t.$$typeof&&(t.$$typeof.toString()==="Symbol(react.forward_ref)"||t.$$typeof.description==="react.forward_ref"))}function FL(t){return!!(typeof t=="object"&&t.$$typeof&&(t.$$typeof.toString()==="Symbol(react.memo)"||t.$$typeof.description==="react.memo"))}function jL(t){if(bw(t)||kw(t))return!0;if(FL(t)){const e=t.type;if(e)return bw(e)||kw(e)}return!1}function VL(){try{if(F.version)return parseInt(F.version.split(".")[0],10)>=19}catch{}return!1}class zL{constructor(e,{editor:n,props:r={},as:i="div",className:o=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=e,this.editor=n,this.props=r,this.element=document.createElement(i),this.element.classList.add("react-renderer"),o&&this.element.classList.add(...o.split(" ")),this.editor.isInitialized?Sg.flushSync(()=>{this.render()}):queueMicrotask(()=>{this.render()})}render(){var e;const n=this.component,r=this.props,i=this.editor,o=VL(),s=jL(n),l={...r};l.ref&&!(o||s)&&delete l.ref,!l.ref&&(o||s)&&(l.ref=a=>{this.ref=a}),this.reactElement=$e.createElement(n,{...l}),(e=i==null?void 0:i.contentComponent)===null||e===void 0||e.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e;const n=this.editor;(e=n==null?void 0:n.contentComponent)===null||e===void 0||e.removeRenderer(this.id)}updateAttributes(e){Object.keys(e).forEach(n=>{this.element.setAttribute(n,e[n])})}}class UL extends gL{constructor(e,n,r){if(super(e,n,r),!this.node.isLeaf){this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.dataset.nodeViewWrapper="",this.contentDOMElement.style.whiteSpace="inherit";const i=this.dom.querySelector("[data-node-view-content]");if(!i)return;i.appendChild(this.contentDOMElement)}}mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(c={})=>this.updateAttributes(c),deleteNode:()=>this.deleteNode(),ref:F.createRef()};if(!this.component.displayName){const c=u=>u.charAt(0).toUpperCase()+u.substring(1);this.component.displayName=c(this.extension.name)}const i={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:c=>{c&&this.contentDOMElement&&c.firstChild!==this.contentDOMElement&&(c.hasAttribute("data-node-view-wrapper")&&c.removeAttribute("data-node-view-wrapper"),c.appendChild(this.contentDOMElement))}},o=this.component,s=F.memo(c=>$e.createElement(UE.Provider,{value:i},F.createElement(o,c)));s.displayName="ReactNodeView";let l=this.node.isInline?"span":"div";this.options.as&&(l=this.options.as);const{className:a=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new zL(s,{editor:this.editor,props:e,as:l,className:`node-${this.node.type.name} ${a}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!(!((e=this.renderer.element.firstElementChild)===null||e===void 0)&&e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:e,to:n}=this.editor.state.selection,r=this.getPos();if(typeof r=="number")if(e<=r&&n>=r+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(e,n,r){const i=o=>{this.renderer.updateProps(o),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const o=this.node,s=this.decorations,l=this.innerDecorations;return this.node=e,this.decorations=n,this.innerDecorations=r,this.options.update({oldNode:o,oldDecorations:s,newNode:e,newDecorations:n,oldInnerDecorations:l,innerDecorations:r,updateProps:()=>i({node:e,decorations:n,innerDecorations:r})})}return e===this.node&&this.decorations===n&&this.innerDecorations===r||(this.node=e,this.decorations=n,this.innerDecorations=r,i({node:e,decorations:n,innerDecorations:r})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let e={};if(typeof this.options.attrs=="function"){const n=this.editor.extensionManager.attributes,r=Ou(this.node,n);e=this.options.attrs({node:this.node,HTMLAttributes:r})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}}function HL(t,e){return n=>n.editor.contentComponent?new UL(t,n,e):{}}const WL=/^\s*>\s$/,GL=tn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",ct(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Xl({find:WL,type:this.type})]}}),KL=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,qL=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,JL=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,YL=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,QL=Jr.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",ct(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[rs({find:KL,type:this.type}),rs({find:JL,type:this.type})]},addPasteRules(){return[is({find:qL,type:this.type}),is({find:YL,type:this.type})]}}),XL="listItem",Cw="textStyle",Ew=/^\s*([-+*])\s$/,ZL=tn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",ct(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(XL,this.editor.getAttributes(Cw)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Xl({find:Ew,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Xl({find:Ew,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Cw),editor:this.editor})),[t]}}),e$=/(^|[^`])`([^`]+)`(?!`)/,t$=/(^|[^`])`([^`]+)`(?!`)/g,n$=Jr.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",ct(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[rs({find:e$,type:this.type})]},addPasteRules(){return[is({find:t$,type:this.type})]}}),r$=/^```([a-z]+)?[\s\n]$/,i$=/^~~~([a-z]+)?[\s\n]$/,o$=tn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,o=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",ct(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!o||!s?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?t.commands.command(({tr:c})=>(c.setSelection(W.near(r.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[$p({find:r$,type:this.type,getAttributes:t=>({language:t[1]})}),$p({find:i$,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new At({key:new $n("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i==null?void 0:i.mode;if(!n||!o)return!1;const{tr:s,schema:l}=t.state,a=l.text(n.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:o},a)),s.selection.$from.parent.type!==this.type&&s.setSelection(z.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),s$=tn.create({name:"doc",topNode:!0,content:"block+"});function l$(t={}){return new At({view(e){return new a$(e,t)}})}class a${constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=s=>{this[i](s)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,o=i.getBoundingClientRect(),s=o.width/i.offsetWidth,l=o.height/i.offsetHeight;if(n){let f=e.nodeBefore,d=e.nodeAfter;if(f||d){let p=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(p){let h=p.getBoundingClientRect(),m=f?h.bottom:h.top;f&&d&&(m=(m+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let y=this.width/2*l;r={left:h.left,right:h.right,top:m-y,bottom:m+y}}}}if(!r){let f=this.editorView.coordsAtPos(this.cursorPos),d=this.width/2*s;r={left:f.left-d,right:f.left+d,top:f.top,bottom:f.bottom}}let a=this.editorView.dom.offsetParent;this.element||(this.element=a.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,u;if(!a||a==document.body&&getComputedStyle(a).position=="static")c=-pageXOffset,u=-pageYOffset;else{let f=a.getBoundingClientRect(),d=f.width/a.offsetWidth,p=f.height/a.offsetHeight;c=f.left-a.scrollLeft*d,u=f.top-a.scrollTop*p}this.element.style.left=(r.left-c)/s+"px",this.element.style.top=(r.top-u)/l+"px",this.element.style.width=(r.right-r.left)/s+"px",this.element.style.height=(r.bottom-r.top)/l+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!o){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=RC(this.editorView.state.doc,s,this.editorView.dragging.slice);l!=null&&(s=l)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const c$=yt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[l$(this.options)]}});class be extends W{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return be.valid(r)?new be(r):W.near(r)}content(){return P.empty}eq(e){return e instanceof be&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new be(e.resolve(n.pos))}getBookmark(){return new Ug(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!u$(e)||!f$(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&be.valid(e))return e;let i=e.pos,o=null;for(let s=e.depth;;s--){let l=e.node(s);if(n>0?e.indexAfter(s)<l.childCount:e.index(s)>0){o=l.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=n;let a=e.doc.resolve(i);if(be.valid(a))return a}for(;;){let s=n>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!$.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=s,i+=n;let l=e.doc.resolve(i);if(be.valid(l))return l}return null}}}be.prototype.visible=!1;be.findFrom=be.findGapCursorFrom;W.jsonID("gapcursor",be);class Ug{constructor(e){this.pos=e}map(e){return new Ug(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return be.valid(n)?new be(n):W.near(n)}}function u$(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function f$(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function d$(){return new At({props:{decorations:g$,createSelectionBetween(t,e,n){return e.pos==n.pos&&be.valid(n)?new be(n):null},handleClick:p$,handleKeyDown:h$,handleDOMEvents:{beforeinput:m$}}})}const h$=kE({ArrowLeft:ac("horiz",-1),ArrowRight:ac("horiz",1),ArrowUp:ac("vert",-1),ArrowDown:ac("vert",1)});function ac(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let s=r.selection,l=e>0?s.$to:s.$from,a=s.empty;if(s instanceof z){if(!o.endOfTextblock(n)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let c=be.findGapCursorFrom(l,e,a);return c?(i&&i(r.tr.setSelection(new be(c))),!0):!1}}function p$(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!be.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&$.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new be(r))),!0)}function m$(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof be))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=M.empty;for(let s=r.length-1;s>=0;s--)i=M.from(r[s].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new P(i,0,0));return o.setSelection(z.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function g$(t){if(!(t.selection instanceof be))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Oe.create(t.doc,[qt.widget(t.selection.head,e,{key:"gapcursor"})])}const y$=yt.create({name:"gapCursor",addProseMirrorPlugins(){return[d$()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=G(L(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),v$=tn.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",ct(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:o}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:l}=r.extensionManager,a=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&a&&s){const f=a.filter(d=>l.includes(d.type.name));c.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),w$=tn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,ct(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>$p({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var Du=200,ze=function(){};ze.prototype.append=function(e){return e.length?(e=ze.from(e),!this.length&&e||e.length<Du&&this.leafAppend(e)||this.length<Du&&e.leafPrepend(this)||this.appendInner(e)):this};ze.prototype.prepend=function(e){return e.length?ze.from(e).append(this):this};ze.prototype.appendInner=function(e){return new S$(this,e)};ze.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?ze.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};ze.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};ze.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};ze.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,s){return i.push(e(o,s))},n,r),i};ze.from=function(e){return e instanceof ze?e:e&&e.length?new HE(e):ze.empty};var HE=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,s,l){for(var a=o;a<s;a++)if(i(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,s,l){for(var a=o-1;a>=s;a--)if(i(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Du)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Du)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(ze);ze.empty=new HE([]);var S$=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,s){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(o,l),s)===!1||o>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,o)-l,s+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,s){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(o,l)-l,s+l)===!1||o<l&&this.left.forEachInvertedInner(r,Math.min(i,l),o,s)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(ze);const b$=500;class ln{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let s=e.tr,l,a,c=[],u=[];return this.items.forEach((f,d)=>{if(!f.step){i||(i=this.remapping(r,d+1),o=i.maps.length),o--,u.push(f);return}if(i){u.push(new hr(f.map));let p=f.step.map(i.slice(o)),h;p&&s.maybeStep(p).doc&&(h=s.mapping.maps[s.mapping.maps.length-1],c.push(new hr(h,void 0,void 0,c.length+u.length))),o--,h&&i.appendMap(h,o)}else s.maybeStep(f.step);if(f.selection)return l=i?f.selection.map(i.slice(o)):f.selection,a=new ln(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:s,selection:l}}addTransform(e,n,r,i){let o=[],s=this.eventCount,l=this.items,a=!i&&l.length?l.get(l.length-1):null;for(let u=0;u<e.steps.length;u++){let f=e.steps[u].invert(e.docs[u]),d=new hr(e.mapping.maps[u],f,n),p;(p=a&&a.merge(d))&&(d=p,u?o.pop():l=l.slice(0,l.length-1)),o.push(d),n&&(s++,n=void 0),i||(a=d)}let c=s-r.depth;return c>C$&&(l=k$(l,c),s-=c),new ln(l.append(o),s)}remapping(e,n){let r=new Wl;return this.items.forEach((i,o)=>{let s=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new ln(this.items.append(e.map(n=>new hr(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=e.mapping,s=e.steps.length,l=this.eventCount;this.items.forEach(d=>{d.selection&&l--},i);let a=n;this.items.forEach(d=>{let p=o.getMirror(--a);if(p==null)return;s=Math.min(s,p);let h=o.maps[p];if(d.step){let m=e.steps[p].invert(e.docs[p]),y=d.selection&&d.selection.map(o.slice(a+1,p));y&&l++,r.push(new hr(h,m,y))}else r.push(new hr(h))},i);let c=[];for(let d=n;d<s;d++)c.push(new hr(o.maps[d]));let u=this.items.slice(0,i).append(c).append(r),f=new ln(u,l);return f.emptyItemCount()>b$&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach((s,l)=>{if(l>=e)i.push(s),s.selection&&o++;else if(s.step){let a=s.step.map(n.slice(r)),c=a&&a.getMap();if(r--,c&&n.appendMap(c,r),a){let u=s.selection&&s.selection.map(n.slice(r));u&&o++;let f=new hr(c.invert(),a,u),d,p=i.length-1;(d=i.length&&i[p].merge(f))?i[p]=d:i.push(f)}}else s.map&&r--},this.items.length,0),new ln(ze.from(i.reverse()),o)}}ln.empty=new ln(ze.empty,0);function k$(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}let hr=class WE{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new WE(n.getMap().invert(),n,this.selection)}}};class vr{constructor(e,n,r,i,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const C$=20;function E$(t,e,n,r){let i=n.getMeta(Li),o;if(i)return i.historyState;n.getMeta(M$)&&(t=new vr(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(Li))return s.getMeta(Li).redo?new vr(t.done.addTransform(n,void 0,r,Ic(e)),t.undone,xw(n.mapping.maps),t.prevTime,t.prevComposition):new vr(t.done,t.undone.addTransform(n,void 0,r,Ic(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),a=t.prevTime==0||!s&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!x$(n,t.prevRanges)),c=s?Qd(t.prevRanges,n.mapping):xw(n.mapping.maps);return new vr(t.done.addTransform(n,a?e.selection.getBookmark():void 0,r,Ic(e)),ln.empty,c,n.time,l??t.prevComposition)}else return(o=n.getMeta("rebased"))?new vr(t.done.rebased(n,o),t.undone.rebased(n,o),Qd(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new vr(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Qd(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function x$(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(n=!0)}),n}function xw(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,o,s)=>e.push(o,s));return e}function Qd(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function T$(t,e,n){let r=Ic(e),i=Li.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let s=o.selection.resolve(o.transform.doc),l=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),a=new vr(n?l:o.remaining,n?o.remaining:l,null,0,-1);return o.transform.setSelection(s).setMeta(Li,{redo:n,historyState:a})}let Xd=!1,Tw=null;function Ic(t){let e=t.plugins;if(Tw!=e){Xd=!1,Tw=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Xd=!0;break}}return Xd}const Li=new $n("history"),M$=new $n("closeHistory");function O$(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new At({key:Li,state:{init(){return new vr(ln.empty,ln.empty,null,0,-1)},apply(e,n,r){return E$(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?KE:r=="historyRedo"?qE:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function GE(t,e){return(n,r)=>{let i=Li.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let o=T$(i,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const KE=GE(!1,!0),qE=GE(!0,!0),A$=yt.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>KE(t,e),redo:()=>({state:t,dispatch:e})=>qE(t,e)}},addProseMirrorPlugins(){return[O$(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),D$=tn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",ct(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!yL(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$from:r,$to:i}=n,o=t();return r.parentOffset===0?o.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):$R(n)?o.insertContentAt(i.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:s,dispatch:l})=>{var a;if(l){const{$to:c}=s.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?s.setSelection(z.create(s.doc,c.pos+1)):c.nodeAfter.isBlock?s.setSelection($.create(s.doc,c.pos)):s.setSelection(z.create(s.doc,c.pos));else{const f=(a=c.parent.type.contentMatch.defaultType)===null||a===void 0?void 0:a.create();f&&(s.insert(u,f),s.setSelection(z.create(s.doc,u+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[mL({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),_$=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,P$=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,N$=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,I$=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,R$=Jr.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",ct(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[rs({find:_$,type:this.type}),rs({find:N$,type:this.type})]},addPasteRules(){return[is({find:P$,type:this.type}),is({find:I$,type:this.type})]}}),L$=tn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",ct(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),$$="listItem",Mw="textStyle",Ow=/^(\d+)\.\s$/,B$=tn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",ct(this.options.HTMLAttributes,n),0]:["ol",ct(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes($$,this.editor.getAttributes(Mw)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Xl({find:Ow,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Xl({find:Ow,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Mw)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),F$=tn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",ct(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),j$=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,V$=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,z$=Jr.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",ct(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[rs({find:j$,type:this.type})]},addPasteRules(){return[is({find:V$,type:this.type})]}}),U$=tn.create({name:"text",group:"inline"}),H$=yt.create({name:"starterKit",addExtensions(){const t=[];return this.options.bold!==!1&&t.push(QL.configure(this.options.bold)),this.options.blockquote!==!1&&t.push(GL.configure(this.options.blockquote)),this.options.bulletList!==!1&&t.push(ZL.configure(this.options.bulletList)),this.options.code!==!1&&t.push(n$.configure(this.options.code)),this.options.codeBlock!==!1&&t.push(o$.configure(this.options.codeBlock)),this.options.document!==!1&&t.push(s$.configure(this.options.document)),this.options.dropcursor!==!1&&t.push(c$.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&t.push(y$.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&t.push(v$.configure(this.options.hardBreak)),this.options.heading!==!1&&t.push(w$.configure(this.options.heading)),this.options.history!==!1&&t.push(A$.configure(this.options.history)),this.options.horizontalRule!==!1&&t.push(D$.configure(this.options.horizontalRule)),this.options.italic!==!1&&t.push(R$.configure(this.options.italic)),this.options.listItem!==!1&&t.push(L$.configure(this.options.listItem)),this.options.orderedList!==!1&&t.push(B$.configure(this.options.orderedList)),this.options.paragraph!==!1&&t.push(F$.configure(this.options.paragraph)),this.options.strike!==!1&&t.push(z$.configure(this.options.strike)),this.options.text!==!1&&t.push(U$.configure(this.options.text)),t}});function Aw(t,e,n,r,i,o,s){try{var l=t[o](s),a=l.value}catch(c){return void n(c)}l.done?e(a):Promise.resolve(a).then(r,i)}function X(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function s(a){Aw(o,r,i,s,l,"next",a)}function l(a){Aw(o,r,i,s,l,"throw",a)}s(void 0)})}}function W$(){}var G$=W$;const Zl=$t(G$);function K$(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function _u(t,e){if(t==null)return{};var n,r,i=K$(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function jp(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function q$(t){if(Array.isArray(t))return jp(t)}function J$(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function JE(t,e){if(t){if(typeof t=="string")return jp(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jp(t,e):void 0}}function Y$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fn(t){return q$(t)||J$(t)||JE(t)||Y$()}function st(t){"@babel/helpers - typeof";return st=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},st(t)}function Q$(t,e){if(st(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(st(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YE(t){var e=Q$(t,"string");return st(e)=="symbol"?e:e+""}function Zn(t,e,n){return(e=YE(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Dw(Object(n),!0).forEach(function(r){Zn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dw(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var QE={exports:{}},XE={exports:{}};(function(t){function e(n,r){this.v=n,this.k=r}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(XE);var ZE=XE.exports,ex={exports:{}},tx={exports:{}};(function(t){function e(n,r,i,o){var s=Object.defineProperty;try{s({},"",{})}catch{s=0}t.exports=e=function(a,c,u,f){function d(p,h){e(a,p,function(m){return this._invoke(p,h,m)})}c?s?s(a,c,{value:u,enumerable:!f,configurable:!f,writable:!f}):a[c]=u:(d("next",0),d("throw",1),d("return",2))},t.exports.__esModule=!0,t.exports.default=t.exports,e(n,r,i,o)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(tx);var nx=tx.exports;(function(t){var e=nx;function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var r,i,o=typeof Symbol=="function"?Symbol:{},s=o.iterator||"@@iterator",l=o.toStringTag||"@@toStringTag";function a(y,g,v,w){var S=g&&g.prototype instanceof u?g:u,k=Object.create(S.prototype);return e(k,"_invoke",function(b,C,E){var x,A,U,te=0,Pe=E||[],ce=!1,Y={p:0,n:0,v:r,a:ee,f:ee.bind(r,4),d:function(T,R){return x=T,A=0,U=r,Y.n=R,c}};function ee(Q,T){for(A=Q,U=T,i=0;!ce&&te&&!R&&i<Pe.length;i++){var R,_=Pe[i],q=Y.p,ne=_[2];Q>3?(R=ne===T)&&(U=_[(A=_[4])?5:(A=3,3)],_[4]=_[5]=r):_[0]<=q&&((R=Q<2&&q<_[1])?(A=0,Y.v=T,Y.n=_[1]):q<ne&&(R=Q<3||_[0]>T||T>ne)&&(_[4]=Q,_[5]=T,Y.n=ne,A=0))}if(R||Q>1)return c;throw ce=!0,T}return function(Q,T,R){if(te>1)throw TypeError("Generator is already running");for(ce&&T===1&&ee(T,R),A=T,U=R;(i=A<2?r:U)||!ce;){x||(A?A<3?(A>1&&(Y.n=-1),ee(A,U)):Y.n=U:Y.v=U);try{if(te=2,x){if(A||(Q="next"),i=x[Q]){if(!(i=i.call(x,U)))throw TypeError("iterator result is not an object");if(!i.done)return i;U=i.value,A<2&&(A=0)}else A===1&&(i=x.return)&&i.call(x),A<2&&(U=TypeError("The iterator does not provide a '"+Q+"' method"),A=1);x=r}else if((i=(ce=Y.n<0)?U:b.call(C,Y))!==c)break}catch(_){x=r,A=1,U=_}finally{te=1}}return{value:i,done:ce}}}(y,v,w),!0),k}var c={};function u(){}function f(){}function d(){}i=Object.getPrototypeOf;var p=[][s]?i(i([][s]())):(e(i={},s,function(){return this}),i),h=d.prototype=u.prototype=Object.create(p);function m(y){return Object.setPrototypeOf?Object.setPrototypeOf(y,d):(y.__proto__=d,e(y,l,"GeneratorFunction")),y.prototype=Object.create(h),y}return f.prototype=d,e(h,"constructor",d),e(d,"constructor",f),f.displayName="GeneratorFunction",e(d,l,"GeneratorFunction"),e(h),e(h,l,"Generator"),e(h,s,function(){return this}),e(h,"toString",function(){return"[object Generator]"}),(t.exports=n=function(){return{w:a,m}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports})(ex);var rx=ex.exports,ix={exports:{}},ox={exports:{}},sx={exports:{}};(function(t){var e=ZE,n=nx;function r(i,o){function s(a,c,u,f){try{var d=i[a](c),p=d.value;return p instanceof e?o.resolve(p.v).then(function(h){s("next",h,u,f)},function(h){s("throw",h,u,f)}):o.resolve(p).then(function(h){d.value=h,u(d)},function(h){return s("throw",h,u,f)})}catch(h){f(h)}}var l;this.next||(n(r.prototype),n(r.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),n(this,"_invoke",function(a,c,u){function f(){return new o(function(d,p){s(a,u,d,p)})}return l=l?l.then(f,f):f()},!0)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports})(sx);var lx=sx.exports;(function(t){var e=rx,n=lx;function r(i,o,s,l,a){return new n(e().w(i,o,s,l),a||Promise)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports})(ox);var ax=ox.exports;(function(t){var e=ax;function n(r,i,o,s,l){var a=e(r,i,o,s,l);return a.next().then(function(c){return c.done?c.value:a.next()})}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports})(ix);var X$=ix.exports,cx={exports:{}};(function(t){function e(n){var r=Object(n),i=[];for(var o in r)i.unshift(o);return function s(){for(;i.length;)if((o=i.pop())in r)return s.value=o,s.done=!1,s;return s.done=!0,s}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(cx);var Z$=cx.exports,ux={exports:{}},fx={exports:{}};(function(t){function e(n){"@babel/helpers - typeof";return t.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(fx);var e2=fx.exports;(function(t){var e=e2.default;function n(r){if(r!=null){var i=r[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],o=0;if(i)return i.call(r);if(typeof r.next=="function")return r;if(!isNaN(r.length))return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}}}throw new TypeError(e(r)+" is not iterable")}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports})(ux);var t2=ux.exports;(function(t){var e=ZE,n=rx,r=X$,i=ax,o=lx,s=Z$,l=t2;function a(){var c=n(),u=c.m(a),f=(Object.getPrototypeOf?Object.getPrototypeOf(u):u.__proto__).constructor;function d(m){var y=typeof m=="function"&&m.constructor;return!!y&&(y===f||(y.displayName||y.name)==="GeneratorFunction")}var p={throw:1,return:2,break:3,continue:3};function h(m){var y,g;return function(v){y||(y={stop:function(){return g(v.a,2)},catch:function(){return v.v},abrupt:function(S,k){return g(v.a,p[S],k)},delegateYield:function(S,k,b){return y.resultName=k,g(v.d,l(S),b)},finish:function(S){return g(v.f,S)}},g=function(S,k,b){v.p=y.prev,v.n=y.next;try{return S(k,b)}finally{y.next=v.n}}),y.resultName&&(y[y.resultName]=v.v,y.resultName=void 0),y.sent=v.v,y.next=v.n;try{return m.call(this,y)}finally{v.p=y.prev,v.n=y.next}}}return(t.exports=a=function(){return{wrap:function(g,v,w,S){return c.w(h(g),v,w,S&&S.reverse())},isGeneratorFunction:d,mark:c.m,awrap:function(g,v){return new e(g,v)},AsyncIterator:o,async:function(g,v,w,S,k){return(d(v)?i:r)(h(g),v,w,S,k)},keys:s,values:l}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports})(QE);var n2=QE.exports,Rc=n2(),r2=Rc;try{regeneratorRuntime=Rc}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=Rc:Function("r","regeneratorRuntime = r")(Rc)}const N=$t(r2);var i2=Object.freeze({__proto__:null,get start(){return qg},get ensureJQuerySupport(){return kx},get setBootstrapMaxTime(){return f2},get setMountMaxTime(){return d2},get setUnmountMaxTime(){return h2},get setUnloadMaxTime(){return p2},get registerApplication(){return Tx},get unregisterApplication(){return Ox},get getMountedApps(){return Ex},get getAppStatus(){return Gg},get unloadApplication(){return Ax},get checkActivityFunctions(){return Mx},get getAppNames(){return xx},get pathToActiveWhen(){return Dx},get navigateToUrl(){return Wg},get triggerAppChange(){return w2},get addErrorHandler(){return o2},get removeErrorHandler(){return s2},get mountRootParcel(){return yx},get NOT_LOADED(){return Pn},get LOADING_SOURCE_CODE(){return _f},get NOT_BOOTSTRAPPED(){return ls},get BOOTSTRAPPING(){return dx},get NOT_MOUNTED(){return or},get MOUNTING(){return l2},get UPDATING(){return hx},get LOAD_ERROR(){return as},get MOUNTED(){return dn},get UNLOADING(){return Vp},get UNMOUNTING(){return px},get SKIP_BECAUSE_BROKEN(){return Je}});function Tn(t){return(Tn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function cc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _w=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{}).CustomEvent,wr=function(){try{var t=new _w("cat",{detail:{foo:"bar"}});return t.type==="cat"&&t.detail.foo==="bar"}catch{}return!1}()?_w:typeof document<"u"&&typeof document.createEvent=="function"?function(t,e){var n=document.createEvent("CustomEvent");return e?n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail):n.initCustomEvent(t,!1,!1,void 0),n}:function(t,e){var n=document.createEventObject();return n.type=t,e?(n.bubbles=!!e.bubbles,n.cancelable=!!e.cancelable,n.detail=e.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n},ea=[];function Yr(t,e,n){var r=ss(t,e,n);ea.length?ea.forEach(function(i){return i(r)}):setTimeout(function(){throw r})}function o2(t){if(typeof t!="function")throw Error(H(28,!1));ea.push(t)}function s2(t){if(typeof t!="function")throw Error(H(29,!1));var e=!1;return ea=ea.filter(function(n){var r=n===t;return e=e||r,!r}),e}function H(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return"single-spa minified message #".concat(t,": ").concat(e?e+" ":"","See https://single-spa.js.org/error/?code=").concat(t).concat(r.length?"&arg=".concat(r.join("&arg=")):"")}function ss(t,e,n){var r,i="".concat(Pf(e)," '").concat(he(e),"' died in status ").concat(e.status,": ");if(t instanceof Error){try{t.message=i+t.message}catch{}r=t}else{console.warn(H(30,!1,e.status,he(e)));try{r=Error(i+JSON.stringify(t))}catch{r=t}}return r.appOrParcelName=he(e),e.status=n,r}var Pn="NOT_LOADED",_f="LOADING_SOURCE_CODE",ls="NOT_BOOTSTRAPPED",dx="BOOTSTRAPPING",or="NOT_MOUNTED",l2="MOUNTING",dn="MOUNTED",hx="UPDATING",px="UNMOUNTING",Vp="UNLOADING",as="LOAD_ERROR",Je="SKIP_BECAUSE_BROKEN";function a2(t){return t.status===dn}function zp(t){try{return t.activeWhen(window.location)}catch(e){return Yr(e,t,Je),!1}}function he(t){return t.name}function mx(t){return!!t.unmountThisParcel}function Pf(t){return mx(t)?"parcel":"application"}function Ca(){for(var t=arguments.length-1;t>0;t--)for(var e in arguments[t])e!=="__proto__"&&(arguments[t-1][e]=arguments[t][e]);return arguments[0]}function Nf(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n];return null}function Oi(t){return t&&(typeof t=="function"||(e=t,Array.isArray(e)&&!Nf(e,function(n){return typeof n!="function"})));var e}function Ar(t,e){var n=t[e]||[];(n=Array.isArray(n)?n:[n]).length===0&&(n=[function(){return Promise.resolve()}]);var r=Pf(t),i=he(t);return function(o){return n.reduce(function(s,l,a){return s.then(function(){var c=l(o);return gx(c)?c:Promise.reject(H(15,!1,r,i,e,a))})},Promise.resolve())}}function gx(t){return t&&typeof t.then=="function"&&typeof t.catch=="function"}function Hg(t,e){return Promise.resolve().then(function(){return t.status!==ls?t:(t.status=dx,t.bootstrap?Ea(t,"bootstrap").then(n).catch(function(r){if(e)throw ss(r,t,Je);return Yr(r,t,Je),t}):Promise.resolve().then(n))});function n(){return t.status=or,t}}function If(t,e){return Promise.resolve().then(function(){if(t.status!==dn)return t;t.status=px;var n=Object.keys(t.parcels).map(function(i){return t.parcels[i].unmountThisParcel()});return Promise.all(n).then(r,function(i){return r().then(function(){var o=Error(i.message);if(e)throw ss(o,t,Je);Yr(o,t,Je)})}).then(function(){return t});function r(){return Ea(t,"unmount").then(function(){t.status=or}).catch(function(i){if(e)throw ss(i,t,Je);Yr(i,t,Je)})}})}var Pw=!1,Nw=!1;function Up(t,e){return Promise.resolve().then(function(){return t.status!==or?t:(Pw||(window.dispatchEvent(new wr("single-spa:before-first-mount")),Pw=!0),Ea(t,"mount").then(function(){return t.status=dn,Nw||(window.dispatchEvent(new wr("single-spa:first-mount")),Nw=!0),t}).catch(function(n){return t.status=dn,If(t,!0).then(r,r);function r(){if(e)throw ss(n,t,Je);return Yr(n,t,Je),t}}))})}var c2=0,u2={parcels:{}};function yx(){return vx.apply(u2,arguments)}function vx(t,e){var n=this;if(!t||Tn(t)!=="object"&&typeof t!="function")throw Error(H(2,!1));if(t.name&&typeof t.name!="string")throw Error(H(3,!1,Tn(t.name)));if(Tn(e)!=="object")throw Error(H(4,!1,name,Tn(e)));if(!e.domElement)throw Error(H(5,!1,name));var r,i=c2++,o=typeof t=="function",s=o?t:function(){return Promise.resolve(t)},l={id:i,parcels:{},status:o?_f:ls,customProps:e,parentName:he(n),unmountThisParcel:function(){return d.then(function(){if(l.status!==dn)throw Error(H(6,!1,name,l.status));return If(l,!0)}).then(function(h){return l.parentName&&delete n.parcels[l.id],h}).then(function(h){return c(h),h}).catch(function(h){throw l.status=Je,u(h),h})}};n.parcels[i]=l;var a=s();if(!a||typeof a.then!="function")throw Error(H(7,!1));var c,u,f=(a=a.then(function(h){if(!h)throw Error(H(8,!1));var m=h.name||"parcel-".concat(i);if(Object.prototype.hasOwnProperty.call(h,"bootstrap")&&!Oi(h.bootstrap))throw Error(H(9,!1,m));if(!Oi(h.mount))throw Error(H(10,!1,m));if(!Oi(h.unmount))throw Error(H(11,!1,m));if(h.update&&!Oi(h.update))throw Error(H(12,!1,m));var y=Ar(h,"bootstrap"),g=Ar(h,"mount"),v=Ar(h,"unmount");l.status=ls,l.name=m,l.bootstrap=y,l.mount=g,l.unmount=v,l.timeouts=Sx(h.timeouts),h.update&&(l.update=Ar(h,"update"),r.update=function(w){return l.customProps=w,hi(function(S){return Promise.resolve().then(function(){if(S.status!==dn)throw Error(H(32,!1,he(S)));return S.status=hx,Ea(S,"update").then(function(){return S.status=dn,S}).catch(function(k){throw ss(k,S,Je)})})}(l))})})).then(function(){return Hg(l,!0)}),d=f.then(function(){return Up(l,!0)}),p=new Promise(function(h,m){c=h,u=m});return r={mount:function(){return hi(Promise.resolve().then(function(){if(l.status!==or)throw Error(H(13,!1,name,l.status));return n.parcels[i]=l,Up(l)}))},unmount:function(){return hi(l.unmountThisParcel())},getStatus:function(){return l.status},loadPromise:hi(a),bootstrapPromise:hi(f),mountPromise:hi(d),unmountPromise:hi(p)}}function hi(t){return t.then(function(){return null})}function wx(t){var e=he(t),n=typeof t.customProps=="function"?t.customProps(e,window.location):t.customProps;(Tn(n)!=="object"||n===null||Array.isArray(n))&&(n={},console.warn(H(40,!1),e,n));var r=Ca({},n,{name:e,mountParcel:vx.bind(t),singleSpa:i2});return mx(t)&&(r.unmountSelf=t.unmountThisParcel),r}var cs={bootstrap:{millis:4e3,dieOnTimeout:!1,warningMillis:1e3},mount:{millis:3e3,dieOnTimeout:!1,warningMillis:1e3},unmount:{millis:3e3,dieOnTimeout:!1,warningMillis:1e3},unload:{millis:3e3,dieOnTimeout:!1,warningMillis:1e3},update:{millis:3e3,dieOnTimeout:!1,warningMillis:1e3}};function f2(t,e,n){if(typeof t!="number"||t<=0)throw Error(H(16,!1));cs.bootstrap={millis:t,dieOnTimeout:e,warningMillis:n||1e3}}function d2(t,e,n){if(typeof t!="number"||t<=0)throw Error(H(17,!1));cs.mount={millis:t,dieOnTimeout:e,warningMillis:n||1e3}}function h2(t,e,n){if(typeof t!="number"||t<=0)throw Error(H(18,!1));cs.unmount={millis:t,dieOnTimeout:e,warningMillis:n||1e3}}function p2(t,e,n){if(typeof t!="number"||t<=0)throw Error(H(19,!1));cs.unload={millis:t,dieOnTimeout:e,warningMillis:n||1e3}}function Ea(t,e){var n=t.timeouts[e],r=n.warningMillis,i=Pf(t);return new Promise(function(o,s){var l=!1,a=!1;t[e](wx(t)).then(function(f){l=!0,o(f)}).catch(function(f){l=!0,s(f)}),setTimeout(function(){return u(1)},r),setTimeout(function(){return u(!0)},n.millis);var c=H(31,!1,e,i,he(t),n.millis);function u(f){if(!l){if(f===!0)a=!0,n.dieOnTimeout?s(Error(c)):console.error(c);else if(!a){var d=f,p=d*r;console.warn(c),p+r<n.millis&&setTimeout(function(){return u(d+1)},r)}}}})}function Sx(t){var e={};for(var n in cs)e[n]=Ca({},cs[n],t&&t[n]||{});return e}function Hp(t){return Promise.resolve().then(function(){return t.loadPromise?t.loadPromise:t.status!==Pn&&t.status!==as?t:(t.status=_f,t.loadPromise=Promise.resolve().then(function(){var r=t.loadApp(wx(t));if(!gx(r))throw n=!0,Error(H(33,!1,he(t)));return r.then(function(i){var o;t.loadErrorTime=null,Tn(e=i)!=="object"&&(o=34),Object.prototype.hasOwnProperty.call(e,"bootstrap")&&!Oi(e.bootstrap)&&(o=35),Oi(e.mount)||(o=36),Oi(e.unmount)||(o=37);var s=Pf(e);if(o){var l;try{l=JSON.stringify(e)}catch{}return console.error(H(o,!1,s,he(t),l),e),Yr(void 0,t,Je),t}return e.devtools&&e.devtools.overlays&&(t.devtools.overlays=Ca({},t.devtools.overlays,e.devtools.overlays)),t.status=ls,t.bootstrap=Ar(e,"bootstrap"),t.mount=Ar(e,"mount"),t.unmount=Ar(e,"unmount"),t.unload=Ar(e,"unload"),t.timeouts=Sx(e.timeouts),delete t.loadPromise,t})}).catch(function(r){var i;return delete t.loadPromise,n?i=Je:(i=as,t.loadErrorTime=new Date().getTime()),Yr(r,t,i),t}));var e,n})}var bx,ks=typeof window<"u",tl={hashchange:[],popstate:[]},Pu=["hashchange","popstate"];function Wg(t){var e;if(typeof t=="string")e=t;else if(this&&this.href)e=this.href;else{if(!(t&&t.currentTarget&&t.currentTarget.href&&t.preventDefault))throw Error(H(14,!1));e=t.currentTarget.href,t.preventDefault()}var n=$w(window.location.href),r=$w(e);e.indexOf("#")===0?window.location.hash=r.hash:n.host!==r.host&&r.host?window.location.href=e:r.pathname===n.pathname&&r.search===n.search?window.location.hash=r.hash:window.history.pushState(null,null,e)}function Iw(t){var e=this;if(t){var n=t[0].type;Pu.indexOf(n)>=0&&tl[n].forEach(function(r){try{r.apply(e,t)}catch(i){setTimeout(function(){throw i})}})}}function Rw(){li([],arguments)}function Lw(t,e){return function(){var n=window.location.href,r=t.apply(this,arguments),i=window.location.href;return bx&&n===i||(_x()?window.dispatchEvent(m2(window.history.state,e)):li([])),r}}function m2(t,e){var n;try{n=new PopStateEvent("popstate",{state:t})}catch{(n=document.createEvent("PopStateEvent")).initPopStateEvent("popstate",!1,!1,t)}return n.singleSpa=!0,n.singleSpaTrigger=e,n}if(ks){window.addEventListener("hashchange",Rw),window.addEventListener("popstate",Rw);var g2=window.addEventListener,y2=window.removeEventListener;window.addEventListener=function(t,e){if(!(typeof e=="function"&&Pu.indexOf(t)>=0)||Nf(tl[t],function(n){return n===e}))return g2.apply(this,arguments);tl[t].push(e)},window.removeEventListener=function(t,e){if(!(typeof e=="function"&&Pu.indexOf(t)>=0))return y2.apply(this,arguments);tl[t]=tl[t].filter(function(n){return n!==e})},window.history.pushState=Lw(window.history.pushState,"pushState"),window.history.replaceState=Lw(window.history.replaceState,"replaceState"),window.singleSpaNavigate?console.warn(H(41,!1)):window.singleSpaNavigate=Wg}function $w(t){var e=document.createElement("a");return e.href=t,e}var Bw=!1;function kx(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.jQuery;if(t||window.$&&window.$.fn&&window.$.fn.jquery&&(t=window.$),t&&!Bw){var e=t.fn.on,n=t.fn.off;t.fn.on=function(r,i){return Fw.call(this,e,window.addEventListener,r,i,arguments)},t.fn.off=function(r,i){return Fw.call(this,n,window.removeEventListener,r,i,arguments)},Bw=!0}}function Fw(t,e,n,r,i){return typeof n!="string"?t.apply(this,i):(n.split(/\s+/).forEach(function(o){Pu.indexOf(o)>=0&&(e(o,r),n=n.replace(o,""))}),n.trim()===""?this:t.apply(this,i))}var us={};function Wp(t){return Promise.resolve().then(function(){var e=us[he(t)];if(!e)return t;if(t.status===Pn)return jw(t,e),t;if(t.status===Vp)return e.promise.then(function(){return t});if(t.status!==or&&t.status!==as)return t;var n=t.status===as?Promise.resolve():Ea(t,"unload");return t.status=Vp,n.then(function(){return jw(t,e),t}).catch(function(r){return function(i,o,s){delete us[he(i)],delete i.bootstrap,delete i.mount,delete i.unmount,delete i.unload,Yr(s,i,Je),o.reject(s)}(t,e,r),t})})}function jw(t,e){delete us[he(t)],delete t.bootstrap,delete t.mount,delete t.unmount,delete t.unload,t.status=Pn,e.resolve()}function Vw(t,e,n,r){us[he(t)]={app:t,resolve:n,reject:r},Object.defineProperty(us[he(t)],"promise",{get:e})}function Cx(t){return us[t]}var hn=[];function v2(){var t=[],e=[],n=[],r=[],i=new Date().getTime();return hn.forEach(function(o){var s=o.status!==Je&&zp(o);switch(o.status){case as:s&&i-o.loadErrorTime>=200&&n.push(o);break;case Pn:case _f:s&&n.push(o);break;case ls:case or:!s&&Cx(he(o))?t.push(o):s&&r.push(o);break;case dn:s||e.push(o)}}),{appsToUnload:t,appsToUnmount:e,appsToLoad:n,appsToMount:r}}function Ex(){return hn.filter(a2).map(he)}function xx(){return hn.map(he)}function Gg(t){var e=Nf(hn,function(n){return he(n)===t});return e?e.status:null}function Tx(t,e,n,r){var i=function(o,s,l,a){var c,u={name:null,loadApp:null,activeWhen:null,customProps:null};return Tn(o)==="object"?(function(f){if(Array.isArray(f)||f===null)throw Error(H(39,!1));var d=["name","app","activeWhen","customProps"],p=Object.keys(f).reduce(function(m,y){return d.indexOf(y)>=0?m:m.concat(y)},[]);if(p.length!==0)throw Error(H(38,!1,d.join(", "),p.join(", ")));if(typeof f.name!="string"||f.name.length===0||Tn(f.app)!=="object"&&typeof f.app!="function")throw Error(H(20,!1));var h=function(m){return typeof m=="string"||typeof m=="function"};if(!(h(f.activeWhen)||Array.isArray(f.activeWhen)&&f.activeWhen.every(h)))throw Error(H(24,!1));if(!Uw(f.customProps))throw Error(H(22,!1))}(o),u.name=o.name,u.loadApp=o.app,u.activeWhen=o.activeWhen,u.customProps=o.customProps):(function(f,d,p,h){if(typeof f!="string"||f.length===0)throw Error(H(20,!1));if(!d)throw Error(H(23,!1));if(typeof p!="function")throw Error(H(24,!1));if(!Uw(h))throw Error(H(22,!1))}(o,s,l,a),u.name=o,u.loadApp=s,u.activeWhen=l,u.customProps=a),u.loadApp=typeof(c=u.loadApp)!="function"?function(){return Promise.resolve(c)}:c,u.customProps=function(f){return f||{}}(u.customProps),u.activeWhen=function(f){var d=Array.isArray(f)?f:[f];return d=d.map(function(p){return typeof p=="function"?p:Dx(p)}),function(p){return d.some(function(h){return h(p)})}}(u.activeWhen),u}(t,e,n,r);if(xx().indexOf(i.name)!==-1)throw Error(H(21,!1,i.name));hn.push(Ca({loadErrorTime:null,status:Pn,parcels:{},devtools:{overlays:{options:{},selectors:[]}}},i)),ks&&(kx(),li())}function Mx(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.location;return hn.filter(function(e){return e.activeWhen(t)}).map(he)}function Ox(t){if(hn.filter(function(e){return he(e)===t}).length===0)throw Error(H(25,!1,t));return Ax(t).then(function(){var e=hn.map(he).indexOf(t);hn.splice(e,1)})}function Ax(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{waitForUnmount:!1};if(typeof t!="string")throw Error(H(26,!1));var n=Nf(hn,function(s){return he(s)===t});if(!n)throw Error(H(27,!1,t));var r,i=Cx(he(n));if(e&&e.waitForUnmount){if(i)return i.promise;var o=new Promise(function(s,l){Vw(n,function(){return o},s,l)});return o}return i?(r=i.promise,zw(n,i.resolve,i.reject)):r=new Promise(function(s,l){Vw(n,function(){return r},s,l),zw(n,s,l)}),r}function zw(t,e,n){If(t).then(Wp).then(function(){e(),setTimeout(function(){li()})}).catch(n)}function Uw(t){return!t||typeof t=="function"||Tn(t)==="object"&&t!==null&&!Array.isArray(t)}function Dx(t,e){var n=function(r,i){var o=0,s=!1,l="^";r[0]!=="/"&&(r="/"+r);for(var a=0;a<r.length;a++){var c=r[a];(!s&&c===":"||s&&c==="/")&&u(a)}return u(r.length),new RegExp(l,"i");function u(f){var d=r.slice(o,f).replace(/[|\\{}()[\]^$+*?.]/g,"\\$&");if(l+=s?"[^/]+/?":d,f===r.length)if(s)i&&(l+="$");else{var p=i?"":".*";l=l.charAt(l.length-1)==="/"?"".concat(l).concat(p,"$"):"".concat(l,"(/").concat(p,")?(#.*)?$")}s=!s,o=f}}(t,e);return function(r){var i=r.origin;i||(i="".concat(r.protocol,"//").concat(r.host));var o=r.href.replace(i,"").replace(r.search,"").split("?")[0];return n.test(o)}}var Zd=!1,uc=[],Hw=ks&&window.location.href;function w2(){return li()}function li(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;if(Zd)return new Promise(function(g,v){uc.push({resolve:g,reject:v,eventArguments:e})});var n,r=v2(),i=r.appsToUnload,o=r.appsToUnmount,s=r.appsToLoad,l=r.appsToMount,a=!1,c=Hw,u=Hw=window.location.href;return _x()?(Zd=!0,n=i.concat(s,o,l),p()):(n=s,d());function f(){a=!0}function d(){return Promise.resolve().then(function(){var g=s.map(Hp);return Promise.all(g).then(m).then(function(){return[]}).catch(function(v){throw m(),v})})}function p(){return Promise.resolve().then(function(){if(window.dispatchEvent(new wr(n.length===0?"single-spa:before-no-app-change":"single-spa:before-app-change",y(!0))),window.dispatchEvent(new wr("single-spa:before-routing-event",y(!0,{cancelNavigation:f}))),a)return window.dispatchEvent(new wr("single-spa:before-mount-routing-event",y(!0))),h(),void Wg(c);var g=i.map(Wp),v=o.map(If).map(function(b){return b.then(Wp)}).concat(g),w=Promise.all(v);w.then(function(){window.dispatchEvent(new wr("single-spa:before-mount-routing-event",y(!0)))});var S=s.map(function(b){return Hp(b).then(function(C){return Ww(C,w)})}),k=l.filter(function(b){return s.indexOf(b)<0}).map(function(b){return Ww(b,w)});return w.catch(function(b){throw m(),b}).then(function(){return m(),Promise.all(S.concat(k)).catch(function(b){throw t.forEach(function(C){return C.reject(b)}),b}).then(h)})})}function h(){var g=Ex();t.forEach(function(S){return S.resolve(g)});try{var v=n.length===0?"single-spa:no-app-change":"single-spa:app-change";window.dispatchEvent(new wr(v,y())),window.dispatchEvent(new wr("single-spa:routing-event",y()))}catch(S){setTimeout(function(){throw S})}if(Zd=!1,uc.length>0){var w=uc;uc=[],li(w)}return g}function m(){t.forEach(function(g){Iw(g.eventArguments)}),Iw(e)}function y(){var g,v=arguments.length>0&&arguments[0]!==void 0&&arguments[0],w=arguments.length>1?arguments[1]:void 0,S={},k=(cc(g={},dn,[]),cc(g,or,[]),cc(g,Pn,[]),cc(g,Je,[]),g);v?(s.concat(l).forEach(function(E,x){C(E,dn)}),i.forEach(function(E){C(E,Pn)}),o.forEach(function(E){C(E,or)})):n.forEach(function(E){C(E)});var b={detail:{newAppStatuses:S,appsByNewStatus:k,totalAppChanges:n.length,originalEvent:e==null?void 0:e[0],oldUrl:c,newUrl:u,navigationIsCanceled:a}};return w&&Ca(b.detail,w),b;function C(E,x){var A=he(E);x=x||Gg(A),S[A]=x,(k[x]=k[x]||[]).push(A)}}}function Ww(t,e){return zp(t)?Hg(t).then(function(n){return e.then(function(){return zp(n)?Up(n):n})}):e.then(function(){return t})}var Kg=!1;function qg(t){var e;Kg=!0,t&&t.urlRerouteOnly&&(e=t.urlRerouteOnly,bx=e),ks&&li()}function _x(){return Kg}ks&&setTimeout(function(){Kg||console.warn(H(1,!1))},5e3);var S2={getRawAppData:function(){return[].concat(hn)},reroute:li,NOT_LOADED:Pn,toLoadPromise:Hp,toBootstrapPromise:Hg,unregisterApplication:Ox};ks&&window.__SINGLE_SPA_DEVTOOLS__&&(window.__SINGLE_SPA_DEVTOOLS__.exposedMethods=S2);function b2(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var Rf=b2,k2=typeof $a=="object"&&$a&&$a.Object===Object&&$a,Px=k2,C2=Px,E2=typeof self=="object"&&self&&self.Object===Object&&self,x2=C2||E2||Function("return this")(),Bn=x2,T2=Bn,M2=T2.Symbol,xa=M2,Gw=xa,Nx=Object.prototype,O2=Nx.hasOwnProperty,A2=Nx.toString,Gs=Gw?Gw.toStringTag:void 0;function D2(t){var e=O2.call(t,Gs),n=t[Gs];try{t[Gs]=void 0;var r=!0}catch{}var i=A2.call(t);return r&&(e?t[Gs]=n:delete t[Gs]),i}var _2=D2,P2=Object.prototype,N2=P2.toString;function I2(t){return N2.call(t)}var R2=I2,Kw=xa,L2=_2,$2=R2,B2="[object Null]",F2="[object Undefined]",qw=Kw?Kw.toStringTag:void 0;function j2(t){return t==null?t===void 0?F2:B2:qw&&qw in Object(t)?L2(t):$2(t)}var Cs=j2;function V2(t){return t!=null&&typeof t=="object"}var ai=V2,z2=Cs,U2=ai,H2="[object Arguments]";function W2(t){return U2(t)&&z2(t)==H2}var G2=W2,Jw=G2,K2=ai,Ix=Object.prototype,q2=Ix.hasOwnProperty,J2=Ix.propertyIsEnumerable,Y2=Jw(function(){return arguments}())?Jw:function(t){return K2(t)&&q2.call(t,"callee")&&!J2.call(t,"callee")},Jg=Y2,Q2=Array.isArray,ci=Q2,Yw=xa,X2=Jg,Z2=ci,Qw=Yw?Yw.isConcatSpreadable:void 0;function eB(t){return Z2(t)||X2(t)||!!(Qw&&t&&t[Qw])}var tB=eB,nB=Rf,rB=tB;function Rx(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=rB),i||(i=[]);++o<s;){var l=t[o];e>0&&n(l)?e>1?Rx(l,e-1,n,r,i):nB(i,l):r||(i[i.length]=l)}return i}var iB=Rx;function oB(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var Yg=oB,sB=Rf,lB=iB,aB=Yg,cB=ci;function uB(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return sB(cB(n)?aB(n):[n],lB(e,1))}var fB=uB;const Lx=$t(fB);function dB(){this.__data__=[],this.size=0}var hB=dB;function pB(t,e){return t===e||t!==t&&e!==e}var Lf=pB,mB=Lf;function gB(t,e){for(var n=t.length;n--;)if(mB(t[n][0],e))return n;return-1}var $f=gB,yB=$f,vB=Array.prototype,wB=vB.splice;function SB(t){var e=this.__data__,n=yB(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():wB.call(e,n,1),--this.size,!0}var bB=SB,kB=$f;function CB(t){var e=this.__data__,n=kB(e,t);return n<0?void 0:e[n][1]}var EB=CB,xB=$f;function TB(t){return xB(this.__data__,t)>-1}var MB=TB,OB=$f;function AB(t,e){var n=this.__data__,r=OB(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var DB=AB,_B=hB,PB=bB,NB=EB,IB=MB,RB=DB;function Es(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Es.prototype.clear=_B;Es.prototype.delete=PB;Es.prototype.get=NB;Es.prototype.has=IB;Es.prototype.set=RB;var Bf=Es,LB=Bf;function $B(){this.__data__=new LB,this.size=0}var BB=$B;function FB(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var jB=FB;function VB(t){return this.__data__.get(t)}var zB=VB;function UB(t){return this.__data__.has(t)}var HB=UB;function WB(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var cr=WB,GB=Cs,KB=cr,qB="[object AsyncFunction]",JB="[object Function]",YB="[object GeneratorFunction]",QB="[object Proxy]";function XB(t){if(!KB(t))return!1;var e=GB(t);return e==JB||e==YB||e==qB||e==QB}var Ff=XB;const Hr=$t(Ff);var ZB=Bn,eF=ZB["__core-js_shared__"],tF=eF,eh=tF,Xw=function(){var t=/[^.]+$/.exec(eh&&eh.keys&&eh.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function nF(t){return!!Xw&&Xw in t}var rF=nF,iF=Function.prototype,oF=iF.toString;function sF(t){if(t!=null){try{return oF.call(t)}catch{}try{return t+""}catch{}}return""}var $x=sF,lF=Ff,aF=rF,cF=cr,uF=$x,fF=/[\\^$.*+?()[\]{}|]/g,dF=/^\[object .+?Constructor\]$/,hF=Function.prototype,pF=Object.prototype,mF=hF.toString,gF=pF.hasOwnProperty,yF=RegExp("^"+mF.call(gF).replace(fF,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function vF(t){if(!cF(t)||aF(t))return!1;var e=lF(t)?yF:dF;return e.test(uF(t))}var wF=vF;function SF(t,e){return t==null?void 0:t[e]}var bF=SF,kF=wF,CF=bF;function EF(t,e){var n=CF(t,e);return kF(n)?n:void 0}var ro=EF,xF=ro,TF=Bn,MF=xF(TF,"Map"),Qg=MF,OF=ro,AF=OF(Object,"create"),jf=AF,Zw=jf;function DF(){this.__data__=Zw?Zw(null):{},this.size=0}var _F=DF;function PF(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var NF=PF,IF=jf,RF="__lodash_hash_undefined__",LF=Object.prototype,$F=LF.hasOwnProperty;function BF(t){var e=this.__data__;if(IF){var n=e[t];return n===RF?void 0:n}return $F.call(e,t)?e[t]:void 0}var FF=BF,jF=jf,VF=Object.prototype,zF=VF.hasOwnProperty;function UF(t){var e=this.__data__;return jF?e[t]!==void 0:zF.call(e,t)}var HF=UF,WF=jf,GF="__lodash_hash_undefined__";function KF(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=WF&&e===void 0?GF:e,this}var qF=KF,JF=_F,YF=NF,QF=FF,XF=HF,ZF=qF;function xs(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}xs.prototype.clear=JF;xs.prototype.delete=YF;xs.prototype.get=QF;xs.prototype.has=XF;xs.prototype.set=ZF;var ej=xs,e1=ej,tj=Bf,nj=Qg;function rj(){this.size=0,this.__data__={hash:new e1,map:new(nj||tj),string:new e1}}var ij=rj;function oj(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var sj=oj,lj=sj;function aj(t,e){var n=t.__data__;return lj(e)?n[typeof e=="string"?"string":"hash"]:n.map}var Vf=aj,cj=Vf;function uj(t){var e=cj(this,t).delete(t);return this.size-=e?1:0,e}var fj=uj,dj=Vf;function hj(t){return dj(this,t).get(t)}var pj=hj,mj=Vf;function gj(t){return mj(this,t).has(t)}var yj=gj,vj=Vf;function wj(t,e){var n=vj(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var Sj=wj,bj=ij,kj=fj,Cj=pj,Ej=yj,xj=Sj;function Ts(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ts.prototype.clear=bj;Ts.prototype.delete=kj;Ts.prototype.get=Cj;Ts.prototype.has=Ej;Ts.prototype.set=xj;var Xg=Ts,Tj=Bf,Mj=Qg,Oj=Xg,Aj=200;function Dj(t,e){var n=this.__data__;if(n instanceof Tj){var r=n.__data__;if(!Mj||r.length<Aj-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Oj(r)}return n.set(t,e),this.size=n.size,this}var _j=Dj,Pj=Bf,Nj=BB,Ij=jB,Rj=zB,Lj=HB,$j=_j;function Ms(t){var e=this.__data__=new Pj(t);this.size=e.size}Ms.prototype.clear=Nj;Ms.prototype.delete=Ij;Ms.prototype.get=Rj;Ms.prototype.has=Lj;Ms.prototype.set=$j;var Bx=Ms,Bj=ro,Fj=function(){try{var t=Bj(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Fx=Fj,t1=Fx;function jj(t,e,n){e=="__proto__"&&t1?t1(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var Zg=jj,Vj=Zg,zj=Lf;function Uj(t,e,n){(n!==void 0&&!zj(t[e],n)||n===void 0&&!(e in t))&&Vj(t,e,n)}var jx=Uj;function Hj(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),l=s.length;l--;){var a=s[t?l:++i];if(n(o[a],a,o)===!1)break}return e}}var Wj=Hj,Gj=Wj,Kj=Gj(),Vx=Kj,Nu={exports:{}};Nu.exports;(function(t,e){var n=Bn,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,s=o?n.Buffer:void 0,l=s?s.allocUnsafe:void 0;function a(c,u){if(u)return c.slice();var f=c.length,d=l?l(f):new c.constructor(f);return c.copy(d),d}t.exports=a})(Nu,Nu.exports);var zx=Nu.exports,qj=Bn,Jj=qj.Uint8Array,Yj=Jj,n1=Yj;function Qj(t){var e=new t.constructor(t.byteLength);return new n1(e).set(new n1(t)),e}var ey=Qj,Xj=ey;function Zj(t,e){var n=e?Xj(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var Ux=Zj,e3=cr,r1=Object.create,t3=function(){function t(){}return function(e){if(!e3(e))return{};if(r1)return r1(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),n3=t3;function r3(t,e){return function(n){return t(e(n))}}var Hx=r3,i3=Hx,o3=i3(Object.getPrototypeOf,Object),ty=o3,s3=Object.prototype;function l3(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||s3;return t===n}var ny=l3,a3=n3,c3=ty,u3=ny;function f3(t){return typeof t.constructor=="function"&&!u3(t)?a3(c3(t)):{}}var Wx=f3,d3=9007199254740991;function h3(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=d3}var Gx=h3,p3=Ff,m3=Gx;function g3(t){return t!=null&&m3(t.length)&&!p3(t)}var Ta=g3,y3=Ta,v3=ai;function w3(t){return v3(t)&&y3(t)}var Kx=w3,Iu={exports:{}};function S3(){return!1}var b3=S3;Iu.exports;(function(t,e){var n=Bn,r=b3,i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,s=o&&o.exports===i,l=s?n.Buffer:void 0,a=l?l.isBuffer:void 0,c=a||r;t.exports=c})(Iu,Iu.exports);var ry=Iu.exports,k3=Cs,C3=ty,E3=ai,x3="[object Object]",T3=Function.prototype,M3=Object.prototype,qx=T3.toString,O3=M3.hasOwnProperty,A3=qx.call(Object);function D3(t){if(!E3(t)||k3(t)!=x3)return!1;var e=C3(t);if(e===null)return!0;var n=O3.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&qx.call(n)==A3}var _3=D3,P3=Cs,N3=Gx,I3=ai,R3="[object Arguments]",L3="[object Array]",$3="[object Boolean]",B3="[object Date]",F3="[object Error]",j3="[object Function]",V3="[object Map]",z3="[object Number]",U3="[object Object]",H3="[object RegExp]",W3="[object Set]",G3="[object String]",K3="[object WeakMap]",q3="[object ArrayBuffer]",J3="[object DataView]",Y3="[object Float32Array]",Q3="[object Float64Array]",X3="[object Int8Array]",Z3="[object Int16Array]",eV="[object Int32Array]",tV="[object Uint8Array]",nV="[object Uint8ClampedArray]",rV="[object Uint16Array]",iV="[object Uint32Array]",fe={};fe[Y3]=fe[Q3]=fe[X3]=fe[Z3]=fe[eV]=fe[tV]=fe[nV]=fe[rV]=fe[iV]=!0;fe[R3]=fe[L3]=fe[q3]=fe[$3]=fe[J3]=fe[B3]=fe[F3]=fe[j3]=fe[V3]=fe[z3]=fe[U3]=fe[H3]=fe[W3]=fe[G3]=fe[K3]=!1;function oV(t){return I3(t)&&N3(t.length)&&!!fe[P3(t)]}var sV=oV;function lV(t){return function(e){return t(e)}}var zf=lV,Ru={exports:{}};Ru.exports;(function(t,e){var n=Px,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,s=o&&n.process,l=function(){try{var a=i&&i.require&&i.require("util").types;return a||s&&s.binding&&s.binding("util")}catch{}}();t.exports=l})(Ru,Ru.exports);var iy=Ru.exports,aV=sV,cV=zf,i1=iy,o1=i1&&i1.isTypedArray,uV=o1?cV(o1):aV,Jx=uV;function fV(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var Yx=fV,dV=Zg,hV=Lf,pV=Object.prototype,mV=pV.hasOwnProperty;function gV(t,e,n){var r=t[e];(!(mV.call(t,e)&&hV(r,n))||n===void 0&&!(e in t))&&dV(t,e,n)}var Qx=gV,yV=Qx,vV=Zg;function wV(t,e,n,r){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var l=e[o],a=r?r(n[l],t[l],l,n,t):void 0;a===void 0&&(a=t[l]),i?vV(n,l,a):yV(n,l,a)}return n}var Ma=wV;function SV(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var bV=SV,kV=9007199254740991,CV=/^(?:0|[1-9]\d*)$/;function EV(t,e){var n=typeof t;return e=e??kV,!!e&&(n=="number"||n!="symbol"&&CV.test(t))&&t>-1&&t%1==0&&t<e}var Xx=EV,xV=bV,TV=Jg,MV=ci,OV=ry,AV=Xx,DV=Jx,_V=Object.prototype,PV=_V.hasOwnProperty;function NV(t,e){var n=MV(t),r=!n&&TV(t),i=!n&&!r&&OV(t),o=!n&&!r&&!i&&DV(t),s=n||r||i||o,l=s?xV(t.length,String):[],a=l.length;for(var c in t)(e||PV.call(t,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||AV(c,a)))&&l.push(c);return l}var Zx=NV;function IV(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var RV=IV,LV=cr,$V=ny,BV=RV,FV=Object.prototype,jV=FV.hasOwnProperty;function VV(t){if(!LV(t))return BV(t);var e=$V(t),n=[];for(var r in t)r=="constructor"&&(e||!jV.call(t,r))||n.push(r);return n}var zV=VV,UV=Zx,HV=zV,WV=Ta;function GV(t){return WV(t)?UV(t,!0):HV(t)}var Oa=GV,KV=Ma,qV=Oa;function JV(t){return KV(t,qV(t))}var YV=JV,s1=jx,QV=zx,XV=Ux,ZV=Yg,ez=Wx,l1=Jg,a1=ci,tz=Kx,nz=ry,rz=Ff,iz=cr,oz=_3,sz=Jx,c1=Yx,lz=YV;function az(t,e,n,r,i,o,s){var l=c1(t,n),a=c1(e,n),c=s.get(a);if(c){s1(t,n,c);return}var u=o?o(l,a,n+"",t,e,s):void 0,f=u===void 0;if(f){var d=a1(a),p=!d&&nz(a),h=!d&&!p&&sz(a);u=a,d||p||h?a1(l)?u=l:tz(l)?u=ZV(l):p?(f=!1,u=QV(a,!0)):h?(f=!1,u=XV(a,!0)):u=[]:oz(a)||l1(a)?(u=l,l1(l)?u=lz(l):(!iz(l)||rz(l))&&(u=ez(a))):f=!1}f&&(s.set(a,u),i(u,a,r,o,s),s.delete(a)),s1(t,n,u)}var cz=az,uz=Bx,fz=jx,dz=Vx,hz=cz,pz=cr,mz=Oa,gz=Yx;function eT(t,e,n,r,i){t!==e&&dz(e,function(o,s){if(i||(i=new uz),pz(o))hz(t,e,s,n,eT,r,i);else{var l=r?r(gz(t,s),o,s+"",t,e,i):void 0;l===void 0&&(l=o),fz(t,s,l)}},mz)}var yz=eT;function vz(t){return t}var oy=vz;function wz(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var Sz=wz,bz=Sz,u1=Math.max;function kz(t,e,n){return e=u1(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=u1(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=r[i];return l[e]=n(s),bz(t,this,l)}}var Cz=kz;function Ez(t){return function(){return t}}var xz=Ez,Tz=xz,f1=Fx,Mz=oy,Oz=f1?function(t,e){return f1(t,"toString",{configurable:!0,enumerable:!1,value:Tz(e),writable:!0})}:Mz,Az=Oz,Dz=800,_z=16,Pz=Date.now;function Nz(t){var e=0,n=0;return function(){var r=Pz(),i=_z-(r-n);if(n=r,i>0){if(++e>=Dz)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Iz=Nz,Rz=Az,Lz=Iz,$z=Lz(Rz),Bz=$z,Fz=oy,jz=Cz,Vz=Bz;function zz(t,e){return Vz(jz(t,e,Fz),t+"")}var tT=zz,Uz=Lf,Hz=Ta,Wz=Xx,Gz=cr;function Kz(t,e,n){if(!Gz(n))return!1;var r=typeof e;return(r=="number"?Hz(n)&&Wz(e,n.length):r=="string"&&e in n)?Uz(n[e],t):!1}var qz=Kz,Jz=tT,Yz=qz;function Qz(t){return Jz(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=t.length>3&&typeof o=="function"?(i--,o):void 0,s&&Yz(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var l=n[r];l&&t(e,l,r,o)}return e})}var Xz=Qz,Zz=yz,eU=Xz,tU=eU(function(t,e,n,r){Zz(t,e,n,r)}),nU=tU;const nT=$t(nU);function rU(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var rT=rU,iU=Hx,oU=iU(Object.keys,Object),sU=oU,lU=ny,aU=sU,cU=Object.prototype,uU=cU.hasOwnProperty;function fU(t){if(!lU(t))return aU(t);var e=[];for(var n in Object(t))uU.call(t,n)&&n!="constructor"&&e.push(n);return e}var dU=fU,hU=Zx,pU=dU,mU=Ta;function gU(t){return mU(t)?hU(t):pU(t)}var Uf=gU,yU=Vx,vU=Uf;function wU(t,e){return t&&yU(t,e,vU)}var SU=wU,bU=Ta;function kU(t,e){return function(n,r){if(n==null)return n;if(!bU(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=Object(n);(e?o--:++o<i)&&r(s[o],o,s)!==!1;);return n}}var CU=kU,EU=SU,xU=CU,TU=xU(EU),MU=TU,OU=oy;function AU(t){return typeof t=="function"?t:OU}var DU=AU,_U=rT,PU=MU,NU=DU,IU=ci;function RU(t,e){var n=IU(t)?_U:PU;return n(t,NU(e))}var LU=RU;const $U=$t(LU);function iT(t,e){return Promise.all(t.map(function(n,r){return n.then(function(i){return{status:"fulfilled",value:i}}).catch(function(i){if(e!=null&&e(r))throw i;return{status:"rejected",reason:i}})}))}function BU(t){if(Array.isArray(t))return t}function FU(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,l=[],a=!0,c=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;a=!1}else for(;!(a=(r=o.call(n)).done)&&(l.push(r.value),l.length!==e);a=!0);}catch(u){c=!0,i=u}finally{try{if(!a&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return l}}function jU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sy(t,e){return BU(t)||FU(t,e)||JE(t,e)||jU()}var VU=typeof navigator<"u"&&navigator.userAgent.indexOf("Trident")!==-1;function oT(t,e){if(!t.hasOwnProperty(e)||!isNaN(e)&&e<t.length)return!0;if(VU)try{return t[e]&&typeof window<"u"&&t[e].parent===window}catch{return!0}else return!1}var Lc,$c,Gp;function zU(t){var e=0,n,r=!1;for(var i in t)if(!oT(t,i)){for(var o=0;o<window.frames.length&&!r;o++){var s=window.frames[o];if(s===t[i]){r=!0;break}}if(!r&&(e===0&&i!==Lc||e===1&&i!==$c))return i;e++,n=i}if(n!==Gp)return n}function UU(t){Lc=$c=void 0;for(var e in t)oT(t,e)||(Lc?$c||($c=e):Lc=e,Gp=e);return Gp}function ly(t){var e=t.indexOf(">")+1,n=t.lastIndexOf("<");return t.substring(e,n)}function Kp(t){if(st(t)==="object")return"/";try{var e=new URL(t,location.href),n=e.origin,r=e.pathname,i=r.split("/");return i.pop(),"".concat(n).concat(i.join("/"),"/")}catch(o){return console.warn(o),""}}function HU(){var t=document.createElement("script");return"noModule"in t}var WU=window.requestIdleCallback||function(e){var n=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-n))}})},1)};function GU(t,e){if(!e||!t.headers)return t.text();var n=t.headers.get("Content-Type");if(!n)return t.text();var r="utf-8",i=n.split(";");if(i.length===2){var o=i[1].split("="),s=sy(o,2),l=s[1],a=l&&l.trim();a&&(r=a)}return r.toUpperCase()==="UTF-8"?t.text():t.blob().then(function(c){return new Promise(function(u,f){var d=new window.FileReader;d.onload=function(){u(d.result)},d.onerror=f,d.readAsText(c,r)})})}var th={};function KU(t,e){var n=t;if(!th[n]){var r="(function(){".concat(e,"})");th[n]=(0,eval)(r)}var i=th[n];i.call(window)}function d1(t){var e=new DOMParser,n='<script src="'.concat(t,'"><\/script>'),r=e.parseFromString(n,"text/html");return r.scripts[0].src}var qU=/(<script[\s\S]*?>)[\s\S]*?<\/script>/gi,JU=/<(script)\s+((?!type=('|")text\/ng\x2Dtemplate\3)[\s\S])*?>[\s\S]*?<\/\1>/i,h1=/.*\ssrc=('|")?([^>'"\s]+)/,YU=/.*\stype=('|")?([^>'"\s]+)/,QU=/.*\sentry\s*.*/,XU=/.*\sasync\s*.*/,ZU=/.*\scrossorigin=('|")?use-credentials\1/,e4=/.*\snomodule\s*.*/,t4=/.*\stype=('|")?module('|")?\s*.*/,n4=/<(link)\s+[\s\S]*?>/ig,r4=/\srel=('|")?(preload|prefetch)\1/,p1=/.*\shref=('|")?([^>'"\s]+)/,i4=/.*\sas=('|")?font\1.*/,o4=/<style[^>]*>[\s\S]*?<\/style>/gi,s4=/\s+rel=('|")?stylesheet\1.*/,l4=/.*\shref=('|")?([^>'"\s]+)/,a4=/<!--([\s\S]*?)-->/g,c4=/<link(\s+|\s+[\s\S]+\s+)ignore(\s*|\s+[\s\S]*|=[\s\S]*)>/i,u4=/<style(\s+|\s+[\s\S]+\s+)ignore(\s*|\s+[\s\S]*|=[\s\S]*)>/i,f4=/<script(\s+|\s+[\s\S]+\s+)ignore(\s*|\s+[\s\S]*|=[\s\S]*)>/i;function m1(t){return t.startsWith("http://")||t.startsWith("https://")}function g1(t,e){return new URL(t,e).toString()}function d4(t){var e=["text/javascript","module","application/javascript","text/ecmascript","application/ecmascript"];return!t||e.indexOf(t)!==-1}var Lu=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return"<!-- ".concat(n?"prefetch/preload":""," link ").concat(e," replaced by import-html-entry -->")},sT=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return"<!-- ".concat(r?"cors":""," ").concat(n?"async":""," script ").concat(e," replaced by import-html-entry -->")},h4="<!-- inline scripts replaced by import-html-entry -->",fc=function(e){return"<!-- ignore asset ".concat(e||"file"," replaced by import-html-entry -->")},y1=function(e,n){return"<!-- ".concat(n?"nomodule":"module"," script ").concat(e," ignored by import-html-entry -->")};function p4(t,e,n){var r=[],i=[],o=null,s=HU(),l=t.replace(a4,"").replace(n4,function(c){var u=!!c.match(s4);if(u){var f=c.match(l4),d=c.match(c4);if(f){var p=f&&f[2],h=p;return p&&!m1(p)&&(h=g1(p,e)),d?fc(h):(h=d1(h),i.push(h),Lu(h))}}var m=c.match(r4)&&c.match(p1)&&!c.match(i4);if(m){var y=c.match(p1),g=sy(y,3),v=g[2];return Lu(v,!0)}return c}).replace(o4,function(c){return u4.test(c)?fc("style file"):c}).replace(qU,function(c,u){var f=u.match(f4),d=s&&!!u.match(e4)||!s&&!!u.match(t4),p=u.match(YU),h=p&&p[2];if(!d4(h))return c;if(JU.test(c)&&u.match(h1)){var m=u.match(QU),y=u.match(h1),g=y&&y[2];if(o&&m)throw new SyntaxError("You should not set multiply entry script!");if(g&&(m1(g)||(g=g1(g,e)),g=d1(g)),o=o||m&&g,f)return fc(g||"js file");if(d)return y1(g||"js file",s);if(g){var v=!!u.match(XU),w=!!u.match(ZU);return r.push(v||w?{async:v,src:g,crossOrigin:w}:g),sT(g,v,w)}return c}else{if(f)return fc("js file");if(d)return y1("js file",s);var S=ly(c),k=S.split(/[\r\n]+/).every(function(b){return!b.trim()||b.trim().startsWith("//")});return k||r.push(c),h4}});r=r.filter(function(c){return!!c});var a={template:l,scripts:r,styles:i,entry:o||r[r.length-1]};return typeof n=="function"&&(a=n(a)),a}function v1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v1(Object(n),!0).forEach(function(r){Zn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var w1={},S1={},b1={};if(!window.fetch)throw new Error('[import-html-entry] Here is no "fetch" on the window env, you need to polyfill it');var Ji=window.fetch.bind(window);function qp(t){return t}function aT(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.fetch,i=r===void 0?Ji:r,o=t;return ay(e,i).then(function(s){return o=s.reduce(function(l,a){var c=a.src,u=a.value;return l=l.replace(Lu(c),Hf(c)?"".concat(c):"<style>/* ".concat(c," */").concat(u,"</style>")),l},o),o})}var Hf=function(e){return e.startsWith("<")};function m4(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.proxy,i=n.strictGlobal,o=n.scopedGlobalVariables,s=o===void 0?[]:o,l=Hf(t)?"":"//# sourceURL=".concat(t,`
`),a=s.length?"const {".concat(s.join(","),"}=this;"):"",c=(0,eval)("window");return c.proxy=r,i?a?";(function(){with(this){".concat(a).concat(e,`
`).concat(l,"}}).bind(window.proxy)();"):";(function(window, self, globalThis){with(window){;".concat(e,`
`).concat(l,"}}).bind(window.proxy)(window.proxy, window.proxy, window.proxy);"):";(function(window, self, globalThis){;".concat(e,`
`).concat(l,"}).bind(window.proxy)(window.proxy, window.proxy, window.proxy);")}function ay(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ji;return iT(t.map(function(){var n=X(N.mark(function r(i){return N.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!Hf(i)){s.next=4;break}return s.abrupt("return",ly(i));case 4:return s.abrupt("return",w1[i]||(w1[i]=e(i).then(function(l){if(l.status>=400)throw new Error("".concat(i," load failed with status ").concat(l.status));return l.text()}).catch(function(l){try{l.message.indexOf(i)===-1&&(l.message="".concat(i," ").concat(l.message))}catch{}throw l})));case 5:case"end":return s.stop()}},r)}));return function(r){return n.apply(this,arguments)}}())).then(function(n){return n.map(function(r,i){return r.status==="fulfilled"&&(r.value={src:t[i],value:r.value}),r}).filter(function(r){return r.status==="rejected"&&Promise.reject(r.reason),r.status==="fulfilled"}).map(function(r){return r.value})})}function cy(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ji,n=arguments.length>2?arguments[2]:void 0,r=function(s,l){return S1[s]||(S1[s]=e(s,l).then(function(a){if(a.status>=400)throw new Error("".concat(s," load failed with status ").concat(a.status));return a.text()}).catch(function(a){try{a.message.indexOf(s)===-1&&(a.message="".concat(s," ").concat(a.message))}catch{}throw a}))},i=function(s){return t[s]===n};return iT(t.map(function(){var o=X(N.mark(function s(l){var a,c,u,f;return N.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(typeof l!="string"){p.next=8;break}if(!Hf(l)){p.next=5;break}return p.abrupt("return",ly(l));case 5:return p.abrupt("return",r(l));case 6:p.next=13;break;case 8:if(a=l.src,c=l.async,u=l.crossOrigin,f=u?{credentials:"include"}:{},!c){p.next=12;break}return p.abrupt("return",{src:a,async:!0,content:new Promise(function(h,m){return WU(function(){return r(a,f).then(h,m)})})});case 12:return p.abrupt("return",r(a,f));case 13:case"end":return p.stop()}},s)}));return function(s){return o.apply(this,arguments)}}()),i).then(function(o){return o.map(function(s,l){return s.status==="fulfilled"&&(s.value={src:t[l],value:s.value}),s}).filter(function(s){return s.status==="rejected"&&Promise.reject(s.reason),s.status==="fulfilled"}).map(function(s){return s.value})})}function k1(t,e){setTimeout(function(){throw console.error(e),t})}function $u(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:window,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=r.fetch,o=i===void 0?Ji:i,s=r.strictGlobal,l=s===void 0?!1:s,a=r.success,c=r.error,u=c===void 0?function(){}:c,f=r.beforeExec,d=f===void 0?function(){}:f,p=r.afterExec,h=p===void 0?function(){}:p,m=r.scopedGlobalVariables,y=m===void 0?[]:m;return cy(e,o,t).then(function(g){var v=function(b,C){var E=d(C,b)||C,x=m4(b,E,{proxy:n,strictGlobal:l,scopedGlobalVariables:y});KU(b,x),h(C,b)};function w(k,b,C){if(k===t){UU(l?n:window);try{v(k,b);var E=n[zU(l?n:window)]||{};C(E)}catch(x){throw console.error("[import-html-entry]: error occurs while executing entry script ".concat(k)),x}}else if(typeof b=="string")try{k!=null&&k.src?v(k.src,b):v(k,b)}catch(x){k1(x,"[import-html-entry]: error occurs while executing normal script ".concat(k))}else b.async&&(b==null||b.content.then(function(x){return v(b.src,x)}).catch(function(x){k1(x,"[import-html-entry]: error occurs while executing async script ".concat(b.src))}))}function S(k,b){if(k<g.length){var C=g[k],E=C.src,x=C.value;w(E,x,b),!t&&k===g.length-1?b():S(k+1,b)}}return new Promise(function(k){return S(0,a||k)})}).catch(function(g){throw u(),g})}function g4(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=Ji,r=!1,i=Kp,o=qp,s=e.postProcessTemplate;return typeof e=="function"?n=e:(e.fetch&&(typeof e.fetch=="function"?n=e.fetch:(n=e.fetch.fn||Ji,r=!!e.fetch.autoDecodeResponse)),i=e.getPublicPath||e.getDomain||Kp,o=e.getTemplate||qp),b1[t]||(b1[t]=n(t).then(function(l){return GU(l,r)}).then(function(l){var a=i(t),c=p4(o(l),a,s),u=c.template,f=c.scripts,d=c.entry,p=c.styles;return aT(u,p,{fetch:n}).then(function(h){return{template:h,assetPublicPath:a,getExternalScripts:function(){return cy(f,n)},getExternalStyleSheets:function(){return ay(p,n)},execScripts:function(y,g){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return f.length?$u(d,f,y,lT({fetch:n,strictGlobal:g},v)):Promise.resolve()}}})}))}function cT(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.fetch,r=n===void 0?Ji:n,i=e.getTemplate,o=i===void 0?qp:i,s=e.postProcessTemplate,l=e.getPublicPath||e.getDomain||Kp;if(!t)throw new SyntaxError("entry should not be empty!");if(typeof t=="string")return g4(t,{fetch:r,getPublicPath:l,getTemplate:o,postProcessTemplate:s});if(Array.isArray(t.scripts)||Array.isArray(t.styles)){var a=t.scripts,c=a===void 0?[]:a,u=t.styles,f=u===void 0?[]:u,d=t.html,p=d===void 0?"":d,h=function(g){return f.reduceRight(function(v,w){return"".concat(Lu(w)).concat(v)},g)},m=function(g){return c.reduce(function(v,w){return"".concat(v).concat(sT(w))},g)};return aT(o(m(h(p))),f,{fetch:r}).then(function(y){return{template:y,assetPublicPath:l(t),getExternalScripts:function(){return cy(c,r)},getExternalStyleSheets:function(){return ay(f,r)},execScripts:function(v,w){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return c.length?$u(c[c.length-1],c,v,lT({fetch:r,strictGlobal:w},S)):Promise.resolve()}}})}else throw new SyntaxError("entry scripts or styles should be array!")}function y4(t){return{beforeLoad:function(){return X(N.mark(function n(){return N.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:t.__POWERED_BY_QIANKUN__=!0;case 1:case"end":return i.stop()}},n)}))()},beforeMount:function(){return X(N.mark(function n(){return N.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:t.__POWERED_BY_QIANKUN__=!0;case 1:case"end":return i.stop()}},n)}))()},beforeUnmount:function(){return X(N.mark(function n(){return N.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:delete t.__POWERED_BY_QIANKUN__;case 1:case"end":return i.stop()}},n)}))()}}}var C1=window.__INJECTED_PUBLIC_PATH_BY_QIANKUN__;function v4(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"/",n=!1;return{beforeLoad:function(){return X(N.mark(function i(){return N.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:t.__INJECTED_PUBLIC_PATH_BY_QIANKUN__=e;case 1:case"end":return s.stop()}},i)}))()},beforeMount:function(){return X(N.mark(function i(){return N.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:n&&(t.__INJECTED_PUBLIC_PATH_BY_QIANKUN__=e);case 1:case"end":return s.stop()}},i)}))()},beforeUnmount:function(){return X(N.mark(function i(){return N.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:C1===void 0?delete t.__INJECTED_PUBLIC_PATH_BY_QIANKUN__:t.__INJECTED_PUBLIC_PATH_BY_QIANKUN__=C1,n=!0;case 2:case"end":return s.stop()}},i)}))()}}}function w4(t,e){return nT({},y4(t),v4(t,e),function(n,r){return Lx(n??[],r??[])})}function E1(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,YE(r.key),r)}}function Os(t,e,n){return e&&E1(t.prototype,e),n&&E1(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function As(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ta(t,e){return ta=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},ta(t,e)}function S4(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ta(t,e)}function na(t){return na=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},na(t)}function uy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uy=function(){return!!t})()}function b4(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k4(t,e){if(e&&(st(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b4(t)}function C4(t){var e=uy();return function(){var n,r=na(t);if(e){var i=na(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return k4(this,n)}}function E4(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function x4(t,e,n){if(uy())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var i=new(t.bind.apply(t,r));return n&&ta(i,n.prototype),i}function Jp(t){var e=typeof Map=="function"?new Map:void 0;return Jp=function(r){if(r===null||!E4(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return x4(r,arguments,na(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),ta(i,r)},Jp(t)}var ra=function(t){S4(n,t);var e=C4(n);function n(r){return As(this,n),e.call(this,"[qiankun]: ".concat(r))}return Os(n)}(Jp(Error)),T4=Ma,M4=Uf;function O4(t,e){return t&&T4(e,M4(e),t)}var A4=O4,D4=Ma,_4=Oa;function P4(t,e){return t&&D4(e,_4(e),t)}var N4=P4;function I4(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}var R4=I4;function L4(){return[]}var uT=L4,$4=R4,B4=uT,F4=Object.prototype,j4=F4.propertyIsEnumerable,x1=Object.getOwnPropertySymbols,V4=x1?function(t){return t==null?[]:(t=Object(t),$4(x1(t),function(e){return j4.call(t,e)}))}:B4,fy=V4,z4=Ma,U4=fy;function H4(t,e){return z4(t,U4(t),e)}var W4=H4,G4=Rf,K4=ty,q4=fy,J4=uT,Y4=Object.getOwnPropertySymbols,Q4=Y4?function(t){for(var e=[];t;)G4(e,q4(t)),t=K4(t);return e}:J4,fT=Q4,X4=Ma,Z4=fT;function eH(t,e){return X4(t,Z4(t),e)}var tH=eH,nH=Rf,rH=ci;function iH(t,e,n){var r=e(t);return rH(t)?r:nH(r,n(t))}var dT=iH,oH=dT,sH=fy,lH=Uf;function aH(t){return oH(t,lH,sH)}var cH=aH,uH=dT,fH=fT,dH=Oa;function hH(t){return uH(t,dH,fH)}var pH=hH,mH=ro,gH=Bn,yH=mH(gH,"DataView"),vH=yH,wH=ro,SH=Bn,bH=wH(SH,"Promise"),kH=bH,CH=ro,EH=Bn,xH=CH(EH,"Set"),TH=xH,MH=ro,OH=Bn,AH=MH(OH,"WeakMap"),DH=AH,Yp=vH,Qp=Qg,Xp=kH,Zp=TH,em=DH,hT=Cs,Ds=$x,T1="[object Map]",_H="[object Object]",M1="[object Promise]",O1="[object Set]",A1="[object WeakMap]",D1="[object DataView]",PH=Ds(Yp),NH=Ds(Qp),IH=Ds(Xp),RH=Ds(Zp),LH=Ds(em),yi=hT;(Yp&&yi(new Yp(new ArrayBuffer(1)))!=D1||Qp&&yi(new Qp)!=T1||Xp&&yi(Xp.resolve())!=M1||Zp&&yi(new Zp)!=O1||em&&yi(new em)!=A1)&&(yi=function(t){var e=hT(t),n=e==_H?t.constructor:void 0,r=n?Ds(n):"";if(r)switch(r){case PH:return D1;case NH:return T1;case IH:return M1;case RH:return O1;case LH:return A1}return e});var dy=yi,$H=Object.prototype,BH=$H.hasOwnProperty;function FH(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&BH.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var jH=FH,VH=ey;function zH(t,e){var n=e?VH(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var UH=zH,HH=/\w*$/;function WH(t){var e=new t.constructor(t.source,HH.exec(t));return e.lastIndex=t.lastIndex,e}var GH=WH,_1=xa,P1=_1?_1.prototype:void 0,N1=P1?P1.valueOf:void 0;function KH(t){return N1?Object(N1.call(t)):{}}var qH=KH,JH=ey,YH=UH,QH=GH,XH=qH,ZH=Ux,e8="[object Boolean]",t8="[object Date]",n8="[object Map]",r8="[object Number]",i8="[object RegExp]",o8="[object Set]",s8="[object String]",l8="[object Symbol]",a8="[object ArrayBuffer]",c8="[object DataView]",u8="[object Float32Array]",f8="[object Float64Array]",d8="[object Int8Array]",h8="[object Int16Array]",p8="[object Int32Array]",m8="[object Uint8Array]",g8="[object Uint8ClampedArray]",y8="[object Uint16Array]",v8="[object Uint32Array]";function w8(t,e,n){var r=t.constructor;switch(e){case a8:return JH(t);case e8:case t8:return new r(+t);case c8:return YH(t,n);case u8:case f8:case d8:case h8:case p8:case m8:case g8:case y8:case v8:return ZH(t,n);case n8:return new r;case r8:case s8:return new r(t);case i8:return QH(t);case o8:return new r;case l8:return XH(t)}}var S8=w8,b8=dy,k8=ai,C8="[object Map]";function E8(t){return k8(t)&&b8(t)==C8}var x8=E8,T8=x8,M8=zf,I1=iy,R1=I1&&I1.isMap,O8=R1?M8(R1):T8,A8=O8,D8=dy,_8=ai,P8="[object Set]";function N8(t){return _8(t)&&D8(t)==P8}var I8=N8,R8=I8,L8=zf,L1=iy,$1=L1&&L1.isSet,$8=$1?L8($1):R8,B8=$8,F8=Bx,j8=rT,V8=Qx,z8=A4,U8=N4,H8=zx,W8=Yg,G8=W4,K8=tH,q8=cH,J8=pH,Y8=dy,Q8=jH,X8=S8,Z8=Wx,eW=ci,tW=ry,nW=A8,rW=cr,iW=B8,oW=Uf,sW=Oa,lW=1,aW=2,cW=4,pT="[object Arguments]",uW="[object Array]",fW="[object Boolean]",dW="[object Date]",hW="[object Error]",mT="[object Function]",pW="[object GeneratorFunction]",mW="[object Map]",gW="[object Number]",gT="[object Object]",yW="[object RegExp]",vW="[object Set]",wW="[object String]",SW="[object Symbol]",bW="[object WeakMap]",kW="[object ArrayBuffer]",CW="[object DataView]",EW="[object Float32Array]",xW="[object Float64Array]",TW="[object Int8Array]",MW="[object Int16Array]",OW="[object Int32Array]",AW="[object Uint8Array]",DW="[object Uint8ClampedArray]",_W="[object Uint16Array]",PW="[object Uint32Array]",se={};se[pT]=se[uW]=se[kW]=se[CW]=se[fW]=se[dW]=se[EW]=se[xW]=se[TW]=se[MW]=se[OW]=se[mW]=se[gW]=se[gT]=se[yW]=se[vW]=se[wW]=se[SW]=se[AW]=se[DW]=se[_W]=se[PW]=!0;se[hW]=se[mT]=se[bW]=!1;function Bc(t,e,n,r,i,o){var s,l=e&lW,a=e&aW,c=e&cW;if(n&&(s=i?n(t,r,i,o):n(t)),s!==void 0)return s;if(!rW(t))return t;var u=eW(t);if(u){if(s=Q8(t),!l)return W8(t,s)}else{var f=Y8(t),d=f==mT||f==pW;if(tW(t))return H8(t,l);if(f==gT||f==pT||d&&!i){if(s=a||d?{}:Z8(t),!l)return a?K8(t,U8(s,t)):G8(t,z8(s,t))}else{if(!se[f])return i?t:{};s=X8(t,f,l)}}o||(o=new F8);var p=o.get(t);if(p)return p;o.set(t,s),iW(t)?t.forEach(function(y){s.add(Bc(y,e,n,y,t,o))}):nW(t)&&t.forEach(function(y,g){s.set(g,Bc(y,e,n,g,t,o))});var h=c?a?J8:q8:a?sW:oW,m=u?void 0:h(t);return j8(m||t,function(y,g){m&&(g=y,y=t[g]),V8(s,g,Bc(y,e,n,g,t,o))}),s}var NW=Bc,IW=NW,RW=1,LW=4;function $W(t){return IW(t,RW|LW)}var BW=$W;const yl=$t(BW);var uo={},jo={};function FW(t,e){Object.keys(jo).forEach(function(n){jo[n]instanceof Function&&jo[n](yl(t),yl(e))})}function jW(t,e){return{onGlobalStateChange:function(r,i){if(!(r instanceof Function)){console.error("[qiankun] callback must be function!");return}if(jo[t]&&console.warn("[qiankun] '".concat(t,"' global listener already exists before this, new listener will overwrite it.")),jo[t]=r,i){var o=yl(uo);r(o,o)}},setGlobalState:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(r===uo)return console.warn("[qiankun] state has not changed！"),!1;var i=[],o=yl(uo);return uo=yl(Object.keys(r).reduce(function(s,l){return e||s.hasOwnProperty(l)?(i.push(l),Object.assign(s,Zn({},l,r[l]))):(console.warn("[qiankun] '".concat(l,"' not declared when init state！")),s)},uo)),i.length===0?(console.warn("[qiankun] state has not changed！"),!1):(FW(uo,o),!0)},offGlobalStateChange:function(){return delete jo[t],!0}}}var pn;(function(t){t.Proxy="Proxy",t.Snapshot="Snapshot",t.LegacyProxy="LegacyProxy"})(pn||(pn={}));var VW=/\s/;function zW(t){for(var e=t.length;e--&&VW.test(t.charAt(e)););return e}var UW=zW,HW=UW,WW=/^\s+/;function GW(t){return t&&t.slice(0,HW(t)+1).replace(WW,"")}var KW=GW,qW=Cs,JW=ai,YW="[object Symbol]";function QW(t){return typeof t=="symbol"||JW(t)&&qW(t)==YW}var yT=QW,XW=KW,B1=cr,ZW=yT,F1=0/0,e6=/^[-+]0x[0-9a-f]+$/i,t6=/^0b[01]+$/i,n6=/^0o[0-7]+$/i,r6=parseInt;function i6(t){if(typeof t=="number")return t;if(ZW(t))return F1;if(B1(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=B1(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=XW(t);var n=t6.test(t);return n||n6.test(t)?r6(t.slice(2),n?2:8):e6.test(t)?F1:+t}var o6=i6,s6=o6,j1=1/0,l6=17976931348623157e292;function a6(t){if(!t)return t===0?t:0;if(t=s6(t),t===j1||t===-j1){var e=t<0?-1:1;return e*l6}return t===t?t:0}var c6=a6,u6=c6;function f6(t){var e=u6(t),n=e%1;return e===e?n?e-n:e:0}var d6=f6,h6=d6,p6="Expected a function";function m6(t,e){var n;if(typeof e!="function")throw new TypeError(p6);return t=h6(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}}var g6=m6,y6=g6;function v6(t){return y6(2,t)}var w6=v6;const S6=$t(w6);function b6(t,e,n,r){var i=-1,o=t==null?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}var k6=b6;function C6(t){return function(e){return t==null?void 0:t[e]}}var E6=C6,x6=E6,T6={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},M6=x6(T6),O6=M6;function A6(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var vT=A6,V1=xa,D6=vT,_6=ci,P6=yT,N6=1/0,z1=V1?V1.prototype:void 0,U1=z1?z1.toString:void 0;function wT(t){if(typeof t=="string")return t;if(_6(t))return D6(t,wT)+"";if(P6(t))return U1?U1.call(t):"";var e=t+"";return e=="0"&&1/t==-N6?"-0":e}var I6=wT,R6=I6;function L6(t){return t==null?"":R6(t)}var ST=L6,$6=O6,B6=ST,F6=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,j6="\\u0300-\\u036f",V6="\\ufe20-\\ufe2f",z6="\\u20d0-\\u20ff",U6=j6+V6+z6,H6="["+U6+"]",W6=RegExp(H6,"g");function G6(t){return t=B6(t),t&&t.replace(F6,$6).replace(W6,"")}var K6=G6,q6=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function J6(t){return t.match(q6)||[]}var Y6=J6,Q6=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function X6(t){return Q6.test(t)}var Z6=X6,bT="\\ud800-\\udfff",eG="\\u0300-\\u036f",tG="\\ufe20-\\ufe2f",nG="\\u20d0-\\u20ff",rG=eG+tG+nG,kT="\\u2700-\\u27bf",CT="a-z\\xdf-\\xf6\\xf8-\\xff",iG="\\xac\\xb1\\xd7\\xf7",oG="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",sG="\\u2000-\\u206f",lG=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ET="A-Z\\xc0-\\xd6\\xd8-\\xde",aG="\\ufe0e\\ufe0f",xT=iG+oG+sG+lG,TT="['’]",H1="["+xT+"]",cG="["+rG+"]",MT="\\d+",uG="["+kT+"]",OT="["+CT+"]",AT="[^"+bT+xT+MT+kT+CT+ET+"]",fG="\\ud83c[\\udffb-\\udfff]",dG="(?:"+cG+"|"+fG+")",hG="[^"+bT+"]",DT="(?:\\ud83c[\\udde6-\\uddff]){2}",_T="[\\ud800-\\udbff][\\udc00-\\udfff]",po="["+ET+"]",pG="\\u200d",W1="(?:"+OT+"|"+AT+")",mG="(?:"+po+"|"+AT+")",G1="(?:"+TT+"(?:d|ll|m|re|s|t|ve))?",K1="(?:"+TT+"(?:D|LL|M|RE|S|T|VE))?",PT=dG+"?",NT="["+aG+"]?",gG="(?:"+pG+"(?:"+[hG,DT,_T].join("|")+")"+NT+PT+")*",yG="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",vG="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",wG=NT+PT+gG,SG="(?:"+[uG,DT,_T].join("|")+")"+wG,bG=RegExp([po+"?"+OT+"+"+G1+"(?="+[H1,po,"$"].join("|")+")",mG+"+"+K1+"(?="+[H1,po+W1,"$"].join("|")+")",po+"?"+W1+"+"+G1,po+"+"+K1,vG,yG,MT,SG].join("|"),"g");function kG(t){return t.match(bG)||[]}var CG=kG,EG=Y6,xG=Z6,TG=ST,MG=CG;function OG(t,e,n){return t=TG(t),e=n?void 0:e,e===void 0?xG(t)?MG(t):EG(t):t.match(e)||[]}var AG=OG,DG=k6,_G=K6,PG=AG,NG="['’]",IG=RegExp(NG,"g");function RG(t){return function(e){return DG(PG(_G(e).replace(IG,"")),t,"")}}var LG=RG,$G=LG,BG=$G(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),FG=BG;const jG=$t(FG);var IT=Xg,VG="Expected a function";function hy(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(VG);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(hy.Cache||IT),n}hy.Cache=IT;var zG=hy;const UG=$t(zG);var HG="2.10.16";function Si(t){return Array.isArray(t)?t:[t]}var WG=typeof window.__zone_symbol__setTimeout=="function"?window.__zone_symbol__setTimeout:function(t){return Promise.resolve().then(t)},nh=!1;function GG(t){nh||(nh=!0,WG(function(){t(),nh=!1}))}var rh=new WeakMap;function KG(t){var e=t.prototype&&t.prototype.constructor===t&&Object.getOwnPropertyNames(t.prototype).length>1;if(e)return!0;if(rh.has(t))return rh.get(t);var n=e;if(!n){var r=t.toString(),i=/^function\b\s[A-Z].*/,o=/^class\b/;n=i.test(r)||o.test(r)}return rh.set(t,n),n}var q1=new WeakMap;function RT(t){if(q1.has(t))return!0;var e=typeof t=="function"&&t instanceof Function;return e&&q1.set(t,e),e}var J1=new WeakMap;function qG(t,e){if(!t||!e)return!1;var n=J1.get(t)||{};if(n[e])return n[e];var r=Object.getOwnPropertyDescriptor(t,e),i=!!(r&&r.configurable===!1&&(r.writable===!1||r.get&&!r.set));return n[e]=i,J1.set(t,n),i}var ih=new WeakMap;function LT(t){if(ih.has(t))return ih.get(t);var e=t.name.indexOf("bound ")===0&&!t.hasOwnProperty("prototype");return ih.set(t,e),e}var JG=UG(function(){try{return new Function("const { a } = { a: 1 }")(),!0}catch{return!1}}),nl="qiankun-head";function YG(t,e){return function(n){var r;return n.indexOf("<head>")!==-1?r=n.replace("<head>","<".concat(nl,">")).replace("</head>","</".concat(nl,">")):r="<".concat(nl,"></").concat(nl,">").concat(n),'<div id="'.concat($T(t),'" data-name="').concat(t,'" data-version="').concat(HG,'" data-sandbox-cfg=').concat(JSON.stringify(e),">").concat(r,"</div>")}}function $T(t){return"__qiankun_microapp_wrapper_for_".concat(jG(t),"__")}var Ct=new Function("return this")(),Y1=new Function("return document")(),QG=S6(function(){return Ct.hasOwnProperty("__app_instance_name_map__")||Object.defineProperty(Ct,"__app_instance_name_map__",{enumerable:!1,configurable:!0,writable:!0,value:{}}),Ct.__app_instance_name_map__}),XG=function(e){var n=QG();return e in n?(n[e]++,"".concat(e,"_").concat(n[e])):(Ct.__app_instance_name_map__[e]=0,e)};function oh(t){var e=t??{},n=e.bootstrap,r=e.mount,i=e.unmount;return Hr(n)&&Hr(r)&&Hr(i)}var BT=Os(function t(){var e=this;As(this,t),this.promise=void 0,this.resolve=void 0,this.reject=void 0,this.promise=new Promise(function(n,r){e.resolve=n,e.reject=r})});function ZG(t){return st(t)!=="object"||t.strictStyleIsolation?!1:!!t.experimentalStyleIsolation}function e5(t,e){if(e.body.contains(t)){for(var n="",r,i,o=t;o!==e.documentElement;){for(r=0,i=o;i;)i.nodeType===1&&i.nodeName===o.nodeName&&(r+=1),i=i.previousSibling;n="*[name()='".concat(o.nodeName,"'][").concat(r,"]/").concat(n),o=o.parentNode}return n="/*[name()='".concat(e.documentElement.nodeName,"']/").concat(n),n=n.replace(/\/$/,""),n}}function FT(t){return typeof t=="string"?document.querySelector(t):t}function t5(t){if(t){var e=FT(t);if(e)return e5(e,document)}}var py=null;function tm(){return py}function n5(t){py=t}function r5(){py=null}var Q1=new WeakMap;function jT(t,e){if(RT(e)&&!LT(e)&&!KG(e)){var n=Q1.get(e);if(n)return n;var r=Function.prototype.bind.call(e,t);if(Object.getOwnPropertyNames(e).forEach(function(l){r.hasOwnProperty(l)||Object.defineProperty(r,l,Object.getOwnPropertyDescriptor(e,l))}),e.hasOwnProperty("prototype")&&!r.hasOwnProperty("prototype")&&Object.defineProperty(r,"prototype",{value:e.prototype,enumerable:!1,writable:!0}),typeof e.toString=="function"){var i=e.hasOwnProperty("toString")&&!r.hasOwnProperty("toString"),o=r.toString===Function.prototype.toString;if(i||o){var s=Object.getOwnPropertyDescriptor(i?e:Function.prototype,"toString");Object.defineProperty(r,"toString",Object.assign({},s,s!=null&&s.get?null:{value:function(){return e.toString()}}))}}return Q1.set(e,r),r}return e}function i5(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return n?n.configurable:!0}var o5=function(){function t(e){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;As(this,t),this.addedPropsMapInSandbox=new Map,this.modifiedPropsOriginalValueMapInSandbox=new Map,this.currentUpdatedPropsValueMap=new Map,this.name=void 0,this.proxy=void 0,this.globalContext=void 0,this.type=void 0,this.sandboxRunning=!0,this.latestSetProp=null,this.name=e,this.globalContext=r,this.type=pn.LegacyProxy;var i=this.addedPropsMapInSandbox,o=this.modifiedPropsOriginalValueMapInSandbox,s=this.currentUpdatedPropsValueMap,l=r,a=Object.create(null),c=function(d,p,h){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;return n.sandboxRunning&&(l.hasOwnProperty(d)?o.has(d)||o.set(d,h):i.set(d,p),s.set(d,p),m&&(l[d]=p),n.latestSetProp=d),!0},u=new Proxy(a,{set:function(d,p,h){var m=l[p];return c(p,h,m,!0)},get:function(d,p){if(p==="top"||p==="parent"||p==="window"||p==="self")return u;var h=l[p];return jT(l,h)},has:function(d,p){return p in l},getOwnPropertyDescriptor:function(d,p){var h=Object.getOwnPropertyDescriptor(l,p);return h&&!h.configurable&&(h.configurable=!0),h},defineProperty:function(d,p,h){var m=l[p],y=Reflect.defineProperty(l,p,h),g=l[p];return c(p,g,m,!1),y}});this.proxy=u}return Os(t,[{key:"setWindowProp",value:function(n,r,i){r===void 0&&i?delete this.globalContext[n]:i5(this.globalContext,n)&&st(n)!=="symbol"&&(Object.defineProperty(this.globalContext,n,{writable:!0,configurable:!0}),this.globalContext[n]=r)}},{key:"active",value:function(){var n=this;this.sandboxRunning||this.currentUpdatedPropsValueMap.forEach(function(r,i){return n.setWindowProp(i,r)}),this.sandboxRunning=!0}},{key:"inactive",value:function(){var n=this;this.modifiedPropsOriginalValueMapInSandbox.forEach(function(r,i){return n.setWindowProp(i,r)}),this.addedPropsMapInSandbox.forEach(function(r,i){return n.setWindowProp(i,void 0,!0)}),this.sandboxRunning=!1}},{key:"patchDocument",value:function(){}}]),t}(),vl;(function(t){t[t.STYLE=1]="STYLE",t[t.MEDIA=4]="MEDIA",t[t.SUPPORTS=12]="SUPPORTS",t[t.IMPORT=3]="IMPORT",t[t.FONT_FACE=5]="FONT_FACE",t[t.PAGE=6]="PAGE",t[t.KEYFRAMES=7]="KEYFRAMES",t[t.KEYFRAME=8]="KEYFRAME"})(vl||(vl={}));var dc=function(e){return[].slice.call(e,0)},s5=HTMLBodyElement.prototype.appendChild,VT=function(){function t(){As(this,t),this.sheet=void 0,this.swapNode=void 0;var e=document.createElement("style");s5.call(document.body,e),this.swapNode=e,this.sheet=e.sheet,this.sheet.disabled=!0}return Os(t,[{key:"process",value:function(n){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(!(t.ModifiedTag in n)){if(n.textContent!==""){var o,s=document.createTextNode(n.textContent||"");this.swapNode.appendChild(s);var l=this.swapNode.sheet,a=dc((o=l==null?void 0:l.cssRules)!==null&&o!==void 0?o:[]),c=this.rewrite(a,i);n.textContent=c,this.swapNode.removeChild(s),n[t.ModifiedTag]=!0;return}var u=new MutationObserver(function(f){for(var d=0;d<f.length;d+=1){var p=f[d];if(t.ModifiedTag in n)return;if(p.type==="childList"){var h,m=n.sheet,y=dc((h=m==null?void 0:m.cssRules)!==null&&h!==void 0?h:[]),g=r.rewrite(y,i);n.textContent=g,n[t.ModifiedTag]=!0}}});u.observe(n,{childList:!0})}}},{key:"rewrite",value:function(n){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",o="";return n.forEach(function(s){switch(s.type){case vl.STYLE:o+=r.ruleStyle(s,i);break;case vl.MEDIA:o+=r.ruleMedia(s,i);break;case vl.SUPPORTS:o+=r.ruleSupport(s,i);break;default:typeof s.cssText=="string"&&(o+="".concat(s.cssText));break}}),o}},{key:"ruleStyle",value:function(n,r){var i=/((?:[^\w\-.#]|^)(body|html|:root))/gm,o=/(html[^\w{[]+)/gm,s=n.selectorText.trim(),l="";if(typeof n.cssText=="string"&&(l=n.cssText),s==="html"||s==="body"||s===":root")return l.replace(i,r);if(o.test(n.selectorText)){var a=/(html[^\w{]+)(\+|~)/gm;a.test(n.selectorText)||(l=l.replace(o,""))}return l=l.replace(/^[\s\S]+{/,function(c){return c.replace(/(^|,\n?)([^,]+)/g,function(u,f,d){return i.test(u)?u.replace(i,function(p){var h=[",","("];return p&&h.includes(p[0])?"".concat(p[0]).concat(r):r}):"".concat(f).concat(r," ").concat(d.replace(/^ */,""))})}),l}},{key:"ruleMedia",value:function(n,r){var i=this.rewrite(dc(n.cssRules),r);return"@media ".concat(n.conditionText||n.media.mediaText," {").concat(i,"}")}},{key:"ruleSupport",value:function(n,r){var i=this.rewrite(dc(n.cssRules),r);return"@supports ".concat(n.conditionText||n.cssText.split("{")[0]," {").concat(i,"}")}}]),t}();VT.ModifiedTag="Symbol(style-modified-qiankun)";var sh,nm="data-qiankun",rm=function(e,n,r){sh||(sh=new VT),n.tagName==="LINK"&&console.warn("Feature: sandbox.experimentalStyleIsolation is not support for link element yet.");var i=e;if(i){var o=(i.tagName||"").toLowerCase();if(o&&n.tagName==="STYLE"){var s="".concat(o,"[").concat(nm,'="').concat(r,'"]');sh.process(n,s)}}},l5="__lodash_hash_undefined__";function a5(t){return this.__data__.set(t,l5),this}var c5=a5;function u5(t){return this.__data__.has(t)}var f5=u5,d5=Xg,h5=c5,p5=f5;function Bu(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new d5;++e<n;)this.add(t[e])}Bu.prototype.add=Bu.prototype.push=h5;Bu.prototype.has=p5;var m5=Bu;function g5(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var y5=g5;function v5(t){return t!==t}var w5=v5;function S5(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var b5=S5,k5=y5,C5=w5,E5=b5;function x5(t,e,n){return e===e?E5(t,e,n):k5(t,C5,n)}var T5=x5,M5=T5;function O5(t,e){var n=t==null?0:t.length;return!!n&&M5(t,e,0)>-1}var A5=O5;function D5(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var _5=D5;function P5(t,e){return t.has(e)}var N5=P5,I5=m5,R5=A5,L5=_5,$5=vT,B5=zf,F5=N5,j5=200;function V5(t,e,n,r){var i=-1,o=R5,s=!0,l=t.length,a=[],c=e.length;if(!l)return a;n&&(e=$5(e,B5(n))),r?(o=L5,s=!1):e.length>=j5&&(o=F5,s=!1,e=new I5(e));e:for(;++i<l;){var u=t[i],f=n==null?u:n(u);if(u=r||u!==0?u:0,s&&f===f){for(var d=c;d--;)if(e[d]===f)continue e;a.push(u)}else o(e,f,r)||a.push(u)}return a}var z5=V5,U5=z5,H5=tT,W5=Kx,G5=H5(function(t,e){return W5(t)?U5(t,e):[]}),K5=G5;const zT=$t(K5);var q5=window.Proxy?["Array","ArrayBuffer","Boolean","constructor","DataView","Date","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","Error","escape","eval","EvalError","Float32Array","Float64Array","Function","hasOwnProperty","Infinity","Int16Array","Int32Array","Int8Array","isFinite","isNaN","isPrototypeOf","JSON","Map","Math","NaN","Number","Object","parseFloat","parseInt","Promise","propertyIsEnumerable","Proxy","RangeError","ReferenceError","Reflect","RegExp","Set","String","Symbol","SyntaxError","toLocaleString","toString","TypeError","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","undefined","unescape","URIError","valueOf","WeakMap","WeakSet"].filter(function(t){return t in window}):[],J5=["AbortController","AbortSignal","addEventListener","alert","AnalyserNode","Animation","AnimationEffectReadOnly","AnimationEffectTiming","AnimationEffectTimingReadOnly","AnimationEvent","AnimationPlaybackEvent","AnimationTimeline","applicationCache","ApplicationCache","ApplicationCacheErrorEvent","atob","Attr","Audio","AudioBuffer","AudioBufferSourceNode","AudioContext","AudioDestinationNode","AudioListener","AudioNode","AudioParam","AudioProcessingEvent","AudioScheduledSourceNode","AudioWorkletGlobalScope","AudioWorkletNode","AudioWorkletProcessor","BarProp","BaseAudioContext","BatteryManager","BeforeUnloadEvent","BiquadFilterNode","Blob","BlobEvent","blur","BroadcastChannel","btoa","BudgetService","ByteLengthQueuingStrategy","Cache","caches","CacheStorage","cancelAnimationFrame","cancelIdleCallback","CanvasCaptureMediaStreamTrack","CanvasGradient","CanvasPattern","CanvasRenderingContext2D","ChannelMergerNode","ChannelSplitterNode","CharacterData","clearInterval","clearTimeout","clientInformation","ClipboardEvent","ClipboardItem","close","closed","CloseEvent","Comment","CompositionEvent","CompressionStream","confirm","console","ConstantSourceNode","ConvolverNode","CountQueuingStrategy","createImageBitmap","Credential","CredentialsContainer","crypto","Crypto","CryptoKey","CSS","CSSConditionRule","CSSFontFaceRule","CSSGroupingRule","CSSImportRule","CSSKeyframeRule","CSSKeyframesRule","CSSMatrixComponent","CSSMediaRule","CSSNamespaceRule","CSSPageRule","CSSPerspective","CSSRotate","CSSRule","CSSRuleList","CSSScale","CSSSkew","CSSSkewX","CSSSkewY","CSSStyleDeclaration","CSSStyleRule","CSSStyleSheet","CSSSupportsRule","CSSTransformValue","CSSTranslate","CustomElementRegistry","customElements","CustomEvent","DataTransfer","DataTransferItem","DataTransferItemList","DecompressionStream","defaultstatus","defaultStatus","DelayNode","DeviceMotionEvent","DeviceOrientationEvent","devicePixelRatio","dispatchEvent","document","Document","DocumentFragment","DocumentType","DOMError","DOMException","DOMImplementation","DOMMatrix","DOMMatrixReadOnly","DOMParser","DOMPoint","DOMPointReadOnly","DOMQuad","DOMRect","DOMRectList","DOMRectReadOnly","DOMStringList","DOMStringMap","DOMTokenList","DragEvent","DynamicsCompressorNode","Element","ErrorEvent","event","Event","EventSource","EventTarget","external","fetch","File","FileList","FileReader","find","focus","FocusEvent","FontFace","FontFaceSetLoadEvent","FormData","FormDataEvent","frameElement","frames","GainNode","Gamepad","GamepadButton","GamepadEvent","getComputedStyle","getSelection","HashChangeEvent","Headers","history","History","HTMLAllCollection","HTMLAnchorElement","HTMLAreaElement","HTMLAudioElement","HTMLBaseElement","HTMLBodyElement","HTMLBRElement","HTMLButtonElement","HTMLCanvasElement","HTMLCollection","HTMLContentElement","HTMLDataElement","HTMLDataListElement","HTMLDetailsElement","HTMLDialogElement","HTMLDirectoryElement","HTMLDivElement","HTMLDListElement","HTMLDocument","HTMLElement","HTMLEmbedElement","HTMLFieldSetElement","HTMLFontElement","HTMLFormControlsCollection","HTMLFormElement","HTMLFrameElement","HTMLFrameSetElement","HTMLHeadElement","HTMLHeadingElement","HTMLHRElement","HTMLHtmlElement","HTMLIFrameElement","HTMLImageElement","HTMLInputElement","HTMLLabelElement","HTMLLegendElement","HTMLLIElement","HTMLLinkElement","HTMLMapElement","HTMLMarqueeElement","HTMLMediaElement","HTMLMenuElement","HTMLMetaElement","HTMLMeterElement","HTMLModElement","HTMLObjectElement","HTMLOListElement","HTMLOptGroupElement","HTMLOptionElement","HTMLOptionsCollection","HTMLOutputElement","HTMLParagraphElement","HTMLParamElement","HTMLPictureElement","HTMLPreElement","HTMLProgressElement","HTMLQuoteElement","HTMLScriptElement","HTMLSelectElement","HTMLShadowElement","HTMLSlotElement","HTMLSourceElement","HTMLSpanElement","HTMLStyleElement","HTMLTableCaptionElement","HTMLTableCellElement","HTMLTableColElement","HTMLTableElement","HTMLTableRowElement","HTMLTableSectionElement","HTMLTemplateElement","HTMLTextAreaElement","HTMLTimeElement","HTMLTitleElement","HTMLTrackElement","HTMLUListElement","HTMLUnknownElement","HTMLVideoElement","IDBCursor","IDBCursorWithValue","IDBDatabase","IDBFactory","IDBIndex","IDBKeyRange","IDBObjectStore","IDBOpenDBRequest","IDBRequest","IDBTransaction","IDBVersionChangeEvent","IdleDeadline","IIRFilterNode","Image","ImageBitmap","ImageBitmapRenderingContext","ImageCapture","ImageData","indexedDB","innerHeight","innerWidth","InputEvent","IntersectionObserver","IntersectionObserverEntry","Intl","isSecureContext","KeyboardEvent","KeyframeEffect","KeyframeEffectReadOnly","length","localStorage","location","Location","locationbar","matchMedia","MediaDeviceInfo","MediaDevices","MediaElementAudioSourceNode","MediaEncryptedEvent","MediaError","MediaKeyMessageEvent","MediaKeySession","MediaKeyStatusMap","MediaKeySystemAccess","MediaList","MediaMetadata","MediaQueryList","MediaQueryListEvent","MediaRecorder","MediaSettingsRange","MediaSource","MediaStream","MediaStreamAudioDestinationNode","MediaStreamAudioSourceNode","MediaStreamConstraints","MediaStreamEvent","MediaStreamTrack","MediaStreamTrackEvent","menubar","MessageChannel","MessageEvent","MessagePort","MIDIAccess","MIDIConnectionEvent","MIDIInput","MIDIInputMap","MIDIMessageEvent","MIDIOutput","MIDIOutputMap","MIDIPort","MimeType","MimeTypeArray","MouseEvent","moveBy","moveTo","MutationEvent","MutationObserver","MutationRecord","name","NamedNodeMap","NavigationPreloadManager","navigator","Navigator","NavigatorUAData","NetworkInformation","Node","NodeFilter","NodeIterator","NodeList","Notification","OfflineAudioCompletionEvent","OfflineAudioContext","offscreenBuffering","OffscreenCanvas","OffscreenCanvasRenderingContext2D","onabort","onafterprint","onanimationend","onanimationiteration","onanimationstart","onappinstalled","onauxclick","onbeforeinstallprompt","onbeforeprint","onbeforeunload","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextmenu","oncuechange","ondblclick","ondevicemotion","ondeviceorientation","ondeviceorientationabsolute","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","ongotpointercapture","onhashchange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onlanguagechange","onload","onloadeddata","onloadedmetadata","onloadstart","onlostpointercapture","onmessage","onmessageerror","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onoffline","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpointercancel","onpointerdown","onpointerenter","onpointerleave","onpointermove","onpointerout","onpointerover","onpointerup","onpopstate","onprogress","onratechange","onrejectionhandled","onreset","onresize","onscroll","onsearch","onseeked","onseeking","onselect","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","ontoggle","ontransitionend","onunhandledrejection","onunload","onvolumechange","onwaiting","onwheel","open","openDatabase","opener","Option","origin","OscillatorNode","outerHeight","outerWidth","OverconstrainedError","PageTransitionEvent","pageXOffset","pageYOffset","PannerNode","parent","Path2D","PaymentAddress","PaymentRequest","PaymentRequestUpdateEvent","PaymentResponse","performance","Performance","PerformanceEntry","PerformanceLongTaskTiming","PerformanceMark","PerformanceMeasure","PerformanceNavigation","PerformanceNavigationTiming","PerformanceObserver","PerformanceObserverEntryList","PerformancePaintTiming","PerformanceResourceTiming","PerformanceTiming","PeriodicWave","Permissions","PermissionStatus","personalbar","PhotoCapabilities","Plugin","PluginArray","PointerEvent","PopStateEvent","postMessage","Presentation","PresentationAvailability","PresentationConnection","PresentationConnectionAvailableEvent","PresentationConnectionCloseEvent","PresentationConnectionList","PresentationReceiver","PresentationRequest","print","ProcessingInstruction","ProgressEvent","PromiseRejectionEvent","prompt","PushManager","PushSubscription","PushSubscriptionOptions","queueMicrotask","RadioNodeList","Range","ReadableByteStreamController","ReadableStream","ReadableStreamBYOBReader","ReadableStreamBYOBRequest","ReadableStreamDefaultController","ReadableStreamDefaultReader","registerProcessor","RemotePlayback","removeEventListener","reportError","Request","requestAnimationFrame","requestIdleCallback","resizeBy","ResizeObserver","ResizeObserverEntry","resizeTo","Response","RTCCertificate","RTCDataChannel","RTCDataChannelEvent","RTCDtlsTransport","RTCIceCandidate","RTCIceGatherer","RTCIceTransport","RTCPeerConnection","RTCPeerConnectionIceEvent","RTCRtpContributingSource","RTCRtpReceiver","RTCRtpSender","RTCSctpTransport","RTCSessionDescription","RTCStatsReport","RTCTrackEvent","screen","Screen","screenLeft","ScreenOrientation","screenTop","screenX","screenY","ScriptProcessorNode","scroll","scrollbars","scrollBy","scrollTo","scrollX","scrollY","SecurityPolicyViolationEvent","Selection","self","ServiceWorker","ServiceWorkerContainer","ServiceWorkerRegistration","sessionStorage","setInterval","setTimeout","ShadowRoot","SharedWorker","SourceBuffer","SourceBufferList","speechSynthesis","SpeechSynthesisEvent","SpeechSynthesisUtterance","StaticRange","status","statusbar","StereoPannerNode","stop","Storage","StorageEvent","StorageManager","structuredClone","styleMedia","StyleSheet","StyleSheetList","SubmitEvent","SubtleCrypto","SVGAElement","SVGAngle","SVGAnimatedAngle","SVGAnimatedBoolean","SVGAnimatedEnumeration","SVGAnimatedInteger","SVGAnimatedLength","SVGAnimatedLengthList","SVGAnimatedNumber","SVGAnimatedNumberList","SVGAnimatedPreserveAspectRatio","SVGAnimatedRect","SVGAnimatedString","SVGAnimatedTransformList","SVGAnimateElement","SVGAnimateMotionElement","SVGAnimateTransformElement","SVGAnimationElement","SVGCircleElement","SVGClipPathElement","SVGComponentTransferFunctionElement","SVGDefsElement","SVGDescElement","SVGDiscardElement","SVGElement","SVGEllipseElement","SVGFEBlendElement","SVGFEColorMatrixElement","SVGFEComponentTransferElement","SVGFECompositeElement","SVGFEConvolveMatrixElement","SVGFEDiffuseLightingElement","SVGFEDisplacementMapElement","SVGFEDistantLightElement","SVGFEDropShadowElement","SVGFEFloodElement","SVGFEFuncAElement","SVGFEFuncBElement","SVGFEFuncGElement","SVGFEFuncRElement","SVGFEGaussianBlurElement","SVGFEImageElement","SVGFEMergeElement","SVGFEMergeNodeElement","SVGFEMorphologyElement","SVGFEOffsetElement","SVGFEPointLightElement","SVGFESpecularLightingElement","SVGFESpotLightElement","SVGFETileElement","SVGFETurbulenceElement","SVGFilterElement","SVGForeignObjectElement","SVGGElement","SVGGeometryElement","SVGGradientElement","SVGGraphicsElement","SVGImageElement","SVGLength","SVGLengthList","SVGLinearGradientElement","SVGLineElement","SVGMarkerElement","SVGMaskElement","SVGMatrix","SVGMetadataElement","SVGMPathElement","SVGNumber","SVGNumberList","SVGPathElement","SVGPatternElement","SVGPoint","SVGPointList","SVGPolygonElement","SVGPolylineElement","SVGPreserveAspectRatio","SVGRadialGradientElement","SVGRect","SVGRectElement","SVGScriptElement","SVGSetElement","SVGStopElement","SVGStringList","SVGStyleElement","SVGSVGElement","SVGSwitchElement","SVGSymbolElement","SVGTextContentElement","SVGTextElement","SVGTextPathElement","SVGTextPositioningElement","SVGTitleElement","SVGTransform","SVGTransformList","SVGTSpanElement","SVGUnitTypes","SVGUseElement","SVGViewElement","TaskAttributionTiming","Text","TextDecoder","TextDecoderStream","TextEncoder","TextEncoderStream","TextEvent","TextMetrics","TextTrack","TextTrackCue","TextTrackCueList","TextTrackList","TimeRanges","ToggleEvent","toolbar","top","Touch","TouchEvent","TouchList","TrackEvent","TransformStream","TransformStreamDefaultController","TransitionEvent","TreeWalker","UIEvent","URL","URLSearchParams","ValidityState","visualViewport","VisualViewport","VTTCue","WaveShaperNode","WebAssembly","WebGL2RenderingContext","WebGLActiveInfo","WebGLBuffer","WebGLContextEvent","WebGLFramebuffer","WebGLProgram","WebGLQuery","WebGLRenderbuffer","WebGLRenderingContext","WebGLSampler","WebGLShader","WebGLShaderPrecisionFormat","WebGLSync","WebGLTexture","WebGLTransformFeedback","WebGLUniformLocation","WebGLVertexArrayObject","WebSocket","WheelEvent","window","Window","Worker","WritableStream","WritableStreamDefaultController","WritableStreamDefaultWriter","XMLDocument","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload","XMLSerializer","XPathEvaluator","XPathExpression","XPathResult","XSLTProcessor"];function Y5(t){return t.filter(function(n){return n in this?!1:this[n]=!0},Object.create(null))}function my(t){return t.reduce(function(e,n){return e[n]=!0,e},Object.create(null))}var Q5=my(J5.concat([]));function X5(t){return t in Q5}var Z5=Object.defineProperty,e7=window.__QIANKUN_DEVELOPMENT__?["__REACT_ERROR_OVERLAY_GLOBAL_HOOK__","event"]:[],X1=["System","__cjsWrapper"].concat(e7),im=!1,UT=["document","top","parent","eval"],HT=["window","self","globalThis","hasOwnProperty"].concat([]),Wf=Array.from(new Set(zT.apply(void 0,[q5.concat(HT).concat("requestAnimationFrame")].concat(UT)))),t7=my(Wf),n7=my(zT.apply(void 0,[Wf].concat(fn(UT.concat(HT))))),Z1=new Map([["fetch",!0],["mockDomAPIInBlackList",!1]]);function r7(t,e){var n=new Map,r={};return Object.getOwnPropertyNames(t).filter(function(i){var o=Object.getOwnPropertyDescriptor(t,i);return!(o!=null&&o.configurable)}).forEach(function(i){var o=Object.getOwnPropertyDescriptor(t,i);if(o){var s=Object.prototype.hasOwnProperty.call(o,"get");(i==="top"||i==="parent"||i==="self"||i==="window"||i==="document"&&e||im)&&(o.configurable=!0,s||(o.writable=!0)),s&&n.set(i,!0),Z5(r,i,Object.freeze(o))}}),{fakeWindow:r,propertiesWithGetter:n}}var lh=0,i7=function(){function t(e){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window,i=arguments.length>2?arguments[2]:void 0;As(this,t),this.updatedValueSet=new Set,this.document=document,this.name=void 0,this.type=void 0,this.proxy=void 0,this.sandboxRunning=!0,this.latestSetProp=null,this.globalWhitelistPrevDescriptor={},this.globalContext=void 0,this.name=e,this.globalContext=r,this.type=pn.Proxy;var o=this.updatedValueSet,s=i||{},l=s.speedy,a=r7(r,!!l),c=a.fakeWindow,u=a.propertiesWithGetter,f=new Map,d=new Proxy(c,{set:function(m,y,g){if(n.sandboxRunning){if(n.registerRunningApp(e,d),typeof y=="string"&&X1.indexOf(y)!==-1)n.globalWhitelistPrevDescriptor[y]=Object.getOwnPropertyDescriptor(r,y),r[y]=g;else if(!m.hasOwnProperty(y)&&r.hasOwnProperty(y)){var v=Object.getOwnPropertyDescriptor(r,y),w=v.writable,S=v.configurable,k=v.enumerable,b=v.set;(w||b)&&Object.defineProperty(m,y,{configurable:S,enumerable:k,writable:!0,value:g})}else m[y]=g;return o.add(y),n.latestSetProp=y,!0}return!0},get:function(m,y){if(n.registerRunningApp(e,d),y===Symbol.unscopables)return n7;if(y==="window"||y==="self"||y==="globalThis"||im)return d;if(y==="top"||y==="parent"||im)return r===r.parent?d:r[y];if(y==="hasOwnProperty")return p;if(y==="document")return n.document;if(y==="eval")return eval;if(y==="string"&&X1.indexOf(y)!==-1)return r[y];var g=u.has(y)?r:y in m?m:r,v=g[y];if(qG(g,y)||!X5(y)&&!Z1.has(y))return v;var w=Z1.get(y)?Ct:r;return jT(w,v)},has:function(m,y){return y in t7||y in m||y in r},getOwnPropertyDescriptor:function(m,y){if(m.hasOwnProperty(y)){var g=Object.getOwnPropertyDescriptor(m,y);return f.set(y,"target"),g}if(r.hasOwnProperty(y)){var v=Object.getOwnPropertyDescriptor(r,y);return f.set(y,"globalContext"),v&&!v.configurable&&(v.configurable=!0),v}},ownKeys:function(m){return Y5(Reflect.ownKeys(r).concat(Reflect.ownKeys(m)))},defineProperty:function(m,y,g){var v=f.get(y);switch(v){case"globalContext":return Reflect.defineProperty(r,y,g);default:return Reflect.defineProperty(m,y,g)}},deleteProperty:function(m,y){return n.registerRunningApp(e,d),m.hasOwnProperty(y)&&(delete m[y],o.delete(y)),!0},getPrototypeOf:function(){return Reflect.getPrototypeOf(r)}});this.proxy=d,lh++;function p(h){return this!==d&&this!==null&&st(this)==="object"?Object.prototype.hasOwnProperty.call(this,h):c.hasOwnProperty(h)||r.hasOwnProperty(h)}}return Os(t,[{key:"active",value:function(){this.sandboxRunning||lh++,this.sandboxRunning=!0}},{key:"inactive",value:function(){var n=this;--lh===0&&Object.keys(this.globalWhitelistPrevDescriptor).forEach(function(r){var i=n.globalWhitelistPrevDescriptor[r];i?Object.defineProperty(n.globalContext,r,i):delete n.globalContext[r]}),this.sandboxRunning=!1}},{key:"patchDocument",value:function(n){this.document=n}},{key:"registerRunningApp",value:function(n,r){if(this.sandboxRunning){var i=tm();(!i||i.name!==n)&&n5({name:n,window:r}),GG(r5)}}}]),t}(),gy="SCRIPT",Fu="LINK",yy="STYLE",WT=Symbol("target"),GT=Symbol("refNodeNo"),bi=Symbol("qiankun-overwritten"),ia=function(e){return e.querySelector(nl)};function o7(t){return!t.type||["text/javascript","module","application/javascript","text/ecmascript","application/ecmascript"].indexOf(t.type)!==-1}function vy(t){return(t==null?void 0:t.toUpperCase())===Fu||(t==null?void 0:t.toUpperCase())===yy||(t==null?void 0:t.toUpperCase())===gy}function KT(t){var e,n;return!t.textContent&&(((e=t.sheet)===null||e===void 0?void 0:e.cssRules.length)||((n=tM(t))===null||n===void 0?void 0:n.length))}var om=new Map;function Dr(t,e,n){var r=om.get(t)||{bootstrappingPatchCount:0,mountingPatchCount:0};switch(e){case"increase":r["".concat(n,"PatchCount")]+=1;break;case"decrease":r["".concat(n,"PatchCount")]>0&&(r["".concat(n,"PatchCount")]-=1);break}om.set(t,r)}function qT(){return Array.from(om.entries()).every(function(t){var e=sy(t,2),n=e[1],r=n.bootstrappingPatchCount,i=n.mountingPatchCount;return r===0&&i===0})}function JT(t,e){return Object.defineProperties(t,{srcElement:{get:e},target:{get:e}}),t}function YT(t){var e=new CustomEvent("load"),n=JT(e,function(){return t});Hr(t.onload)?t.onload(n):t.dispatchEvent(n)}function QT(t){var e=new CustomEvent("error"),n=JT(e,function(){return t});Hr(t.onerror)?t.onerror(n):t.dispatchEvent(n)}function s7(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:fetch,r=document.createElement("style"),i=t.href;return r.dataset.qiankunHref=i,n(i).then(function(o){return o.text()}).then(function(o){r.appendChild(document.createTextNode(o)),e(r),YT(t)}).catch(function(){return QT(t)}),r}var eS=function(e,n,r){Object.defineProperty(e,n,{configurable:!0,enumerable:!1,writable:!0,value:r})},XT=new WeakMap,sm=new WeakMap,ZT=new WeakMap;function eM(t){t.forEach(function(e){e instanceof HTMLStyleElement&&KT(e)&&e.sheet&&XT.set(e,e.sheet.cssRules)})}function tM(t){return XT.get(t)}function ah(t){function e(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=n,o=t.rawDOMAppendOrInsertBefore,s=t.isInvokedByMicroApp,l=t.containerConfigGetter,a=t.target,c=a===void 0?"body":a;if(!vy(i.tagName)||!s(i))return o.call(this,i,r);if(i.tagName){var u=l(i),f=u.appName,d=u.appWrapperGetter,p=u.proxy,h=u.strictGlobal,m=u.speedySandbox,y=u.dynamicStyleSheetElements,g=u.scopedCSS,v=u.excludeAssetFilter;switch(i.tagName){case Fu:case yy:{var w=n,S=w,k=S.href;if(v&&k&&v(k))return o.call(this,i,r);eS(w,WT,c);var b=d();if(g){var C,E=((C=i.tagName)===null||C===void 0?void 0:C.toUpperCase())===Fu&&i.rel==="stylesheet"&&i.href;if(E){var x,A=typeof an.fetch=="function"?an.fetch:(x=an.fetch)===null||x===void 0?void 0:x.fn;w=s7(i,function(ft){return rm(b,ft,f)},A),ZT.set(i,w)}else rm(b,w,f)}var U=c==="head"?ia(b):b,te=U.contains(r)?r:null,Pe;te&&(Pe=Array.from(U.childNodes).indexOf(te));var ce=o.call(U,w,te);return typeof Pe=="number"&&Pe!==-1&&eS(w,GT,Pe),y.push(w),ce}case gy:{var Y=i,ee=Y.src,Q=Y.text;if(v&&ee&&v(ee)||!o7(i))return o.call(this,i,r);var T=d(),R=c==="head"?ia(T):T,_=an.fetch,q=R.contains(r)?r:null,ne=m?Wf:[];if(ee){var jt=!1;$u(null,[ee],p,{fetch:_,strictGlobal:h,scopedGlobalVariables:ne,beforeExec:function(){var vn=function(){var so=Object.getOwnPropertyDescriptor(document,"currentScript");return!so||so.configurable};vn()&&(Object.defineProperty(document,"currentScript",{get:function(){return i},configurable:!0}),jt=!0)},success:function(){YT(i),jt&&delete document.currentScript,i=null},error:function(){QT(i),jt&&delete document.currentScript,i=null}});var Dt=document.createComment("dynamic script ".concat(ee," replaced by qiankun"));return sm.set(i,Dt),o.call(R,Dt,q)}$u(null,["<script>".concat(Q,"<\/script>")],p,{strictGlobal:h,scopedGlobalVariables:ne});var yn=document.createComment("dynamic inline script replaced by qiankun");return sm.set(i,yn),o.call(R,yn,q)}}}return o.call(this,i,r)}return e[bi]=!0,e}function tS(t,e,n,r){function i(o){var s=o.tagName;if(!vy(s)||!r(o))return t.call(this,o);try{var l,a=e(o),c=a.appWrapperGetter,u=a.dynamicStyleSheetElements;switch(s){case yy:case Fu:{l=ZT.get(o)||o;var f=u.indexOf(l);f!==-1&&u.splice(f,1);break}case gy:{l=sm.get(o)||o;break}default:l=o}var d=c(),p=n==="head"?ia(d):d;if(p.contains(l))return t.call(l.parentNode,l)}catch(h){console.warn(h)}return t.call(this,o)}return i[bi]=!0,i}function nM(t,e){var n=HTMLHeadElement.prototype.appendChild,r=HTMLBodyElement.prototype.appendChild,i=HTMLHeadElement.prototype.insertBefore;n[bi]!==!0&&r[bi]!==!0&&i[bi]!==!0&&(HTMLHeadElement.prototype.appendChild=ah({rawDOMAppendOrInsertBefore:n,containerConfigGetter:e,isInvokedByMicroApp:t,target:"head"}),HTMLBodyElement.prototype.appendChild=ah({rawDOMAppendOrInsertBefore:r,containerConfigGetter:e,isInvokedByMicroApp:t,target:"body"}),HTMLHeadElement.prototype.insertBefore=ah({rawDOMAppendOrInsertBefore:i,containerConfigGetter:e,isInvokedByMicroApp:t,target:"head"}));var o=HTMLHeadElement.prototype.removeChild,s=HTMLBodyElement.prototype.removeChild;return o[bi]!==!0&&s[bi]!==!0&&(HTMLHeadElement.prototype.removeChild=tS(o,e,"head",t),HTMLBodyElement.prototype.removeChild=tS(s,e,"body",t)),function(){HTMLHeadElement.prototype.appendChild=n,HTMLHeadElement.prototype.removeChild=o,HTMLBodyElement.prototype.appendChild=r,HTMLBodyElement.prototype.removeChild=s,HTMLHeadElement.prototype.insertBefore=i}}function rM(t,e){t.forEach(function(n){var r=e(n);if(r&&n instanceof HTMLStyleElement&&KT(n)){var i=tM(n);if(i)for(var o=0;o<i.length;o++){var s=i[o],l=n.sheet;l.insertRule(s.cssText,l.cssRules.length)}}})}function ju(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,o=arguments.length>5?arguments[5]:void 0,s=n.proxy,l=[],a=nM(function(){return Mx(window.location).some(function(c){return c===t})},function(){return{appName:t,appWrapperGetter:e,proxy:s,strictGlobal:!1,speedySandbox:!1,scopedCSS:i,dynamicStyleSheetElements:l,excludeAssetFilter:o}});return r||Dr(t,"increase","bootstrapping"),r&&Dr(t,"increase","mounting"),function(){return r||Dr(t,"decrease","bootstrapping"),r&&Dr(t,"decrease","mounting"),qT()&&a(),eM(l),function(){rM(l,function(f){var d=e();return d.contains(f)?!1:(document.head.appendChild.call(d,f),!0)}),r&&(l=[])}}}Object.defineProperty(Ct,"__proxyAttachContainerConfigMap__",{enumerable:!1,writable:!0});Object.defineProperty(Ct,"__currentLockingSandbox__",{enumerable:!1,writable:!0,configurable:!0});var l7=HTMLHeadElement.prototype.appendChild,a7=HTMLHeadElement.prototype.insertBefore;Ct.__proxyAttachContainerConfigMap__=Ct.__proxyAttachContainerConfigMap__||new WeakMap;var Vu=Ct.__proxyAttachContainerConfigMap__,lm=new WeakMap,nS=new WeakMap,Un=new WeakMap;function c7(t){var e=t.sandbox,n=t.speedy,r=function(y,g){var v=Vu.get(g);v&&lm.set(y,v)};if(n){var i={},o=new Proxy(document,{set:function(y,g,v){switch(g){case"createElement":{i.createElement=v;break}case"querySelector":{i.querySelector=v;break}default:y[g]=v;break}return!0},get:function(y,g,v){switch(g){case"createElement":{var w=i.createElement||y.createElement;return function(){Ct.__currentLockingSandbox__||(Ct.__currentLockingSandbox__=e.name);for(var C=arguments.length,E=new Array(C),x=0;x<C;x++)E[x]=arguments[x];var A=w.call.apply(w,[y].concat(E));return Ct.__currentLockingSandbox__===e.name&&(r(A,e.proxy),delete Ct.__currentLockingSandbox__),A}}case"querySelector":{var S=i.querySelector||y.querySelector;return function(){for(var C=arguments.length,E=new Array(C),x=0;x<C;x++)E[x]=arguments[x];var A=E[0];switch(A){case"head":{var U=Vu.get(e.proxy);if(U){var te=ia(U.appWrapperGetter());return te.appendChild=HTMLHeadElement.prototype.appendChild,te.insertBefore=HTMLHeadElement.prototype.insertBefore,te.removeChild=HTMLHeadElement.prototype.removeChild,te}break}}return S.call.apply(S,[y].concat(E))}}}var k=y[g];return RT(k)&&!LT(k)?function(){for(var C=arguments.length,E=new Array(C),x=0;x<C;x++)E[x]=arguments[x];return k.call.apply(k,[y].concat(fn(E.map(function(A){return A===v?y:A}))))}:k}});e.patchDocument(o);var s=MutationObserver.prototype.observe;if(!Un.has(s)){var l=function(y,g){var v=y instanceof Document?Y1:y;return s.call(this,v,g)};MutationObserver.prototype.observe=l,Un.set(s,l)}var a=Node.prototype.compareDocumentPosition;Un.has(a)||(Node.prototype.compareDocumentPosition=function(y){var g=y instanceof Document?Y1:y;return a.call(this,g)},Un.set(a,Node.prototype.compareDocumentPosition));var c=Object.getOwnPropertyDescriptor(Node.prototype,"parentNode");if(c&&!Un.has(c)){var u=c.get,f=c.configurable;if(u&&f){var d=pe(pe({},c),{},{get:function(){var y=u.call(this);if(y instanceof Document){var g,v=(g=tm())===null||g===void 0?void 0:g.window;if(v)return v.document}return y}});Object.defineProperty(Node.prototype,"parentNode",d),Un.set(c,d)}}return function(){MutationObserver.prototype.observe=s,Un.delete(s),Node.prototype.compareDocumentPosition=a,Un.delete(a),c&&(Object.defineProperty(Node.prototype,"parentNode",c),Un.delete(c))}}var p=nS.get(document.createElement);if(!p){var h=document.createElement;Document.prototype.createElement=function(y,g){var v=h.call(this,y,g);if(vy(y)){var w=tm()||{},S=w.window;S&&r(v,S)}return v},document.hasOwnProperty("createElement")&&(document.createElement=Document.prototype.createElement),nS.set(Document.prototype.createElement,h)}return function(){p&&(Document.prototype.createElement=p,document.createElement=p)}}function iM(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1,l=n.proxy,a=Vu.get(l);a||(a={appName:t,proxy:l,appWrapperGetter:e,dynamicStyleSheetElements:[],strictGlobal:!0,speedySandbox:s,excludeAssetFilter:o,scopedCSS:i},Vu.set(l,a));var c=a,u=c.dynamicStyleSheetElements,f=nM(function(p){return lm.has(p)},function(p){return lm.get(p)}),d=c7({sandbox:n,speedy:s});return r||Dr(t,"increase","bootstrapping"),r&&Dr(t,"increase","mounting"),function(){return r||Dr(t,"decrease","bootstrapping"),r&&Dr(t,"decrease","mounting"),qT()&&(f(),d()),eM(u),function(){rM(u,function(m){var y=e();if(!y.contains(m)){var g=m[WT]==="head"?ia(y):y,v=m[GT];if(typeof v=="number"&&v!==-1){var w=g.childNodes[v]||null;return a7.call(g,m,w),!0}else return l7.call(g,m),!0}return!1})}}}function u7(){var t=function(i){return Zl},e=[],n=[];return window.g_history&&Hr(window.g_history.listen)&&(t=window.g_history.listen.bind(window.g_history),window.g_history.listen=function(r){e.push(r);var i=t(r);return n.push(i),function(){i(),n.splice(n.indexOf(i),1),e.splice(e.indexOf(r),1)}}),function(){var i=Zl;return e.length&&(i=function(){e.forEach(function(s){return window.g_history.listen(s)})}),n.forEach(function(o){return o()}),window.g_history&&Hr(window.g_history.listen)&&(window.g_history.listen=t),i}}var rS=window.setInterval,iS=window.clearInterval;function f7(t){var e=[];return t.clearInterval=function(n){return e=e.filter(function(r){return r!==n}),iS.call(window,n)},t.setInterval=function(n,r){for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];var l=rS.apply(void 0,[n,r].concat(o));return e=[].concat(fn(e),[l]),l},function(){return e.forEach(function(r){return t.clearInterval(r)}),t.setInterval=rS,t.clearInterval=iS,Zl}}var oS=window.addEventListener,sS=window.removeEventListener;function d7(t){var e=new Map;return t.addEventListener=function(n,r,i){var o=e.get(n)||[];return e.set(n,[].concat(fn(o),[r])),oS.call(window,n,r,i)},t.removeEventListener=function(n,r,i){var o=e.get(n);return o&&o.length&&o.indexOf(r)!==-1&&o.splice(o.indexOf(r),1),sS.call(window,n,r,i)},function(){return e.forEach(function(r,i){return fn(r).forEach(function(o){return t.removeEventListener(i,o)})}),t.addEventListener=oS,t.removeEventListener=sS,Zl}}function h7(t,e,n,r,i,o){var s,l=[function(){return f7(n.proxy)},function(){return d7(n.proxy)},function(){return u7()}],a=Zn(Zn(Zn({},pn.LegacyProxy,[].concat(l,[function(){return ju(t,e,n,!0,r,i)}])),pn.Proxy,[].concat(l,[function(){return iM(t,e,n,!0,r,i,o)}])),pn.Snapshot,[].concat(l,[function(){return ju(t,e,n,!0,r,i)}]));return(s=a[n.type])===null||s===void 0?void 0:s.map(function(c){return c()})}function p7(t,e,n,r,i,o){var s,l=Zn(Zn(Zn({},pn.LegacyProxy,[function(){return ju(t,e,n,!1,r,i)}]),pn.Proxy,[function(){return iM(t,e,n,!1,r,i,o)}]),pn.Snapshot,[function(){return ju(t,e,n,!1,r,i)}]);return(s=l[n.type])===null||s===void 0?void 0:s.map(function(a){return a()})}function lS(t,e){for(var n in t)(t.hasOwnProperty(n)||n==="clearInterval")&&e(n)}var m7=function(){function t(e){As(this,t),this.proxy=void 0,this.name=void 0,this.type=void 0,this.sandboxRunning=!0,this.windowSnapshot=void 0,this.modifyPropsMap={},this.name=e,this.proxy=window,this.type=pn.Snapshot}return Os(t,[{key:"active",value:function(){var n=this;this.windowSnapshot={},lS(window,function(r){n.windowSnapshot[r]=window[r]}),Object.keys(this.modifyPropsMap).forEach(function(r){window[r]=n.modifyPropsMap[r]}),this.sandboxRunning=!0}},{key:"inactive",value:function(){var n=this;this.modifyPropsMap={},lS(window,function(r){window[r]!==n.windowSnapshot[r]&&(n.modifyPropsMap[r]=window[r],window[r]=n.windowSnapshot[r])}),this.sandboxRunning=!1}},{key:"patchDocument",value:function(){}}]),t}();function g7(t,e,n,r,i,o,s){var l;window.Proxy?l=r?new o5(t,o):new i7(t,o,{speedy:!!s}):l=new m7(t);var a=p7(t,e,l,n,i,s),c=[],u=[];return{instance:l,mount:function(){return X(N.mark(function d(){var p,h;return N.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:l.active(),p=u.slice(0,a.length),h=u.slice(a.length),p.length&&p.forEach(function(g){return g()}),c=h7(t,e,l,n,i,s),h.length&&h.forEach(function(g){return g()}),u=[];case 7:case"end":return y.stop()}},d)}))()},unmount:function(){return X(N.mark(function d(){return N.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:u=[].concat(fn(a),fn(c)).map(function(m){return m()}),l.inactive();case 2:case"end":return h.stop()}},d)}))()}}}var y7=["singular","sandbox","excludeAssetFilter","globalContext"];function am(t,e){if(!t)throw e?new ra(e):new ra("element not existed!")}function Ks(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:window;return t.length?t.reduce(function(r,i){return r.then(function(){return i(e,n)})},Promise.resolve()):Promise.resolve()}function hc(t,e){return cm.apply(this,arguments)}function cm(){return cm=X(N.mark(function t(e,n){return N.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",typeof e=="function"?e(n):!!e);case 1:case"end":return i.stop()}},t)})),cm.apply(this,arguments)}var oM=!!document.head.attachShadow||!!document.head.createShadowRoot;function aS(t,e,n,r){var i=document.createElement("div");i.innerHTML=t;var o=i.firstChild;if(e)if(!oM)console.warn("[qiankun]: As current browser not support shadow dom, your strictStyleIsolation configuration will be ignored!");else{var s=o.innerHTML;o.innerHTML="";var l;o.attachShadow?l=o.attachShadow({mode:"open"}):l=o.createShadowRoot(),l.innerHTML=s}if(n){var a=o.getAttribute(nm);a||o.setAttribute(nm,r);var c=o.querySelectorAll("style")||[];$U(c,function(u){rm(o,u,r)})}return o}function cS(t,e,n,r,i){return function(){if(e){if(n)throw new ra("strictStyleIsolation can not be used with legacy render!");if(r)throw new ra("experimentalStyleIsolation can not be used with legacy render!");var o=document.getElementById($T(t));return am(o,"Wrapper element for ".concat(t," is not existed!")),o}var s=i();return am(s,"Wrapper element for ".concat(t," is not existed!")),n&&oM?s.shadowRoot:s}}var v7=HTMLElement.prototype.appendChild,w7=HTMLElement.prototype.removeChild;function S7(t,e,n){var r=function(o,s){var l=o.element,a=o.loading,c=o.container;if(n)return n({loading:a,appContent:l?e:""});var u=FT(c);if(s!=="unmounted"){var f=function(){switch(s){case"loading":case"mounting":return"Target container with ".concat(c," not existed while ").concat(t," ").concat(s,"!");case"mounted":return"Target container with ".concat(c," not existed after ").concat(t," ").concat(s,"!");default:return"Target container with ".concat(c," not existed while ").concat(t," rendering!")}}();am(u,f)}if(u&&!u.contains(l)){for(;u.firstChild;)w7.call(u,u.firstChild);l&&v7.call(u,l)}};return r}function b7(t,e,n,r){if(oh(t))return t;if(r){var i=n[r];if(oh(i))return i}var o=n[e];if(oh(o))return o;throw new ra("You need to export lifecycle functions in ".concat(e," entry"))}var pi;function sM(t){return um.apply(this,arguments)}function um(){return um=X(N.mark(function t(e){var n,r,i,o,s,l,a,c,u,f,d,p,h,m,y,g,v,w,S,k,b,C,E,x,A,U,te,Pe,ce,Y,ee,Q,T,R,_,q,ne,jt,Dt,yn,ft,vn,Ra,so,qy,Jy,Is,Yy,Qy,Xy,nd,La,Zy,ev,tv,rd,nv,Rs=arguments;return N.wrap(function(St){for(;;)switch(St.prev=St.next){case 0:return i=Rs.length>1&&Rs[1]!==void 0?Rs[1]:{},o=Rs.length>2?Rs[2]:void 0,s=e.entry,l=e.name,a=XG(l),c=i.singular,u=c===void 0?!1:c,f=i.sandbox,d=f===void 0?!0:f,p=i.excludeAssetFilter,h=i.globalContext,m=h===void 0?window:h,y=_u(i,y7),St.next=9,cT(s,y);case 9:return g=St.sent,v=g.template,w=g.execScripts,S=g.assetPublicPath,k=g.getExternalScripts,St.next=16,k();case 16:return St.next=18,hc(u,e);case 18:if(!St.sent){St.next=21;break}return St.next=21,pi&&pi.promise;case 21:return b=YG(a,d)(v),C=st(d)==="object"&&!!d.strictStyleIsolation,E=ZG(d),x=aS(b,C,E,a),A="container"in e?e.container:void 0,U="render"in e?e.render:void 0,te=S7(a,b,U),te({element:x,loading:!0,container:A},"loading"),Pe=cS(a,!!U,C,E,function(){return x}),ce=m,Y=function(){return Promise.resolve()},ee=function(){return Promise.resolve()},Q=st(d)==="object"&&!!d.loose,T=st(d)==="object"?d.speedy!==!1:!0,d&&(R=g7(a,Pe,E,Q,p,ce,T),ce=R.instance.proxy,Y=R.mount,ee=R.unmount),_=nT({},w4(ce,S),o,function(di,wn){return Lx(di??[],wn??[])}),q=_.beforeUnmount,ne=q===void 0?[]:q,jt=_.afterUnmount,Dt=jt===void 0?[]:jt,yn=_.afterMount,ft=yn===void 0?[]:yn,vn=_.beforeMount,Ra=vn===void 0?[]:vn,so=_.beforeLoad,qy=so===void 0?[]:so,St.next=40,Ks(Si(qy),e,ce);case 40:return St.next=42,w(ce,d&&!Q,{scopedGlobalVariables:T?Wf:[]});case 42:return Jy=St.sent,Is=b7(Jy,l,ce,(n=R)===null||n===void 0||(r=n.instance)===null||r===void 0?void 0:r.latestSetProp),Yy=Is.bootstrap,Qy=Is.mount,Xy=Is.unmount,nd=Is.update,La=jW(a),Zy=La.onGlobalStateChange,ev=La.setGlobalState,tv=La.offGlobalStateChange,rd=function(wn){return x=wn},nv=function(){var wn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:A,jn,id,rv={name:a,bootstrap:Yy,mount:[X(N.mark(function re(){return N.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:case 1:case"end":return D.stop()}},re)})),X(N.mark(function re(){return N.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,hc(u,e);case 2:if(D.t0=D.sent,!D.t0){D.next=5;break}D.t0=pi;case 5:if(!D.t0){D.next=7;break}return D.abrupt("return",pi.promise);case 7:return D.abrupt("return",void 0);case 8:case"end":return D.stop()}},re)})),X(N.mark(function re(){return N.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:jn=x,id=cS(a,!!U,C,E,function(){return jn});case 2:case"end":return D.stop()}},re)})),X(N.mark(function re(){var Ee;return N.wrap(function(Ls){for(;;)switch(Ls.prev=Ls.next){case 0:Ee=wn!==A,(Ee||!jn)&&(jn=aS(b,C,E,a),rd(jn)),te({element:jn,loading:!0,container:wn},"mounting");case 3:case"end":return Ls.stop()}},re)})),Y,X(N.mark(function re(){return N.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",Ks(Si(Ra),e,ce));case 1:case"end":return D.stop()}},re)})),function(){var re=X(N.mark(function Ee(D){return N.wrap(function(Vn){for(;;)switch(Vn.prev=Vn.next){case 0:return Vn.abrupt("return",Qy(pe(pe({},D),{},{container:id(),setGlobalState:ev,onGlobalStateChange:Zy})));case 1:case"end":return Vn.stop()}},Ee)}));return function(Ee){return re.apply(this,arguments)}}(),X(N.mark(function re(){return N.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",te({element:jn,loading:!1,container:wn},"mounted"));case 1:case"end":return D.stop()}},re)})),X(N.mark(function re(){return N.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",Ks(Si(ft),e,ce));case 1:case"end":return D.stop()}},re)})),X(N.mark(function re(){return N.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,hc(u,e);case 2:if(!D.sent){D.next=4;break}pi=new BT;case 4:case"end":return D.stop()}},re)})),X(N.mark(function re(){return N.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:case 1:case"end":return D.stop()}},re)}))],unmount:[X(N.mark(function re(){return N.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",Ks(Si(ne),e,ce));case 1:case"end":return D.stop()}},re)})),function(){var re=X(N.mark(function Ee(D){return N.wrap(function(Vn){for(;;)switch(Vn.prev=Vn.next){case 0:return Vn.abrupt("return",Xy(pe(pe({},D),{},{container:id()})));case 1:case"end":return Vn.stop()}},Ee)}));return function(Ee){return re.apply(this,arguments)}}(),ee,X(N.mark(function re(){return N.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",Ks(Si(Dt),e,ce));case 1:case"end":return D.stop()}},re)})),X(N.mark(function re(){return N.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:te({element:null,loading:!1,container:wn},"unmounted"),tv(a),jn=null,rd(jn);case 4:case"end":return D.stop()}},re)})),X(N.mark(function re(){return N.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,hc(u,e);case 2:if(D.t0=D.sent,!D.t0){D.next=5;break}D.t0=pi;case 5:if(!D.t0){D.next=7;break}pi.resolve();case 7:case"end":return D.stop()}},re)}))]};return typeof nd=="function"&&(rv.update=nd),rv},St.abrupt("return",nv);case 48:case"end":return St.stop()}},t)})),um.apply(this,arguments)}function uS(t,e){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})}var Vo;if(typeof window.requestIdleCallback<"u")Vo=window.requestIdleCallback;else if(typeof window.MessageChannel<"u"){var fS=new MessageChannel,k7=fS.port2,dS=[];fS.port1.onmessage=function(t){var e=t.data,n=dS.shift();n&&uS(n,e.start)},Vo=function(e){dS.push(e),k7.postMessage({start:Date.now()})}}else Vo=function(e){return setTimeout(uS,0,e,Date.now())};var C7=navigator.connection?navigator.connection.saveData||navigator.connection.type!=="wifi"&&navigator.connection.type!=="ethernet"&&/([23])g/.test(navigator.connection.effectiveType):!1;function lM(t,e){!navigator.onLine||C7||Vo(X(N.mark(function n(){var r,i,o;return N.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,cT(t,e);case 2:r=l.sent,i=r.getExternalScripts,o=r.getExternalStyleSheets,Vo(o),Vo(i);case 7:case"end":return l.stop()}},n)})))}function ch(t,e){window.addEventListener("single-spa:first-mount",function n(){var r=t.filter(function(i){return Gg(i.name)===Pn});r.forEach(function(i){var o=i.entry;return lM(o,e)}),window.removeEventListener("single-spa:first-mount",n)})}function hS(t,e){t.forEach(function(n){var r=n.entry;return lM(r,e)})}function E7(t,e,n){var r=function(o){return t.filter(function(s){return o.includes(s.name)})};if(Array.isArray(e))ch(r(e),n);else if(Hr(e))X(N.mark(function i(){var o,s,l,a,c;return N.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,e(t);case 2:o=f.sent,s=o.criticalAppNames,l=s===void 0?[]:s,a=o.minorAppsName,c=a===void 0?[]:a,hS(r(l),n),ch(r(c),n);case 9:case"end":return f.stop()}},i)}))();else switch(e){case!0:ch(t,n);break;case"all":hS(t,n);break}}var x7=["name","activeRule","loader","props"],T7=["mount"],M7=["prefetch","urlRerouteOnly"],Fc=[],an={},aM=!1,cM=!0,uM=new BT,fM=function(e){var n=e.sandbox,r=n===void 0?!0:n,i=e.singular;if(r){if(!window.Proxy)return console.warn("[qiankun] Missing window.Proxy, proxySandbox will degenerate into snapshotSandbox"),i===!1&&console.warn("[qiankun] Setting singular as false may cause unexpected behavior while your browser not support window.Proxy"),pe(pe({},e),{},{sandbox:st(r)==="object"?pe(pe({},r),{},{loose:!0}):{loose:!0}});if(!JG()&&(r===!0||st(r)==="object"&&r.speedy!==!1))return console.warn("[qiankun] Speedy mode will turn off as const destruct assignment not supported in current browser!"),pe(pe({},e),{},{sandbox:st(r)==="object"?pe(pe({},r),{},{speedy:!1}):{speedy:!1}})}return e};function O7(t,e){var n=t.filter(function(r){return!Fc.some(function(i){return i.name===r.name})});Fc=[].concat(fn(Fc),fn(n)),n.forEach(function(r){var i=r.name,o=r.activeRule,s=r.loader,l=s===void 0?Zl:s,a=r.props,c=_u(r,x7);Tx({name:i,app:function(){var u=X(N.mark(function d(){var p,h,m;return N.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return l(!0),g.next=3,uM.promise;case 3:return g.next=5,sM(pe({name:i,props:a},c),an,e);case 5:return g.t0=g.sent,p=(0,g.t0)(),h=p.mount,m=_u(p,T7),g.abrupt("return",pe({mount:[X(N.mark(function v(){return N.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",l(!0));case 1:case"end":return S.stop()}},v)}))].concat(fn(Si(h)),[X(N.mark(function v(){return N.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",l(!1));case 1:case"end":return S.stop()}},v)}))])},m));case 10:case"end":return g.stop()}},d)}));function f(){return u.apply(this,arguments)}return f}(),activeWhen:o,customProps:a})})}var pc=new Map,uh=new Map;function A7(t,e,n){var r=t.props,i=t.name,o="container"in t?t.container:void 0,s=t5(o),l="".concat(i,"-").concat(s),a,c=function(m){var y=m;if(o&&s){var g=uh.get(l);if(g!=null&&g.length){var v=[X(N.mark(function w(){var S,k;return N.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return S=g.slice(0,g.indexOf(a)),k=S.filter(function(E){return E.getStatus()!=="LOAD_ERROR"&&E.getStatus()!=="SKIP_BECAUSE_BROKEN"}),C.next=4,Promise.all(k.map(function(E){return E.unmountPromise}));case 4:case"end":return C.stop()}},w)}))].concat(fn(Si(y.mount)));y=pe(pe({},m),{},{mount:v})}}return pe(pe({},y),{},{bootstrap:function(){return Promise.resolve()}})},u=function(){var h=X(N.mark(function m(){var y,g,v,w,S;return N.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(y=fM(e??pe(pe({},an),{},{singular:!1})),g=y.$$cacheLifecycleByAppName,!o){b.next=21;break}if(!g){b.next=12;break}if(v=pc.get(i),!v){b.next=12;break}return b.t0=c,b.next=9,v;case 9:return b.t1=b.sent,b.t2=(0,b.t1)(o),b.abrupt("return",(0,b.t0)(b.t2));case 12:if(!s){b.next=21;break}if(w=pc.get(l),!w){b.next=21;break}return b.t3=c,b.next=18,w;case 18:return b.t4=b.sent,b.t5=(0,b.t4)(o),b.abrupt("return",(0,b.t3)(b.t5));case 21:return S=sM(t,y,n),o&&(g?pc.set(i,S):s&&pc.set(l,S)),b.next=25,S;case 25:return b.t6=b.sent,b.abrupt("return",(0,b.t6)(o));case 27:case"end":return b.stop()}},m)}));return function(){return h.apply(this,arguments)}}();if(!aM&&(e==null?void 0:e.autoStart)!==!1){var f;qg({urlRerouteOnly:(f=an.urlRerouteOnly)!==null&&f!==void 0?f:cM})}if(a=yx(u,pe({domElement:document.createElement("div")},r)),o&&s){var d=uh.get(l)||[];d.push(a),uh.set(l,d);var p=function(){var m=d.indexOf(a);d.splice(m,1),a=null};a.unmountPromise.then(p).catch(p)}return a}function D7(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};an=pe({prefetch:!0,singular:!0,sandbox:!0},t);var e=an,n=e.prefetch,r=e.urlRerouteOnly,i=r===void 0?cM:r,o=_u(e,M7);n&&E7(Fc,n,o),an=fM(an),qg({urlRerouteOnly:i}),aM=!0,uM.resolve()}const Ot=()=>new Map,fm=t=>{const e=Ot();return t.forEach((n,r)=>{e.set(r,n)}),e},Fn=(t,e,n)=>{let r=t.get(e);return r===void 0&&t.set(e,r=n()),r},_7=(t,e)=>{const n=[];for(const[r,i]of t)n.push(e(i,r));return n},P7=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1},Qr=()=>new Set,fh=t=>t[t.length-1],N7=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},sr=Array.from,I7=Array.isArray;class R7{constructor(){this._observers=Ot()}on(e,n){return Fn(this._observers,e,Qr).add(n),n}once(e,n){const r=(...i)=>{this.off(e,r),n(...i)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return sr((this._observers.get(e)||Ot()).values()).forEach(r=>r(...n))}destroy(){this._observers=Ot()}}let dM=class{constructor(){this._observers=Ot()}on(e,n){Fn(this._observers,e,Qr).add(n)}once(e,n){const r=(...i)=>{this.off(e,r),n(...i)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return sr((this._observers.get(e)||Ot()).values()).forEach(r=>r(...n))}destroy(){this._observers=Ot()}};const lr=Math.floor,jc=Math.abs,wy=(t,e)=>t<e?t:e,io=(t,e)=>t>e?t:e,L7=Math.pow,hM=t=>t!==0?t<0:1/t<0,pS=1,mS=2,dh=4,hh=8,oa=32,er=64,Rt=128,Gf=31,dm=63,$i=127,$7=2147483647,pM=Number.MAX_SAFE_INTEGER,B7=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&lr(t)===t),F7=String.fromCharCode,j7=t=>t.toLowerCase(),V7=/^\s*/g,z7=t=>t.replace(V7,""),U7=/([A-Z])/g,gS=(t,e)=>z7(t.replace(U7,n=>`${e}${j7(n)}`)),H7=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.codePointAt(i);return r},sa=typeof TextEncoder<"u"?new TextEncoder:null,W7=t=>sa.encode(t),G7=sa?W7:H7;let wl=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});wl&&wl.decode(new Uint8Array).length===1&&(wl=null);let Aa=class{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}};const rt=()=>new Aa,Sy=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},ge=t=>{const e=new Uint8Array(Sy(t));let n=0;for(let r=0;r<t.bufs.length;r++){const i=t.bufs[r];e.set(i,n),n+=i.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},K7=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(io(n,e)*2),t.cpos=0)},Ie=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},hm=Ie,B=(t,e)=>{for(;e>$i;)Ie(t,Rt|$i&e),e=lr(e/128);Ie(t,$i&e)},by=(t,e)=>{const n=hM(e);for(n&&(e=-e),Ie(t,(e>dm?Rt:0)|(n?er:0)|dm&e),e=lr(e/64);e>0;)Ie(t,(e>$i?Rt:0)|$i&e),e=lr(e/128)},pm=new Uint8Array(3e4),q7=pm.length/3,J7=(t,e)=>{if(e.length<q7){const n=sa.encodeInto(e,pm).written||0;B(t,n);for(let r=0;r<n;r++)Ie(t,pm[r])}else ke(t,G7(e))},Y7=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;B(t,r);for(let i=0;i<r;i++)Ie(t,n.codePointAt(i))},Bi=sa&&sa.encodeInto?J7:Y7,Kf=(t,e)=>{const n=t.cbuf.length,r=t.cpos,i=wy(n-r,e.length),o=e.length-i;t.cbuf.set(e.subarray(0,i),r),t.cpos+=i,o>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(io(n*2,o)),t.cbuf.set(e.subarray(i)),t.cpos=o)},ke=(t,e)=>{B(t,e.byteLength),Kf(t,e)},ky=(t,e)=>{K7(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},Q7=(t,e)=>ky(t,4).setFloat32(0,e,!1),X7=(t,e)=>ky(t,8).setFloat64(0,e,!1),Z7=(t,e)=>ky(t,8).setBigInt64(0,e,!1),yS=new DataView(new ArrayBuffer(4)),e9=t=>(yS.setFloat32(0,t),yS.getFloat32(0)===t),la=(t,e)=>{switch(typeof e){case"string":Ie(t,119),Bi(t,e);break;case"number":B7(e)&&jc(e)<=$7?(Ie(t,125),by(t,e)):e9(e)?(Ie(t,124),Q7(t,e)):(Ie(t,123),X7(t,e));break;case"bigint":Ie(t,122),Z7(t,e);break;case"object":if(e===null)Ie(t,126);else if(I7(e)){Ie(t,117),B(t,e.length);for(let n=0;n<e.length;n++)la(t,e[n])}else if(e instanceof Uint8Array)Ie(t,116),ke(t,e);else{Ie(t,118);const n=Object.keys(e);B(t,n.length);for(let r=0;r<n.length;r++){const i=n[r];Bi(t,i),la(t,e[i])}}break;case"boolean":Ie(t,e?120:121);break;default:Ie(t,127)}};class vS extends Aa{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&B(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const wS=t=>{t.count>0&&(by(t.encoder,t.count===1?t.s:-t.s),t.count>1&&B(t.encoder,t.count-2))};class Vc{constructor(){this.encoder=new Aa,this.s=0,this.count=0}write(e){this.s===e?this.count++:(wS(this),this.count=1,this.s=e)}toUint8Array(){return wS(this),ge(this.encoder)}}const SS=t=>{if(t.count>0){const e=t.diff*2+(t.count===1?0:1);by(t.encoder,e),t.count>1&&B(t.encoder,t.count-2)}};class ph{constructor(){this.encoder=new Aa,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(SS(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return SS(this),ge(this.encoder)}}class t9{constructor(){this.sarr=[],this.s="",this.lensE=new Vc}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new Aa;return this.sarr.push(this.s),this.s="",Bi(e,this.sarr.join("")),Kf(e,this.lensE.toUint8Array()),ge(e)}}const Xr=t=>new Error(t),An=()=>{throw Xr("Method unimplemented")},Nn=()=>{throw Xr("Unexpected case")},mM=Xr("Unexpected end of array"),gM=Xr("Integer out of Range");let qf=class{constructor(e){this.arr=e,this.pos=0}};const ui=t=>new qf(t),n9=t=>t.pos!==t.arr.length,r9=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},nt=t=>r9(t,V(t)),fs=t=>t.arr[t.pos++],V=t=>{let e=0,n=1;const r=t.arr.length;for(;t.pos<r;){const i=t.arr[t.pos++];if(e=e+(i&$i)*n,n*=128,i<Rt)return e;if(e>pM)throw gM}throw mM},Cy=t=>{let e=t.arr[t.pos++],n=e&dm,r=64;const i=(e&er)>0?-1:1;if(!(e&Rt))return i*n;const o=t.arr.length;for(;t.pos<o;){if(e=t.arr[t.pos++],n=n+(e&$i)*r,r*=128,e<Rt)return i*n;if(n>pM)throw gM}throw mM},i9=t=>{let e=V(t);if(e===0)return"";{let n=String.fromCodePoint(fs(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(fs(t));else for(;e>0;){const r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},o9=t=>wl.decode(nt(t)),Wr=wl?o9:i9,Ey=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},s9=t=>Ey(t,4).getFloat32(0,!1),l9=t=>Ey(t,8).getFloat64(0,!1),a9=t=>Ey(t,8).getBigInt64(0,!1),c9=[t=>{},t=>null,Cy,s9,l9,a9,t=>!1,t=>!0,Wr,t=>{const e=V(t),n={};for(let r=0;r<e;r++){const i=Wr(t);n[i]=aa(t)}return n},t=>{const e=V(t),n=[];for(let r=0;r<e;r++)n.push(aa(t));return n},nt],aa=t=>c9[127-fs(t)](t);class bS extends qf{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),n9(this)?this.count=V(this)+1:this.count=-1),this.count--,this.s}}class zc extends qf{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=Cy(this);const e=hM(this.s);this.count=1,e&&(this.s=-this.s,this.count=V(this)+2)}return this.count--,this.s}}class mh extends qf{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=Cy(this),n=e&1;this.diff=lr(e/2),this.count=1,n&&(this.count=V(this)+2)}return this.s+=this.diff,this.count--,this.s}}class u9{constructor(e){this.decoder=new zc(e),this.str=Wr(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}}const f9=crypto.getRandomValues.bind(crypto),yM=()=>f9(new Uint32Array(1))[0],d9=[1e7]+-1e3+-4e3+-8e3+-1e11,h9=()=>d9.replace(/[018]/g,t=>(t^yM()&15>>t/4).toString(16)),Yi=Date.now,kS=t=>new Promise(t);Promise.all.bind(Promise);const CS=t=>t===void 0?null:t;let p9=class{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}},vM=new p9,xy=!0;try{typeof localStorage<"u"&&localStorage&&(vM=localStorage,xy=!1)}catch{}const wM=vM,m9=t=>xy||addEventListener("storage",t),g9=t=>xy||removeEventListener("storage",t),y9=Object.assign,SM=Object.keys,v9=(t,e)=>{for(const n in t)e(t[n],n)},w9=(t,e)=>{const n=[];for(const r in t)n.push(e(t[r],r));return n},ES=t=>SM(t).length,xS=t=>SM(t).length,S9=t=>{for(const e in t)return!1;return!0},b9=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},bM=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),k9=(t,e)=>t===e||xS(t)===xS(e)&&b9(t,(n,r)=>(n!==void 0||bM(e,r))&&e[r]===n),C9=Object.freeze,kM=t=>{for(const e in t){const n=t[e];(typeof n=="object"||typeof n=="function")&&kM(t[e])}return C9(t)},TS=Symbol("Equality"),Ty=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&Ty(t,e,n+1)}},E9=t=>t,Sl=(t,e)=>{if(t===e)return!0;if(t==null||e==null||t.constructor!==e.constructor)return!1;if(t[TS]!=null)return t[TS](e);switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:{if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;break}case Set:{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;break}case Map:{if(t.size!==e.size)return!1;for(const n of t.keys())if(!e.has(n)||!Sl(t.get(n),e.get(n)))return!1;break}case Object:if(ES(t)!==ES(e))return!1;for(const n in t)if(!bM(t,n)||!Sl(t[n],e[n]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Sl(t[n],e[n]))return!1;break;default:return!1}return!0},x9=(t,e)=>e.includes(t),Zr=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",CM=typeof window<"u"&&typeof document<"u"&&!Zr;let bn;const T9=()=>{if(bn===void 0)if(Zr){bn=Ot();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];r[0]==="-"?(e!==null&&bn.set(e,""),e=r):e!==null&&(bn.set(e,r),e=null)}e!==null&&bn.set(e,"")}else typeof location=="object"?(bn=Ot(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,n]=t.split("=");bn.set(`--${gS(e,"-")}`,n),bn.set(`-${gS(e,"-")}`,n)}})):bn=Ot();return bn},mm=t=>T9().has(t),zu=t=>CS(Zr?process.env[t.toUpperCase().replaceAll("-","_")]:wM.getItem(t)),EM=t=>mm("--"+t)||zu(t)!==null;EM("production");const M9=Zr&&x9({}.FORCE_COLOR,["true","1","2"]),O9=M9||!mm("--no-colors")&&!EM("no-color")&&(!Zr||process.stdout.isTTY)&&(!Zr||mm("--color")||zu("COLORTERM")!==null||(zu("TERM")||"").includes("color")),xM=t=>new Uint8Array(t),A9=(t,e,n)=>new Uint8Array(t,e,n),D9=t=>new Uint8Array(t),_9=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=F7(t[n]);return btoa(e)},P9=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),N9=t=>{const e=atob(t),n=xM(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},I9=t=>{const e=Buffer.from(t,"base64");return A9(e.buffer,e.byteOffset,e.byteLength)},R9=CM?_9:P9,L9=CM?N9:I9,$9=t=>{const e=xM(t.byteLength);return e.set(t),e};class B9{constructor(e,n){this.left=e,this.right=n}}const Hn=(t,e)=>new B9(t,e);typeof DOMParser<"u"&&new DOMParser;const F9=t=>_7(t,(e,n)=>`${n}:${e};`).join(""),ur=Symbol,TM=ur(),MM=ur(),j9=ur(),V9=ur(),z9=ur(),OM=ur(),U9=ur(),My=ur(),H9=ur(),W9=t=>{var i;t.length===1&&((i=t[0])==null?void 0:i.constructor)===Function&&(t=t[0]());const e=[],n=[];let r=0;for(;r<t.length;r++){const o=t[r];if(o===void 0)break;if(o.constructor===String||o.constructor===Number)e.push(o);else if(o.constructor===Object)break}for(r>0&&n.push(e.join(""));r<t.length;r++){const o=t[r];o instanceof Symbol||n.push(o)}return n},G9={[TM]:Hn("font-weight","bold"),[MM]:Hn("font-weight","normal"),[j9]:Hn("color","blue"),[z9]:Hn("color","green"),[V9]:Hn("color","grey"),[OM]:Hn("color","red"),[U9]:Hn("color","purple"),[My]:Hn("color","orange"),[H9]:Hn("color","black")},K9=t=>{var s;t.length===1&&((s=t[0])==null?void 0:s.constructor)===Function&&(t=t[0]());const e=[],n=[],r=Ot();let i=[],o=0;for(;o<t.length;o++){const l=t[o],a=G9[l];if(a!==void 0)r.set(a.left,a.right);else{if(l===void 0)break;if(l.constructor===String||l.constructor===Number){const c=F9(r);o>0||c.length>0?(e.push("%c"+l),n.push(c)):e.push(l)}else break}}for(o>0&&(i=n,i.unshift(e.join("")));o<t.length;o++){const l=t[o];l instanceof Symbol||i.push(l)}return i},AM=O9?K9:W9,q9=(...t)=>{console.log(...AM(t)),DM.forEach(e=>e.print(t))},J9=(...t)=>{console.warn(...AM(t)),t.unshift(My),DM.forEach(e=>e.print(t))},DM=Qr(),_M=t=>({[Symbol.iterator](){return this},next:t}),Y9=(t,e)=>_M(()=>{let n;do n=t.next();while(!n.done&&!e(n.value));return n}),gh=(t,e)=>_M(()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}});class Oy{constructor(e,n){this.clock=e,this.len=n}}class Da{constructor(){this.clients=new Map}}const PM=(t,e,n)=>e.clients.forEach((r,i)=>{const o=t.doc.store.clients.get(i);if(o!=null){const s=o[o.length-1],l=s.id.clock+s.length;for(let a=0,c=r[a];a<r.length&&c.clock<l;c=r[++a])qM(t,o,c.clock,c.len,n)}}),Q9=(t,e)=>{let n=0,r=t.length-1;for(;n<=r;){const i=lr((n+r)/2),o=t[i],s=o.clock;if(s<=e){if(e<s+o.len)return i;n=i+1}else r=i-1}return null},NM=(t,e)=>{const n=t.clients.get(e.client);return n!==void 0&&Q9(n,e.clock)!==null},Ay=t=>{t.clients.forEach(e=>{e.sort((i,o)=>i.clock-o.clock);let n,r;for(n=1,r=1;n<e.length;n++){const i=e[r-1],o=e[n];i.clock+i.len>=o.clock?i.len=io(i.len,o.clock+o.len-i.clock):(r<n&&(e[r]=o),r++)}e.length=r})},X9=t=>{const e=new Da;for(let n=0;n<t.length;n++)t[n].clients.forEach((r,i)=>{if(!e.clients.has(i)){const o=r.slice();for(let s=n+1;s<t.length;s++)N7(o,t[s].clients.get(i)||[]);e.clients.set(i,o)}});return Ay(e),e},Uu=(t,e,n,r)=>{Fn(t.clients,e,()=>[]).push(new Oy(n,r))},Z9=()=>new Da,eK=t=>{const e=Z9();return t.clients.forEach((n,r)=>{const i=[];for(let o=0;o<n.length;o++){const s=n[o];if(s.deleted){const l=s.id.clock;let a=s.length;if(o+1<n.length)for(let c=n[o+1];o+1<n.length&&c.deleted;c=n[++o+1])a+=c.length;i.push(new Oy(l,a))}}i.length>0&&e.clients.set(r,i)}),e},_s=(t,e)=>{B(t.restEncoder,e.clients.size),sr(e.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{t.resetDsCurVal(),B(t.restEncoder,n);const i=r.length;B(t.restEncoder,i);for(let o=0;o<i;o++){const s=r[o];t.writeDsClock(s.clock),t.writeDsLen(s.len)}})},Dy=t=>{const e=new Da,n=V(t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();const i=V(t.restDecoder),o=V(t.restDecoder);if(o>0){const s=Fn(e.clients,i,()=>[]);for(let l=0;l<o;l++)s.push(new Oy(t.readDsClock(),t.readDsLen()))}}return e},MS=(t,e,n)=>{const r=new Da,i=V(t.restDecoder);for(let o=0;o<i;o++){t.resetDsCurVal();const s=V(t.restDecoder),l=V(t.restDecoder),a=n.clients.get(s)||[],c=Fe(n,s);for(let u=0;u<l;u++){const f=t.readDsClock(),d=f+t.readDsLen();if(f<c){c<d&&Uu(r,s,c,d-c);let p=In(a,f),h=a[p];for(!h.deleted&&h.id.clock<f&&(a.splice(p+1,0,Yu(e,h,f-h.id.clock)),p++);p<a.length&&(h=a[p++],h.id.clock<d);)h.deleted||(d<h.id.clock+h.length&&a.splice(p,0,Yu(e,h,d-h.id.clock)),h.delete(e))}else Uu(r,s,f,d-f)}}if(r.clients.size>0){const o=new Qi;return B(o.restEncoder,0),_s(o,r),o.toUint8Array()}return null},IM=yM;class fi extends R7{constructor({guid:e=h9(),collectionid:n=null,gc:r=!0,gcFilter:i=()=>!0,meta:o=null,autoLoad:s=!1,shouldLoad:l=!0}={}){super(),this.gc=r,this.gcFilter=i,this.clientID=IM(),this.guid=e,this.collectionid=n,this.share=new Map,this.store=new GM,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=l,this.autoLoad=s,this.meta=o,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=kS(c=>{this.on("load",()=>{this.isLoaded=!0,c(this)})});const a=()=>kS(c=>{const u=f=>{(f===void 0||f===!0)&&(this.off("sync",u),c())};this.on("sync",u)});this.on("sync",c=>{c===!1&&this.isSynced&&(this.whenSynced=a()),this.isSynced=c===void 0||c===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=a()}load(){const e=this._item;e!==null&&!this.shouldLoad&&le(e.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(sr(this.subdocs).map(e=>e.guid))}transact(e,n=null){return le(this,e,n)}get(e,n=Qe){const r=Fn(this.share,e,()=>{const o=new n;return o._integrate(this,null),o}),i=r.constructor;if(n!==Qe&&i!==n)if(i===Qe){const o=new n;o._map=r._map,r._map.forEach(s=>{for(;s!==null;s=s.left)s.parent=o}),o._start=r._start;for(let s=o._start;s!==null;s=s.right)s.parent=o;return o._length=r._length,this.share.set(e,o),o._integrate(this,null),o}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,Uo)}getText(e=""){return this.get(e,ps)}getMap(e=""){return this.get(e,hs)}getXmlElement(e=""){return this.get(e,ms)}getXmlFragment(e=""){return this.get(e,Xi)}toJSON(){const e={};return this.share.forEach((n,r)=>{e[r]=n.toJSON()}),e}destroy(){this.isDestroyed=!0,sr(this.subdocs).forEach(n=>n.destroy());const e=this._item;if(e!==null){this._item=null;const n=e.content;n.doc=new fi({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=e,le(e.parent.doc,r=>{const i=n.doc;e.deleted||r.subdocsAdded.add(i),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class RM{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return V(this.restDecoder)}readDsLen(){return V(this.restDecoder)}}class LM extends RM{readLeftID(){return J(V(this.restDecoder),V(this.restDecoder))}readRightID(){return J(V(this.restDecoder),V(this.restDecoder))}readClient(){return V(this.restDecoder)}readInfo(){return fs(this.restDecoder)}readString(){return Wr(this.restDecoder)}readParentInfo(){return V(this.restDecoder)===1}readTypeRef(){return V(this.restDecoder)}readLen(){return V(this.restDecoder)}readAny(){return aa(this.restDecoder)}readBuf(){return $9(nt(this.restDecoder))}readJSON(){return JSON.parse(Wr(this.restDecoder))}readKey(){return Wr(this.restDecoder)}}class tK{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=V(this.restDecoder),this.dsCurrVal}readDsLen(){const e=V(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class ds extends tK{constructor(e){super(e),this.keys=[],V(e),this.keyClockDecoder=new mh(nt(e)),this.clientDecoder=new zc(nt(e)),this.leftClockDecoder=new mh(nt(e)),this.rightClockDecoder=new mh(nt(e)),this.infoDecoder=new bS(nt(e),fs),this.stringDecoder=new u9(nt(e)),this.parentInfoDecoder=new bS(nt(e),fs),this.typeRefDecoder=new zc(nt(e)),this.lenDecoder=new zc(nt(e))}readLeftID(){return new zo(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new zo(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return aa(this.restDecoder)}readBuf(){return nt(this.restDecoder)}readJSON(){return aa(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class $M{constructor(){this.restEncoder=rt()}toUint8Array(){return ge(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){B(this.restEncoder,e)}writeDsLen(e){B(this.restEncoder,e)}}class _a extends $M{writeLeftID(e){B(this.restEncoder,e.client),B(this.restEncoder,e.clock)}writeRightID(e){B(this.restEncoder,e.client),B(this.restEncoder,e.clock)}writeClient(e){B(this.restEncoder,e)}writeInfo(e){hm(this.restEncoder,e)}writeString(e){Bi(this.restEncoder,e)}writeParentInfo(e){B(this.restEncoder,e?1:0)}writeTypeRef(e){B(this.restEncoder,e)}writeLen(e){B(this.restEncoder,e)}writeAny(e){la(this.restEncoder,e)}writeBuf(e){ke(this.restEncoder,e)}writeJSON(e){Bi(this.restEncoder,JSON.stringify(e))}writeKey(e){Bi(this.restEncoder,e)}}class BM{constructor(){this.restEncoder=rt(),this.dsCurrVal=0}toUint8Array(){return ge(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const n=e-this.dsCurrVal;this.dsCurrVal=e,B(this.restEncoder,n)}writeDsLen(e){e===0&&Nn(),B(this.restEncoder,e-1),this.dsCurrVal+=e}}class Qi extends BM{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new ph,this.clientEncoder=new Vc,this.leftClockEncoder=new ph,this.rightClockEncoder=new ph,this.infoEncoder=new vS(hm),this.stringEncoder=new t9,this.parentInfoEncoder=new vS(hm),this.typeRefEncoder=new Vc,this.lenEncoder=new Vc}toUint8Array(){const e=rt();return B(e,0),ke(e,this.keyClockEncoder.toUint8Array()),ke(e,this.clientEncoder.toUint8Array()),ke(e,this.leftClockEncoder.toUint8Array()),ke(e,this.rightClockEncoder.toUint8Array()),ke(e,ge(this.infoEncoder)),ke(e,this.stringEncoder.toUint8Array()),ke(e,ge(this.parentInfoEncoder)),ke(e,this.typeRefEncoder.toUint8Array()),ke(e,this.lenEncoder.toUint8Array()),Kf(e,ge(this.restEncoder)),ge(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){la(this.restEncoder,e)}writeBuf(e){ke(this.restEncoder,e)}writeJSON(e){la(this.restEncoder,e)}writeKey(e){const n=this.keyMap.get(e);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(n)}}const nK=(t,e,n,r)=>{r=io(r,e[0].id.clock);const i=In(e,r);B(t.restEncoder,e.length-i),t.writeClient(n),B(t.restEncoder,r);const o=e[i];o.write(t,r-o.id.clock);for(let s=i+1;s<e.length;s++)e[s].write(t,0)},_y=(t,e,n)=>{const r=new Map;n.forEach((i,o)=>{Fe(e,o)>i&&r.set(o,i)}),Jf(e).forEach((i,o)=>{n.has(o)||r.set(o,0)}),B(t.restEncoder,r.size),sr(r.entries()).sort((i,o)=>o[0]-i[0]).forEach(([i,o])=>{nK(t,e.clients.get(i),i,o)})},rK=(t,e)=>{const n=Ot(),r=V(t.restDecoder);for(let i=0;i<r;i++){const o=V(t.restDecoder),s=new Array(o),l=t.readClient();let a=V(t.restDecoder);n.set(l,{i:0,refs:s});for(let c=0;c<o;c++){const u=t.readInfo();switch(Gf&u){case 0:{const f=t.readLen();s[c]=new Wt(J(l,a),f),a+=f;break}case 10:{const f=V(t.restDecoder);s[c]=new Gt(J(l,a),f),a+=f;break}default:{const f=(u&(er|Rt))===0,d=new De(J(l,a),null,(u&Rt)===Rt?t.readLeftID():null,null,(u&er)===er?t.readRightID():null,f?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,f&&(u&oa)===oa?t.readString():null,hO(t,u));s[c]=d,a+=d.length}}}}return n},iK=(t,e,n)=>{const r=[];let i=sr(n.keys()).sort((p,h)=>p-h);if(i.length===0)return null;const o=()=>{if(i.length===0)return null;let p=n.get(i[i.length-1]);for(;p.refs.length===p.i;)if(i.pop(),i.length>0)p=n.get(i[i.length-1]);else return null;return p};let s=o();if(s===null)return null;const l=new GM,a=new Map,c=(p,h)=>{const m=a.get(p);(m==null||m>h)&&a.set(p,h)};let u=s.refs[s.i++];const f=new Map,d=()=>{for(const p of r){const h=p.id.client,m=n.get(h);m?(m.i--,l.clients.set(h,m.refs.slice(m.i)),n.delete(h),m.i=0,m.refs=[]):l.clients.set(h,[p]),i=i.filter(y=>y!==h)}r.length=0};for(;;){if(u.constructor!==Gt){const h=Fn(f,u.id.client,()=>Fe(e,u.id.client))-u.id.clock;if(h<0)r.push(u),c(u.id.client,u.id.clock-1),d();else{const m=u.getMissing(t,e);if(m!==null){r.push(u);const y=n.get(m)||{refs:[],i:0};if(y.refs.length===y.i)c(m,Fe(e,m)),d();else{u=y.refs[y.i++];continue}}else(h===0||h<u.length)&&(u.integrate(t,h),f.set(u.id.client,u.id.clock+u.length))}}if(r.length>0)u=r.pop();else if(s!==null&&s.i<s.refs.length)u=s.refs[s.i++];else{if(s=o(),s===null)break;u=s.refs[s.i++]}}if(l.clients.size>0){const p=new Qi;return _y(p,l,new Map),B(p.restEncoder,0),{missing:a,update:p.toUint8Array()}}return null},oK=(t,e)=>_y(t,e.doc.store,e.beforeState),sK=(t,e,n,r=new ds(t))=>le(e,i=>{i.local=!1;let o=!1;const s=i.doc,l=s.store,a=rK(r,s),c=iK(i,l,a),u=l.pendingStructs;if(u){for(const[d,p]of u.missing)if(p<Fe(l,d)){o=!0;break}if(c){for(const[d,p]of c.missing){const h=u.missing.get(d);(h==null||h>p)&&u.missing.set(d,p)}u.update=Hu([u.update,c.update])}}else l.pendingStructs=c;const f=MS(r,i,l);if(l.pendingDs){const d=new ds(ui(l.pendingDs));V(d.restDecoder);const p=MS(d,i,l);f&&p?l.pendingDs=Hu([f,p]):l.pendingDs=f||p}else l.pendingDs=f;if(o){const d=l.pendingStructs.update;l.pendingStructs=null,FM(i.doc,d)}},n,!1),FM=(t,e,n,r=ds)=>{const i=ui(e);sK(i,t,n,new r(i))},jM=(t,e,n)=>FM(t,e,n,LM),lK=(t,e,n=new Map)=>{_y(t,e.store,n),_s(t,eK(e.store))},aK=(t,e=new Uint8Array([0]),n=new Qi)=>{const r=zM(e);lK(n,t,r);const i=[n.toUint8Array()];if(t.store.pendingDs&&i.push(t.store.pendingDs),t.store.pendingStructs&&i.push(kK(t.store.pendingStructs.update,e)),i.length>1){if(n.constructor===_a)return SK(i.map((o,s)=>s===0?o:EK(o)));if(n.constructor===Qi)return Hu(i)}return i[0]},VM=(t,e)=>aK(t,e,new _a),cK=t=>{const e=new Map,n=V(t.restDecoder);for(let r=0;r<n;r++){const i=V(t.restDecoder),o=V(t.restDecoder);e.set(i,o)}return e},zM=t=>cK(new RM(ui(t))),UM=(t,e)=>(B(t.restEncoder,e.size),sr(e.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{B(t.restEncoder,n),B(t.restEncoder,r)}),t),uK=(t,e)=>UM(t,Jf(e.store)),fK=(t,e=new BM)=>(t instanceof Map?UM(e,t):uK(e,t),e.toUint8Array()),HM=t=>fK(t,new $M);class dK{constructor(){this.l=[]}}const OS=()=>new dK,AS=(t,e)=>t.l.push(e),DS=(t,e)=>{const n=t.l,r=n.length;t.l=n.filter(i=>e!==i),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},WM=(t,e,n)=>Ty(t.l,[e,n]);class zo{constructor(e,n){this.client=e,this.clock=n}}const mc=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,J=(t,e)=>new zo(t,e),hK=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw Nn()},mo=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!NM(e.ds,t.id),gm=(t,e)=>{const n=Fn(t.meta,gm,Qr),r=t.doc.store;n.has(e)||(e.sv.forEach((i,o)=>{i<Fe(r,o)&&ei(t,J(o,i))}),PM(t,e.ds,i=>{}),n.add(e))};class GM{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Jf=t=>{const e=new Map;return t.clients.forEach((n,r)=>{const i=n[n.length-1];e.set(r,i.id.clock+i.length)}),e},Fe=(t,e)=>{const n=t.clients.get(e);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},KM=(t,e)=>{let n=t.clients.get(e.id.client);if(n===void 0)n=[],t.clients.set(e.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==e.id.clock)throw Nn()}n.push(e)},In=(t,e)=>{let n=0,r=t.length-1,i=t[r],o=i.id.clock;if(o===e)return r;let s=lr(e/(o+i.length-1)*r);for(;n<=r;){if(i=t[s],o=i.id.clock,o<=e){if(e<o+i.length)return s;n=s+1}else r=s-1;s=lr((n+r)/2)}throw Nn()},pK=(t,e)=>{const n=t.clients.get(e.client);return n[In(n,e.clock)]},yh=pK,ym=(t,e,n)=>{const r=In(e,n),i=e[r];return i.id.clock<n&&i instanceof De?(e.splice(r+1,0,Yu(t,i,n-i.id.clock)),r+1):r},ei=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[ym(t,n,e.clock)]},_S=(t,e,n)=>{const r=e.clients.get(n.client),i=In(r,n.clock),o=r[i];return n.clock!==o.id.clock+o.length-1&&o.constructor!==Wt&&r.splice(i+1,0,Yu(t,o,n.clock-o.id.clock+1)),o},mK=(t,e,n)=>{const r=t.clients.get(e.id.client);r[In(r,e.id.clock)]=n},qM=(t,e,n,r,i)=>{if(r===0)return;const o=n+r;let s=ym(t,e,n),l;do l=e[s++],o<l.id.clock+l.length&&ym(t,e,o),i(l);while(s<e.length&&e[s].id.clock<o)};class gK{constructor(e,n,r){this.doc=e,this.deleteSet=new Da,this.beforeState=Jf(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const PS=(t,e)=>e.deleteSet.clients.size===0&&!P7(e.afterState,(n,r)=>e.beforeState.get(r)!==n)?!1:(Ay(e.deleteSet),oK(t,e),_s(t,e.deleteSet),!0),NS=(t,e,n)=>{const r=e._item;(r===null||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&Fn(t.changed,e,Qr).add(n)},Uc=(t,e)=>{let n=t[e],r=t[e-1],i=e;for(;i>0;n=r,r=t[--i-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof De&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const o=e-i;return o&&t.splice(e+1-o,o),o},yK=(t,e,n)=>{for(const[r,i]of t.clients.entries()){const o=e.clients.get(r);for(let s=i.length-1;s>=0;s--){const l=i[s],a=l.clock+l.len;for(let c=In(o,l.clock),u=o[c];c<o.length&&u.id.clock<a;u=o[++c]){const f=o[c];if(l.clock+l.len<=f.id.clock)break;f instanceof De&&f.deleted&&!f.keep&&n(f)&&f.gc(e,!1)}}}},vK=(t,e)=>{t.clients.forEach((n,r)=>{const i=e.clients.get(r);for(let o=n.length-1;o>=0;o--){const s=n[o],l=wy(i.length-1,1+In(i,s.clock+s.len-1));for(let a=l,c=i[a];a>0&&c.id.clock>=s.clock;c=i[a])a-=1+Uc(i,a)}})},JM=(t,e)=>{if(e<t.length){const n=t[e],r=n.doc,i=r.store,o=n.deleteSet,s=n._mergeStructs;try{Ay(o),n.afterState=Jf(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const l=[];n.changed.forEach((a,c)=>l.push(()=>{(c._item===null||!c._item.deleted)&&c._callObserver(n,a)})),l.push(()=>{n.changedParentTypes.forEach((a,c)=>{c._dEH.l.length>0&&(c._item===null||!c._item.deleted)&&(a=a.filter(u=>u.target._item===null||!u.target._item.deleted),a.forEach(u=>{u.currentTarget=c,u._path=null}),a.sort((u,f)=>u.path.length-f.path.length),WM(c._dEH,a,n))})}),l.push(()=>r.emit("afterTransaction",[n,r])),Ty(l,[]),n._needFormattingCleanup&&BK(n)}finally{r.gc&&yK(o,i,r.gcFilter),vK(o,i),n.afterState.forEach((u,f)=>{const d=n.beforeState.get(f)||0;if(d!==u){const p=i.clients.get(f),h=io(In(p,d),1);for(let m=p.length-1;m>=h;)m-=1+Uc(p,m)}});for(let u=s.length-1;u>=0;u--){const{client:f,clock:d}=s[u].id,p=i.clients.get(f),h=In(p,d);h+1<p.length&&Uc(p,h+1)>1||h>0&&Uc(p,h)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(q9(My,TM,"[yjs] ",MM,OM,"Changed the client-id because another client seems to be using it."),r.clientID=IM()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const u=new _a;PS(u,n)&&r.emit("update",[u.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const u=new Qi;PS(u,n)&&r.emit("updateV2",[u.toUint8Array(),n.origin,r,n])}const{subdocsAdded:l,subdocsLoaded:a,subdocsRemoved:c}=n;(l.size>0||c.size>0||a.size>0)&&(l.forEach(u=>{u.clientID=r.clientID,u.collectionid==null&&(u.collectionid=r.collectionid),r.subdocs.add(u)}),c.forEach(u=>r.subdocs.delete(u)),r.emit("subdocs",[{loaded:a,added:l,removed:c},r,n]),c.forEach(u=>u.destroy())),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):JM(t,e+1)}}},le=(t,e,n=null,r=!0)=>{const i=t._transactionCleanups;let o=!1,s=null;t._transaction===null&&(o=!0,t._transaction=new gK(t,n,r),i.push(t._transaction),i.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{s=e(t._transaction)}finally{if(o){const l=t._transaction===i[0];t._transaction=null,l&&JM(i,0)}}return s};function*wK(t){const e=V(t.restDecoder);for(let n=0;n<e;n++){const r=V(t.restDecoder),i=t.readClient();let o=V(t.restDecoder);for(let s=0;s<r;s++){const l=t.readInfo();if(l===10){const a=V(t.restDecoder);yield new Gt(J(i,o),a),o+=a}else if(Gf&l){const a=(l&(er|Rt))===0,c=new De(J(i,o),null,(l&Rt)===Rt?t.readLeftID():null,null,(l&er)===er?t.readRightID():null,a?t.readParentInfo()?t.readString():t.readLeftID():null,a&&(l&oa)===oa?t.readString():null,hO(t,l));yield c,o+=c.length}else{const a=t.readLen();yield new Wt(J(i,o),a),o+=a}}}}class Py{constructor(e,n){this.gen=wK(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Gt);return this.curr}}class Ny{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const SK=t=>Hu(t,LM,_a),bK=(t,e)=>{if(t.constructor===Wt){const{client:n,clock:r}=t.id;return new Wt(J(n,r+e),t.length-e)}else if(t.constructor===Gt){const{client:n,clock:r}=t.id;return new Gt(J(n,r+e),t.length-e)}else{const n=t,{client:r,clock:i}=n.id;return new De(J(r,i+e),null,J(r,i+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},Hu=(t,e=ds,n=Qi)=>{if(t.length===1)return t[0];const r=t.map(u=>new e(ui(u)));let i=r.map(u=>new Py(u,!0)),o=null;const s=new n,l=new Ny(s);for(;i=i.filter(d=>d.curr!==null),i.sort((d,p)=>{if(d.curr.id.client===p.curr.id.client){const h=d.curr.id.clock-p.curr.id.clock;return h===0?d.curr.constructor===p.curr.constructor?0:d.curr.constructor===Gt?1:-1:h}else return p.curr.id.client-d.curr.id.client}),i.length!==0;){const u=i[0],f=u.curr.id.client;if(o!==null){let d=u.curr,p=!1;for(;d!==null&&d.id.clock+d.length<=o.struct.id.clock+o.struct.length&&d.id.client>=o.struct.id.client;)d=u.next(),p=!0;if(d===null||d.id.client!==f||p&&d.id.clock>o.struct.id.clock+o.struct.length)continue;if(f!==o.struct.id.client)Cr(l,o.struct,o.offset),o={struct:d,offset:0},u.next();else if(o.struct.id.clock+o.struct.length<d.id.clock)if(o.struct.constructor===Gt)o.struct.length=d.id.clock+d.length-o.struct.id.clock;else{Cr(l,o.struct,o.offset);const h=d.id.clock-o.struct.id.clock-o.struct.length;o={struct:new Gt(J(f,o.struct.id.clock+o.struct.length),h),offset:0}}else{const h=o.struct.id.clock+o.struct.length-d.id.clock;h>0&&(o.struct.constructor===Gt?o.struct.length-=h:d=bK(d,h)),o.struct.mergeWith(d)||(Cr(l,o.struct,o.offset),o={struct:d,offset:0},u.next())}}else o={struct:u.curr,offset:0},u.next();for(let d=u.curr;d!==null&&d.id.client===f&&d.id.clock===o.struct.id.clock+o.struct.length&&d.constructor!==Gt;d=u.next())Cr(l,o.struct,o.offset),o={struct:d,offset:0}}o!==null&&(Cr(l,o.struct,o.offset),o=null),Iy(l);const a=r.map(u=>Dy(u)),c=X9(a);return _s(s,c),s.toUint8Array()},kK=(t,e,n=ds,r=Qi)=>{const i=zM(e),o=new r,s=new Ny(o),l=new n(ui(t)),a=new Py(l,!1);for(;a.curr;){const u=a.curr,f=u.id.client,d=i.get(f)||0;if(a.curr.constructor===Gt){a.next();continue}if(u.id.clock+u.length>d)for(Cr(s,u,io(d-u.id.clock,0)),a.next();a.curr&&a.curr.id.client===f;)Cr(s,a.curr,0),a.next();else for(;a.curr&&a.curr.id.client===f&&a.curr.id.clock+a.curr.length<=d;)a.next()}Iy(s);const c=Dy(l);return _s(o,c),o.toUint8Array()},YM=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:ge(t.encoder.restEncoder)}),t.encoder.restEncoder=rt(),t.written=0)},Cr=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&YM(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),B(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},Iy=t=>{YM(t);const e=t.encoder.restEncoder;B(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const r=t.clientStructs[n];B(e,r.written),Kf(e,r.restEncoder)}},CK=(t,e,n,r)=>{const i=new n(ui(t)),o=new Py(i,!1),s=new r,l=new Ny(s);for(let c=o.curr;c!==null;c=o.next())Cr(l,e(c),0);Iy(l);const a=Dy(i);return _s(s,a),s.toUint8Array()},EK=t=>CK(t,E9,ds,_a),IS="You must not compute changes after the event-handler fired.";class Yf{constructor(e,n){this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=xK(this.currentTarget,this.target))}deletes(e){return NM(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw Xr(IS);const e=new Map,n=this.target;this.transaction.changed.get(n).forEach(i=>{if(i!==null){const o=n._map.get(i);let s,l;if(this.adds(o)){let a=o.left;for(;a!==null&&this.adds(a);)a=a.left;if(this.deletes(o))if(a!==null&&this.deletes(a))s="delete",l=fh(a.content.getContent());else return;else a!==null&&this.deletes(a)?(s="update",l=fh(a.content.getContent())):(s="add",l=void 0)}else if(this.deletes(o))s="delete",l=fh(o.content.getContent());else return;e.set(i,{action:s,oldValue:l})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw Xr(IS);const n=this.target,r=Qr(),i=Qr(),o=[];if(e={added:r,deleted:i,delta:o,keys:this.keys},this.transaction.changed.get(n).has(null)){let l=null;const a=()=>{l&&o.push(l)};for(let c=n._start;c!==null;c=c.right)c.deleted?this.deletes(c)&&!this.adds(c)&&((l===null||l.delete===void 0)&&(a(),l={delete:0}),l.delete+=c.length,i.add(c)):this.adds(c)?((l===null||l.insert===void 0)&&(a(),l={insert:[]}),l.insert=l.insert.concat(c.content.getContent()),r.add(c)):((l===null||l.retain===void 0)&&(a(),l={retain:0}),l.retain+=c.length);l!==null&&l.retain===void 0&&a()}this._changes=e}return e}}const xK=(t,e)=>{const n=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)n.unshift(e._item.parentSub);else{let r=0,i=e._item.parent._start;for(;i!==e._item&&i!==null;)!i.deleted&&i.countable&&(r+=i.length),i=i.right;n.unshift(r)}e=e._item.parent}return n},lt=()=>{J9("Invalid access: Add Yjs type to a document before reading data.")},QM=80;let Ry=0;class TK{constructor(e,n){e.marker=!0,this.p=e,this.index=n,this.timestamp=Ry++}}const MK=t=>{t.timestamp=Ry++},XM=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=Ry++},OK=(t,e,n)=>{if(t.length>=QM){const r=t.reduce((i,o)=>i.timestamp<o.timestamp?i:o);return XM(r,e,n),r}else{const r=new TK(e,n);return t.push(r),r}},Qf=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;const n=t._searchMarker.length===0?null:t._searchMarker.reduce((o,s)=>jc(e-o.index)<jc(e-s.index)?o:s);let r=t._start,i=0;for(n!==null&&(r=n.p,i=n.index,MK(n));r.right!==null&&i<e;){if(!r.deleted&&r.countable){if(e<i+r.length)break;i+=r.length}r=r.right}for(;r.left!==null&&i>e;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return n!==null&&jc(n.index-i)<r.parent.length/QM?(XM(n,r,i),n):OK(t._searchMarker,r,i)},ca=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){const i=t[r];if(n>0){let o=i.p;for(o.marker=!1;o&&(o.deleted||!o.countable);)o=o.left,o&&!o.deleted&&o.countable&&(i.index-=o.length);if(o===null||o.marker===!0){t.splice(r,1);continue}i.p=o,o.marker=!0}(e<i.index||n>0&&e===i.index)&&(i.index=io(e,i.index+n))}},Xf=(t,e,n)=>{const r=t,i=e.changedParentTypes;for(;Fn(i,t,()=>[]).push(n),t._item!==null;)t=t._item.parent;WM(r._eH,n,e)};class Qe{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=OS(),this._dEH=OS(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,n){this.doc=e,this._item=n}_copy(){throw An()}clone(){throw An()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,n){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){AS(this._eH,e)}observeDeep(e){AS(this._dEH,e)}unobserve(e){DS(this._eH,e)}unobserveDeep(e){DS(this._dEH,e)}toJSON(){}}const ZM=(t,e,n)=>{t.doc??lt(),e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e;const i=[];let o=t._start;for(;o!==null&&r>0;){if(o.countable&&!o.deleted){const s=o.content.getContent();if(s.length<=e)e-=s.length;else{for(let l=e;l<s.length&&r>0;l++)i.push(s[l]),r--;e=0}}o=o.right}return i},eO=t=>{t.doc??lt();const e=[];let n=t._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let i=0;i<r.length;i++)e.push(r[i])}n=n.right}return e},ua=(t,e)=>{let n=0,r=t._start;for(t.doc??lt();r!==null;){if(r.countable&&!r.deleted){const i=r.content.getContent();for(let o=0;o<i.length;o++)e(i[o],n++,t)}r=r.right}},tO=(t,e)=>{const n=[];return ua(t,(r,i)=>{n.push(e(r,i,t))}),n},AK=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const i=n[r++];return n.length<=r&&(n=null),{done:!1,value:i}}}},nO=(t,e)=>{t.doc??lt();const n=Qf(t,e);let r=t._start;for(n!==null&&(r=n.p,e-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},Wu=(t,e,n,r)=>{let i=n;const o=t.doc,s=o.clientID,l=o.store,a=n===null?e._start:n.right;let c=[];const u=()=>{c.length>0&&(i=new De(J(s,Fe(l,s)),i,i&&i.lastId,a,a&&a.id,e,null,new Zi(c)),i.integrate(t,0),c=[])};r.forEach(f=>{if(f===null)c.push(f);else switch(f.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(f);break;default:switch(u(),f.constructor){case Uint8Array:case ArrayBuffer:i=new De(J(s,Fe(l,s)),i,i&&i.lastId,a,a&&a.id,e,null,new Pa(new Uint8Array(f))),i.integrate(t,0);break;case fi:i=new De(J(s,Fe(l,s)),i,i&&i.lastId,a,a&&a.id,e,null,new Na(f)),i.integrate(t,0);break;default:if(f instanceof Qe)i=new De(J(s,Fe(l,s)),i,i&&i.lastId,a,a&&a.id,e,null,new fr(f)),i.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),u()},rO=()=>Xr("Length exceeded!"),iO=(t,e,n,r)=>{if(n>e._length)throw rO();if(n===0)return e._searchMarker&&ca(e._searchMarker,n,r.length),Wu(t,e,null,r);const i=n,o=Qf(e,n);let s=e._start;for(o!==null&&(s=o.p,n-=o.index,n===0&&(s=s.prev,n+=s&&s.countable&&!s.deleted?s.length:0));s!==null;s=s.right)if(!s.deleted&&s.countable){if(n<=s.length){n<s.length&&ei(t,J(s.id.client,s.id.clock+n));break}n-=s.length}return e._searchMarker&&ca(e._searchMarker,i,r.length),Wu(t,e,s,r)},DK=(t,e,n)=>{let i=(e._searchMarker||[]).reduce((o,s)=>s.index>o.index?s:o,{index:0,p:e._start}).p;if(i)for(;i.right;)i=i.right;return Wu(t,e,i,n)},oO=(t,e,n,r)=>{if(r===0)return;const i=n,o=r,s=Qf(e,n);let l=e._start;for(s!==null&&(l=s.p,n-=s.index);l!==null&&n>0;l=l.right)!l.deleted&&l.countable&&(n<l.length&&ei(t,J(l.id.client,l.id.clock+n)),n-=l.length);for(;r>0&&l!==null;)l.deleted||(r<l.length&&ei(t,J(l.id.client,l.id.clock+r)),l.delete(t),r-=l.length),l=l.right;if(r>0)throw rO();e._searchMarker&&ca(e._searchMarker,i,-o+r)},Gu=(t,e,n)=>{const r=e._map.get(n);r!==void 0&&r.delete(t)},Ly=(t,e,n,r)=>{const i=e._map.get(n)||null,o=t.doc,s=o.clientID;let l;if(r==null)l=new Zi([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:l=new Zi([r]);break;case Uint8Array:l=new Pa(r);break;case fi:l=new Na(r);break;default:if(r instanceof Qe)l=new fr(r);else throw new Error("Unexpected content type")}new De(J(s,Fe(o.store,s)),i,i&&i.lastId,null,null,e,n,l).integrate(t,0)},$y=(t,e)=>{t.doc??lt();const n=t._map.get(e);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},sO=t=>{const e={};return t.doc??lt(),t._map.forEach((n,r)=>{n.deleted||(e[r]=n.content.getContent()[n.length-1])}),e},lO=(t,e)=>{t.doc??lt();const n=t._map.get(e);return n!==void 0&&!n.deleted},_K=(t,e)=>{const n={};return t._map.forEach((r,i)=>{let o=r;for(;o!==null&&(!e.sv.has(o.id.client)||o.id.clock>=(e.sv.get(o.id.client)||0));)o=o.left;o!==null&&mo(o,e)&&(n[i]=o.content.getContent()[o.length-1])}),n},gc=t=>(t.doc??lt(),Y9(t._map.entries(),e=>!e[1].deleted));class PK extends Yf{}class Uo extends Qe{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const n=new Uo;return n.push(e),n}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Uo}clone(){const e=new Uo;return e.insert(0,this.toArray().map(n=>n instanceof Qe?n.clone():n)),e}get length(){return this.doc??lt(),this._length}_callObserver(e,n){super._callObserver(e,n),Xf(this,e,new PK(this,e))}insert(e,n){this.doc!==null?le(this.doc,r=>{iO(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}push(e){this.doc!==null?le(this.doc,n=>{DK(n,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,n=1){this.doc!==null?le(this.doc,r=>{oO(r,this,e,n)}):this._prelimContent.splice(e,n)}get(e){return nO(this,e)}toArray(){return eO(this)}slice(e=0,n=this.length){return ZM(this,e,n)}toJSON(){return this.map(e=>e instanceof Qe?e.toJSON():e)}map(e){return tO(this,e)}forEach(e){ua(this,e)}[Symbol.iterator](){return AK(this)}_write(e){e.writeTypeRef(rq)}}const NK=t=>new Uo;class IK extends Yf{constructor(e,n,r){super(e,n),this.keysChanged=r}}class hs extends Qe{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,n){super._integrate(e,n),this._prelimContent.forEach((r,i)=>{this.set(i,r)}),this._prelimContent=null}_copy(){return new hs}clone(){const e=new hs;return this.forEach((n,r)=>{e.set(r,n instanceof Qe?n.clone():n)}),e}_callObserver(e,n){Xf(this,e,new IK(this,e,n))}toJSON(){this.doc??lt();const e={};return this._map.forEach((n,r)=>{if(!n.deleted){const i=n.content.getContent()[n.length-1];e[r]=i instanceof Qe?i.toJSON():i}}),e}get size(){return[...gc(this)].length}keys(){return gh(gc(this),e=>e[0])}values(){return gh(gc(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return gh(gc(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??lt(),this._map.forEach((n,r)=>{n.deleted||e(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?le(this.doc,n=>{Gu(n,this,e)}):this._prelimContent.delete(e)}set(e,n){return this.doc!==null?le(this.doc,r=>{Ly(r,this,e,n)}):this._prelimContent.set(e,n),n}get(e){return $y(this,e)}has(e){return lO(this,e)}clear(){this.doc!==null?le(this.doc,e=>{this.forEach(function(n,r,i){Gu(e,i,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(iq)}}const RK=t=>new hs,_r=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&k9(t,e);class vm{constructor(e,n,r,i){this.left=e,this.right=n,this.index=r,this.currentAttributes=i}forward(){switch(this.right===null&&Nn(),this.right.content.constructor){case _e:this.right.deleted||Ps(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const RS=(t,e,n)=>{for(;e.right!==null&&n>0;){switch(e.right.content.constructor){case _e:e.right.deleted||Ps(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&ei(t,J(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},yc=(t,e,n,r)=>{const i=new Map,o=r?Qf(e,n):null;if(o){const s=new vm(o.p.left,o.p,o.index,i);return RS(t,s,n-o.index)}else{const s=new vm(null,e._start,0,i);return RS(t,s,n)}},aO=(t,e,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===_e&&_r(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const i=t.doc,o=i.clientID;r.forEach((s,l)=>{const a=n.left,c=n.right,u=new De(J(o,Fe(i.store,o)),a,a&&a.lastId,c,c&&c.id,e,null,new _e(l,s));u.integrate(t,0),n.right=u,n.forward()})},Ps=(t,e)=>{const{key:n,value:r}=e;r===null?t.delete(n):t.set(n,r)},cO=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===_e&&_r(e[t.right.content.key]??null,t.right.content.value)))break;t.forward()}},uO=(t,e,n,r)=>{const i=t.doc,o=i.clientID,s=new Map;for(const l in r){const a=r[l],c=n.currentAttributes.get(l)??null;if(!_r(c,a)){s.set(l,c);const{left:u,right:f}=n;n.right=new De(J(o,Fe(i.store,o)),u,u&&u.lastId,f,f&&f.id,e,null,new _e(l,a)),n.right.integrate(t,0),n.forward()}}return s},vh=(t,e,n,r,i)=>{n.currentAttributes.forEach((d,p)=>{i[p]===void 0&&(i[p]=null)});const o=t.doc,s=o.clientID;cO(n,i);const l=uO(t,e,n,i),a=r.constructor===String?new Rn(r):r instanceof Qe?new fr(r):new oo(r);let{left:c,right:u,index:f}=n;e._searchMarker&&ca(e._searchMarker,n.index,a.getLength()),u=new De(J(s,Fe(o.store,s)),c,c&&c.lastId,u,u&&u.id,e,null,a),u.integrate(t,0),n.right=u,n.index=f,n.forward(),aO(t,e,n,l)},LS=(t,e,n,r,i)=>{const o=t.doc,s=o.clientID;cO(n,i);const l=uO(t,e,n,i);e:for(;n.right!==null&&(r>0||l.size>0&&(n.right.deleted||n.right.content.constructor===_e));){if(!n.right.deleted)switch(n.right.content.constructor){case _e:{const{key:a,value:c}=n.right.content,u=i[a];if(u!==void 0){if(_r(u,c))l.delete(a);else{if(r===0)break e;l.set(a,c)}n.right.delete(t)}else n.currentAttributes.set(a,c);break}default:r<n.right.length&&ei(t,J(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let a="";for(;r>0;r--)a+=`
`;n.right=new De(J(s,Fe(o.store,s)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new Rn(a)),n.right.integrate(t,0),n.forward()}aO(t,e,n,l)},fO=(t,e,n,r,i)=>{let o=e;const s=Ot();for(;o&&(!o.countable||o.deleted);){if(!o.deleted&&o.content.constructor===_e){const c=o.content;s.set(c.key,c)}o=o.right}let l=0,a=!1;for(;e!==o;){if(n===e&&(a=!0),!e.deleted){const c=e.content;switch(c.constructor){case _e:{const{key:u,value:f}=c,d=r.get(u)??null;(s.get(u)!==c||d===f)&&(e.delete(t),l++,!a&&(i.get(u)??null)===f&&d!==f&&(d===null?i.delete(u):i.set(u,d))),!a&&!e.deleted&&Ps(i,c);break}}}e=e.right}return l},LK=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===_e){const r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},$K=t=>{let e=0;return le(t.doc,n=>{let r=t._start,i=t._start,o=Ot();const s=fm(o);for(;i;){if(i.deleted===!1)switch(i.content.constructor){case _e:Ps(s,i.content);break;default:e+=fO(n,r,i,o,s),o=fm(s),r=i;break}i=i.right}}),e},BK=t=>{const e=new Set,n=t.doc;for(const[r,i]of t.afterState.entries()){const o=t.beforeState.get(r)||0;i!==o&&qM(t,n.store.clients.get(r),o,i,s=>{!s.deleted&&s.content.constructor===_e&&s.constructor!==Wt&&e.add(s.parent)})}le(n,r=>{PM(t,t.deleteSet,i=>{if(i instanceof Wt||!i.parent._hasFormatting||e.has(i.parent))return;const o=i.parent;i.content.constructor===_e?e.add(o):LK(r,i)});for(const i of e)$K(i)})},$S=(t,e,n)=>{const r=n,i=fm(e.currentAttributes),o=e.right;for(;n>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case fr:case oo:case Rn:n<e.right.length&&ei(t,J(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}o&&fO(t,o,e.right,i,e.currentAttributes);const s=(e.left||e.right).parent;return s._searchMarker&&ca(s._searchMarker,e.index,-r+n),e};class FK extends Yf{constructor(e,n,r){super(e,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(i=>{i===null?this.childListChanged=!0:this.keysChanged.add(i)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,n=[];le(e,r=>{const i=new Map,o=new Map;let s=this.target._start,l=null;const a={};let c="",u=0,f=0;const d=()=>{if(l!==null){let p=null;switch(l){case"delete":f>0&&(p={delete:f}),f=0;break;case"insert":(typeof c=="object"||c.length>0)&&(p={insert:c},i.size>0&&(p.attributes={},i.forEach((h,m)=>{h!==null&&(p.attributes[m]=h)}))),c="";break;case"retain":u>0&&(p={retain:u},S9(a)||(p.attributes=y9({},a))),u=0;break}p&&n.push(p),l=null}};for(;s!==null;){switch(s.content.constructor){case fr:case oo:this.adds(s)?this.deletes(s)||(d(),l="insert",c=s.content.getContent()[0],d()):this.deletes(s)?(l!=="delete"&&(d(),l="delete"),f+=1):s.deleted||(l!=="retain"&&(d(),l="retain"),u+=1);break;case Rn:this.adds(s)?this.deletes(s)||(l!=="insert"&&(d(),l="insert"),c+=s.content.str):this.deletes(s)?(l!=="delete"&&(d(),l="delete"),f+=s.length):s.deleted||(l!=="retain"&&(d(),l="retain"),u+=s.length);break;case _e:{const{key:p,value:h}=s.content;if(this.adds(s)){if(!this.deletes(s)){const m=i.get(p)??null;_r(m,h)?h!==null&&s.delete(r):(l==="retain"&&d(),_r(h,o.get(p)??null)?delete a[p]:a[p]=h)}}else if(this.deletes(s)){o.set(p,h);const m=i.get(p)??null;_r(m,h)||(l==="retain"&&d(),a[p]=m)}else if(!s.deleted){o.set(p,h);const m=a[p];m!==void 0&&(_r(m,h)?m!==null&&s.delete(r):(l==="retain"&&d(),h===null?delete a[p]:a[p]=h))}s.deleted||(l==="insert"&&d(),Ps(i,s.content));break}}s=s.right}for(d();n.length>0;){const p=n[n.length-1];if(p.retain!==void 0&&p.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class ps extends Qe{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??lt(),this._length}_integrate(e,n){super._integrate(e,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new ps}clone(){const e=new ps;return e.applyDelta(this.toDelta()),e}_callObserver(e,n){super._callObserver(e,n);const r=new FK(this,e,n);Xf(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??lt();let e="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===Rn&&(e+=n.content.str),n=n.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:n=!0}={}){this.doc!==null?le(this.doc,r=>{const i=new vm(null,this._start,0,new Map);for(let o=0;o<e.length;o++){const s=e[o];if(s.insert!==void 0){const l=!n&&typeof s.insert=="string"&&o===e.length-1&&i.right===null&&s.insert.slice(-1)===`
`?s.insert.slice(0,-1):s.insert;(typeof l!="string"||l.length>0)&&vh(r,this,i,l,s.attributes||{})}else s.retain!==void 0?LS(r,this,i,s.retain,s.attributes||{}):s.delete!==void 0&&$S(r,i,s.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,n,r){this.doc??lt();const i=[],o=new Map,s=this.doc;let l="",a=this._start;function c(){if(l.length>0){const f={};let d=!1;o.forEach((h,m)=>{d=!0,f[m]=h});const p={insert:l};d&&(p.attributes=f),i.push(p),l=""}}const u=()=>{for(;a!==null;){if(mo(a,e)||n!==void 0&&mo(a,n))switch(a.content.constructor){case Rn:{const f=o.get("ychange");e!==void 0&&!mo(a,e)?(f===void 0||f.user!==a.id.client||f.type!=="removed")&&(c(),o.set("ychange",r?r("removed",a.id):{type:"removed"})):n!==void 0&&!mo(a,n)?(f===void 0||f.user!==a.id.client||f.type!=="added")&&(c(),o.set("ychange",r?r("added",a.id):{type:"added"})):f!==void 0&&(c(),o.delete("ychange")),l+=a.content.str;break}case fr:case oo:{c();const f={insert:a.content.getContent()[0]};if(o.size>0){const d={};f.attributes=d,o.forEach((p,h)=>{d[h]=p})}i.push(f);break}case _e:mo(a,e)&&(c(),Ps(o,a.content));break}a=a.right}c()};return e||n?le(s,f=>{e&&gm(f,e),n&&gm(f,n),u()},"cleanup"):u(),i}insert(e,n,r){if(n.length<=0)return;const i=this.doc;i!==null?le(i,o=>{const s=yc(o,this,e,!r);r||(r={},s.currentAttributes.forEach((l,a)=>{r[a]=l})),vh(o,this,s,n,r)}):this._pending.push(()=>this.insert(e,n,r))}insertEmbed(e,n,r){const i=this.doc;i!==null?le(i,o=>{const s=yc(o,this,e,!r);vh(o,this,s,n,r||{})}):this._pending.push(()=>this.insertEmbed(e,n,r||{}))}delete(e,n){if(n===0)return;const r=this.doc;r!==null?le(r,i=>{$S(i,yc(i,this,e,!0),n)}):this._pending.push(()=>this.delete(e,n))}format(e,n,r){if(n===0)return;const i=this.doc;i!==null?le(i,o=>{const s=yc(o,this,e,!1);s.right!==null&&LS(o,this,s,n,r)}):this._pending.push(()=>this.format(e,n,r))}removeAttribute(e){this.doc!==null?le(this.doc,n=>{Gu(n,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,n){this.doc!==null?le(this.doc,r=>{Ly(r,this,e,n)}):this._pending.push(()=>this.setAttribute(e,n))}getAttribute(e){return $y(this,e)}getAttributes(){return sO(this)}_write(e){e.writeTypeRef(oq)}}const jK=t=>new ps;class wh{constructor(e,n=()=>!0){this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??lt()}[Symbol.iterator](){return this}next(){let e=this._currentNode,n=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(n)))do if(n=e.content.type,!e.deleted&&(n.constructor===ms||n.constructor===Xi)&&n._start!==null)e=n._start;else for(;e!==null;){const r=e.next;if(r!==null){e=r;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class Xi extends Qe{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Xi}clone(){const e=new Xi;return e.insert(0,this.toArray().map(n=>n instanceof Qe?n.clone():n)),e}get length(){return this.doc??lt(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new wh(this,e)}querySelector(e){e=e.toUpperCase();const r=new wh(this,i=>i.nodeName&&i.nodeName.toUpperCase()===e).next();return r.done?null:r.value}querySelectorAll(e){return e=e.toUpperCase(),sr(new wh(this,n=>n.nodeName&&n.nodeName.toUpperCase()===e))}_callObserver(e,n){Xf(this,e,new UK(this,n,e))}toString(){return tO(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,n={},r){const i=e.createDocumentFragment();return r!==void 0&&r._createAssociation(i,this),ua(this,o=>{i.insertBefore(o.toDOM(e,n,r),null)}),i}insert(e,n){this.doc!==null?le(this.doc,r=>{iO(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}insertAfter(e,n){if(this.doc!==null)le(this.doc,r=>{const i=e&&e instanceof Qe?e._item:e;Wu(r,this,i,n)});else{const r=this._prelimContent,i=e===null?0:r.findIndex(o=>o===e)+1;if(i===0&&e!==null)throw Xr("Reference item not found");r.splice(i,0,...n)}}delete(e,n=1){this.doc!==null?le(this.doc,r=>{oO(r,this,e,n)}):this._prelimContent.splice(e,n)}toArray(){return eO(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return nO(this,e)}slice(e=0,n=this.length){return ZM(this,e,n)}forEach(e){ua(this,e)}_write(e){e.writeTypeRef(lq)}}const VK=t=>new Xi;class ms extends Xi{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,n){super._integrate(e,n),this._prelimAttrs.forEach((r,i)=>{this.setAttribute(i,r)}),this._prelimAttrs=null}_copy(){return new ms(this.nodeName)}clone(){const e=new ms(this.nodeName),n=this.getAttributes();return v9(n,(r,i)=>{typeof r=="string"&&e.setAttribute(i,r)}),e.insert(0,this.toArray().map(r=>r instanceof Qe?r.clone():r)),e}toString(){const e=this.getAttributes(),n=[],r=[];for(const l in e)r.push(l);r.sort();const i=r.length;for(let l=0;l<i;l++){const a=r[l];n.push(a+'="'+e[a]+'"')}const o=this.nodeName.toLocaleLowerCase(),s=n.length>0?" "+n.join(" "):"";return`<${o}${s}>${super.toString()}</${o}>`}removeAttribute(e){this.doc!==null?le(this.doc,n=>{Gu(n,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,n){this.doc!==null?le(this.doc,r=>{Ly(r,this,e,n)}):this._prelimAttrs.set(e,n)}getAttribute(e){return $y(this,e)}hasAttribute(e){return lO(this,e)}getAttributes(e){return e?_K(this,e):sO(this)}toDOM(e=document,n={},r){const i=e.createElement(this.nodeName),o=this.getAttributes();for(const s in o){const l=o[s];typeof l=="string"&&i.setAttribute(s,l)}return ua(this,s=>{i.appendChild(s.toDOM(e,n,r))}),r!==void 0&&r._createAssociation(i,this),i}_write(e){e.writeTypeRef(sq),e.writeKey(this.nodeName)}}const zK=t=>new ms(t.readKey());class UK extends Yf{constructor(e,n,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(i=>{i===null?this.childListChanged=!0:this.attributesChanged.add(i)})}}class Ku extends hs{constructor(e){super(),this.hookName=e}_copy(){return new Ku(this.hookName)}clone(){const e=new Ku(this.hookName);return this.forEach((n,r)=>{e.set(r,n)}),e}toDOM(e=document,n={},r){const i=n[this.hookName];let o;return i!==void 0?o=i.createDom(this):o=document.createElement(this.hookName),o.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(o,this),o}_write(e){e.writeTypeRef(aq),e.writeKey(this.hookName)}}const HK=t=>new Ku(t.readKey());class qu extends ps{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new qu}clone(){const e=new qu;return e.applyDelta(this.toDelta()),e}toDOM(e=document,n,r){const i=e.createTextNode(this.toString());return r!==void 0&&r._createAssociation(i,this),i}toString(){return this.toDelta().map(e=>{const n=[];for(const i in e.attributes){const o=[];for(const s in e.attributes[i])o.push({key:s,value:e.attributes[i][s]});o.sort((s,l)=>s.key<l.key?-1:1),n.push({nodeName:i,attrs:o})}n.sort((i,o)=>i.nodeName<o.nodeName?-1:1);let r="";for(let i=0;i<n.length;i++){const o=n[i];r+=`<${o.nodeName}`;for(let s=0;s<o.attrs.length;s++){const l=o.attrs[s];r+=` ${l.key}="${l.value}"`}r+=">"}r+=e.insert;for(let i=n.length-1;i>=0;i--)r+=`</${n[i].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(cq)}}const WK=t=>new qu;class By{constructor(e,n){this.id=e,this.length=n}get deleted(){throw An()}mergeWith(e){return!1}write(e,n,r){throw An()}integrate(e,n){throw An()}}const GK=0;class Wt extends By{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){n>0&&(this.id.clock+=n,this.length-=n),KM(e.doc.store,this)}write(e,n){e.writeInfo(GK),e.writeLen(this.length-n)}getMissing(e,n){return null}}class Pa{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Pa(this.content)}splice(e){throw An()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeBuf(this.content)}getRef(){return 3}}const KK=t=>new Pa(t.readBuf());class fa{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new fa(this.len)}splice(e){const n=new fa(this.len-e);return this.len=e,n}mergeWith(e){return this.len+=e.len,!0}integrate(e,n){Uu(e.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(e){}gc(e){}write(e,n){e.writeLen(this.len-n)}getRef(){return 1}}const qK=t=>new fa(t.readLen()),dO=(t,e)=>new fi({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class Na{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),e.meta!==null&&(n.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Na(dO(this.doc.guid,this.opts))}splice(e){throw An()}mergeWith(e){return!1}integrate(e,n){this.doc._item=n,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,n){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const JK=t=>new Na(dO(t.readString(),t.readAny()));class oo{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new oo(this.embed)}splice(e){throw An()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeJSON(this.embed)}getRef(){return 5}}const YK=t=>new oo(t.readJSON());class _e{constructor(e,n){this.key=e,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new _e(this.key,this.value)}splice(e){throw An()}mergeWith(e){return!1}integrate(e,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,n){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const QK=t=>new _e(t.readKey(),t.readJSON());class Ju{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Ju(this.arr)}splice(e){const n=new Ju(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let i=n;i<r;i++){const o=this.arr[i];e.writeString(o===void 0?"undefined":JSON.stringify(o))}}getRef(){return 2}}const XK=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++){const i=t.readString();i==="undefined"?n.push(void 0):n.push(JSON.parse(i))}return new Ju(n)},ZK=zu("node_env")==="development";class Zi{constructor(e){this.arr=e,ZK&&kM(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Zi(this.arr)}splice(e){const n=new Zi(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let i=n;i<r;i++){const o=this.arr[i];e.writeAny(o)}}getRef(){return 8}}const eq=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new Zi(n)};class Rn{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Rn(this.str)}splice(e){const n=new Rn(this.str.slice(e));this.str=this.str.slice(0,e);const r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"�",n.str="�"+n.str.slice(1)),n}mergeWith(e){return this.str+=e.str,!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const tq=t=>new Rn(t.readString()),nq=[NK,RK,jK,zK,VK,HK,WK],rq=0,iq=1,oq=2,sq=3,lq=4,aq=5,cq=6;class fr{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new fr(this.type._copy())}splice(e){throw An()}mergeWith(e){return!1}integrate(e,n){this.type._integrate(e.doc,n)}delete(e){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e)}),e.changed.delete(this.type)}gc(e){let n=this.type._start;for(;n!==null;)n.gc(e,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(e,!0),r=r.left}),this.type._map=new Map}write(e,n){this.type._write(e)}getRef(){return 7}}const uq=t=>new fr(nq[t.readTypeRef()](t)),Yu=(t,e,n)=>{const{client:r,clock:i}=e.id,o=new De(J(r,i+n),e,J(r,i+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&o.markDeleted(),e.keep&&(o.keep=!0),e.redone!==null&&(o.redone=J(e.redone.client,e.redone.clock+n)),e.right=o,o.right!==null&&(o.right.left=o),t._mergeStructs.push(o),o.parentSub!==null&&o.right===null&&o.parent._map.set(o.parentSub,o),e.length=n,o};class De extends By{constructor(e,n,r,i,o,s,l,a){super(e,a.getLength()),this.origin=r,this.left=n,this.right=i,this.rightOrigin=o,this.parent=s,this.parentSub=l,this.redone=null,this.content=a,this.info=this.content.isCountable()?mS:0}set marker(e){(this.info&hh)>0!==e&&(this.info^=hh)}get marker(){return(this.info&hh)>0}get keep(){return(this.info&pS)>0}set keep(e){this.keep!==e&&(this.info^=pS)}get countable(){return(this.info&mS)>0}get deleted(){return(this.info&dh)>0}set deleted(e){this.deleted!==e&&(this.info^=dh)}markDeleted(){this.info|=dh}getMissing(e,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Fe(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Fe(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===zo&&this.id.client!==this.parent.client&&this.parent.clock>=Fe(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=_S(e,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=ei(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===Wt||this.right&&this.right.constructor===Wt)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===De?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===De&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===zo){const r=yh(n,this.parent);r.constructor===Wt?this.parent=null:this.parent=r.content.type}return null}integrate(e,n){if(n>0&&(this.id.clock+=n,this.left=_S(e,e.doc.store,J(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,i;if(r!==null)i=r.right;else if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start;const o=new Set,s=new Set;for(;i!==null&&i!==this.right;){if(s.add(i),o.add(i),mc(this.origin,i.origin)){if(i.id.client<this.id.client)r=i,o.clear();else if(mc(this.rightOrigin,i.rightOrigin))break}else if(i.origin!==null&&s.has(yh(e.doc.store,i.origin)))o.has(yh(e.doc.store,i.origin))||(r=i,o.clear());else break;i=i.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),KM(e.doc.store,this),this.content.integrate(e,this),NS(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new Wt(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:J(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&mc(e.origin,this.lastId)&&this.right===e&&mc(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===e&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),Uu(e.deleteSet,this.id.client,this.id.clock,this.length),NS(e,n,this.parentSub),this.content.delete(e)}}gc(e,n){if(!this.deleted)throw Nn();this.content.gc(e),n?mK(e,this,new Wt(this.id,this.length)):this.content=new fa(this.length)}write(e,n){const r=n>0?J(this.id.client,this.id.clock+n-1):this.origin,i=this.rightOrigin,o=this.parentSub,s=this.content.getRef()&Gf|(r===null?0:Rt)|(i===null?0:er)|(o===null?0:oa);if(e.writeInfo(s),r!==null&&e.writeLeftID(r),i!==null&&e.writeRightID(i),r===null&&i===null){const l=this.parent;if(l._item!==void 0){const a=l._item;if(a===null){const c=hK(l);e.writeParentInfo(!0),e.writeString(c)}else e.writeParentInfo(!1),e.writeLeftID(a.id)}else l.constructor===String?(e.writeParentInfo(!0),e.writeString(l)):l.constructor===zo?(e.writeParentInfo(!1),e.writeLeftID(l)):Nn();o!==null&&e.writeString(o)}this.content.write(e,n)}}const hO=(t,e)=>fq[e&Gf](t),fq=[()=>{Nn()},qK,XK,KK,tq,YK,QK,uq,eq,JK,()=>{Nn()}],dq=10;class Gt extends By{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){Nn()}write(e,n){e.writeInfo(dq),B(e.restEncoder,this.length-n)}getMissing(e,n){return null}}const pO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},mO="__ $YJS$ __";pO[mO]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");pO[mO]=!0;const hq=Math.floor,pq=(t,e)=>t<e?t:e,mq=(t,e)=>t>e?t:e,gO=128,Hc=127,gq=Number.MAX_SAFE_INTEGER,yq=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.codePointAt(i);return r},da=typeof TextEncoder<"u"?new TextEncoder:null,vq=t=>da.encode(t),wq=da?vq:yq;let bl=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});bl&&bl.decode(new Uint8Array).length===1&&(bl=null);const Qu=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},Zf=(t,e)=>{for(;e>Hc;)Qu(t,gO|Hc&e),e=hq(e/128);Qu(t,Hc&e)},wm=new Uint8Array(3e4),Sq=wm.length/3,bq=(t,e)=>{if(e.length<Sq){const n=da.encodeInto(e,wm).written||0;Zf(t,n);for(let r=0;r<n;r++)Qu(t,wm[r])}else xq(t,wq(e))},kq=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;Zf(t,r);for(let i=0;i<r;i++)Qu(t,n.codePointAt(i))},Cq=da&&da.encodeInto?bq:kq,Eq=(t,e)=>{const n=t.cbuf.length,r=t.cpos,i=pq(n-r,e.length),o=e.length-i;t.cbuf.set(e.subarray(0,i),r),t.cpos+=i,o>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(mq(n*2,o)),t.cbuf.set(e.subarray(i)),t.cpos=o)},xq=(t,e)=>{Zf(t,e.byteLength),Eq(t,e)},yO=t=>new Error(t),Tq=yO("Unexpected end of array"),Mq=yO("Integer out of Range"),Oq=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},Aq=t=>Oq(t,Fy(t)),BS=t=>t.arr[t.pos++],Fy=t=>{let e=0,n=1;const r=t.arr.length;for(;t.pos<r;){const i=t.arr[t.pos++];if(e=e+(i&Hc)*n,n*=128,i<gO)return e;if(e>gq)throw Mq}throw Tq},Dq=t=>{let e=Fy(t);if(e===0)return"";{let n=String.fromCodePoint(BS(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(BS(t));else for(;e>0;){const r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},_q=t=>bl.decode(Aq(t)),FS=bl?_q:Dq;var ha;(function(t){t[t.Token=0]="Token",t[t.PermissionDenied=1]="PermissionDenied",t[t.Authenticated=2]="Authenticated"})(ha||(ha={}));const Pq=(t,e)=>{Zf(t,ha.Token),Cq(t,e)},Nq=(t,e,n)=>{switch(Fy(t)){case ha.PermissionDenied:{e(FS(t));break}case ha.Authenticated:{n(FS(t));break}}},Iq={code:1009,reason:"Message Too Big"},jS={code:4401,reason:"Unauthorized"},Rq={code:4403,reason:"Forbidden"},VS=t=>Array.from(t.entries()).map(([e,n])=>({clientId:e,...n}));var Sm;(function(t){t[t.Connecting=0]="Connecting",t[t.Open=1]="Open",t[t.Closing=2]="Closing",t[t.Closed=3]="Closed"})(Sm||(Sm={}));function Lq(t){return t||(t={}),{delay:t.delay===void 0?200:t.delay,initialDelay:t.initialDelay===void 0?0:t.initialDelay,minDelay:t.minDelay===void 0?0:t.minDelay,maxDelay:t.maxDelay===void 0?0:t.maxDelay,factor:t.factor===void 0?0:t.factor,maxAttempts:t.maxAttempts===void 0?3:t.maxAttempts,timeout:t.timeout===void 0?0:t.timeout,jitter:t.jitter===!0,initialJitter:t.initialJitter===!0,handleError:t.handleError===void 0?null:t.handleError,handleTimeout:t.handleTimeout===void 0?null:t.handleTimeout,beforeAttempt:t.beforeAttempt===void 0?null:t.beforeAttempt,calculateDelay:t.calculateDelay===void 0?null:t.calculateDelay}}async function Sh(t){return new Promise(e=>setTimeout(e,t))}function $q(t,e){let n=e.delay;if(n===0)return 0;if(e.factor&&(n*=Math.pow(e.factor,t.attemptNum-1),e.maxDelay!==0&&(n=Math.min(n,e.maxDelay))),e.jitter){const r=Math.ceil(e.minDelay),i=Math.floor(n);n=Math.floor(Math.random()*(i-r+1))+r}return Math.round(n)}async function Bq(t,e){const n=Lq(e);for(const l of["delay","initialDelay","minDelay","maxDelay","maxAttempts","timeout"]){const a=n[l];if(!Number.isInteger(a)||a<0)throw new Error(`Value for ${l} must be an integer greater than or equal to 0`)}if(n.factor.constructor!==Number||n.factor<0)throw new Error("Value for factor must be a number greater than or equal to 0");if(n.delay<n.minDelay)throw new Error(`delay cannot be less than minDelay (delay: ${n.delay}, minDelay: ${n.minDelay}`);const r={attemptNum:0,attemptsRemaining:n.maxAttempts?n.maxAttempts:-1,aborted:!1,abort(){r.aborted=!0}},i=n.calculateDelay||$q;async function o(){if(n.beforeAttempt&&n.beforeAttempt(r,n),r.aborted){const a=new Error("Attempt aborted");throw a.code="ATTEMPT_ABORTED",a}const l=async a=>{if(n.handleError&&await n.handleError(a,r,n),r.aborted||r.attemptsRemaining===0)throw a;r.attemptNum++;const c=i(r,n);return c&&await Sh(c),o()};return r.attemptsRemaining>0&&r.attemptsRemaining--,n.timeout?new Promise((a,c)=>{const u=setTimeout(()=>{if(n.handleTimeout)try{a(n.handleTimeout(r,n))}catch(f){c(f)}else{const f=new Error(`Retry timeout (attemptNum: ${r.attemptNum}, timeout: ${n.timeout})`);f.code="ATTEMPT_TIMEOUT",c(f)}},n.timeout);t(r,n).then(f=>{clearTimeout(u),a(f)}).catch(f=>{clearTimeout(u),l(f).then(a).catch(c)})}):t(r,n).catch(l)}const s=n.calculateDelay?n.calculateDelay(r,n):n.initialDelay;if(s&&await Sh(s),r.attemptNum<1&&n.initialJitter){const l=i(r,n);l&&await Sh(l)}return o()}const Ho=()=>new Map,vO=(t,e,n)=>{let r=t.get(e);return r===void 0&&t.set(e,r=n()),r},wO=()=>new Set,Fq=Array.from,jq=String.fromCharCode,Vq=t=>t.toLowerCase(),zq=/^\s*/g,Uq=t=>t.replace(zq,""),Hq=/([A-Z])/g,zS=(t,e)=>Uq(t.replace(Hq,n=>`${e}${Vq(n)}`)),Wq=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.codePointAt(i);return r},pa=typeof TextEncoder<"u"?new TextEncoder:null,Gq=t=>pa.encode(t),Kq=pa?Gq:Wq;let kl=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});kl&&kl.decode(new Uint8Array).length===1&&(kl=null);const US=t=>t===void 0?null:t;class qq{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}}let SO=new qq,jy=!0;try{typeof localStorage<"u"&&localStorage&&(SO=localStorage,jy=!1)}catch{}const bO=SO,Jq=t=>jy||addEventListener("storage",t),Yq=t=>jy||removeEventListener("storage",t),Qq=Object.keys,Xq=(t,e)=>{const n=[];for(const r in t)n.push(e(t[r],r));return n},HS=t=>Qq(t).length,Zq=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),eJ=(t,e)=>t===e,Cl=(t,e)=>{if(t==null||e==null)return eJ(t,e);if(t.constructor!==e.constructor)return!1;if(t===e)return!0;switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:{if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;break}case Set:{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;break}case Map:{if(t.size!==e.size)return!1;for(const n of t.keys())if(!e.has(n)||!Cl(t.get(n),e.get(n)))return!1;break}case Object:if(HS(t)!==HS(e))return!1;for(const n in t)if(!Zq(t,n)||!Cl(t[n],e[n]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Cl(t[n],e[n]))return!1;break;default:return!1}return!0},tJ=(t,e)=>e.includes(t),gs=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",kO=typeof window<"u"&&typeof document<"u"&&!gs;let kn;const nJ=()=>{if(kn===void 0)if(gs){kn=Ho();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];r[0]==="-"?(e!==null&&kn.set(e,""),e=r):e!==null&&(kn.set(e,r),e=null)}e!==null&&kn.set(e,"")}else typeof location=="object"?(kn=Ho(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,n]=t.split("=");kn.set(`--${zS(e,"-")}`,n),kn.set(`-${zS(e,"-")}`,n)}})):kn=Ho();return kn},bm=t=>nJ().has(t),km=t=>US(gs?process.env[t.toUpperCase()]:bO.getItem(t)),rJ=t=>bm("--"+t)||km(t)!==null;rJ("production");const WS=gs&&tJ({}.FORCE_COLOR,["true","1","2"]);!bm("no-colors")&&(!gs||process.stdout.isTTY||WS)&&(!gs||bm("color")||WS||km("COLORTERM")!==null||(km("TERM")||"").includes("color"));const CO=Math.floor,iJ=(t,e)=>t<e?t:e,oJ=(t,e)=>t>e?t:e,sJ=64,Xu=128,lJ=63,El=127,EO=Number.MAX_SAFE_INTEGER;class aJ{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Vy=()=>new aJ,xO=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},zy=t=>{const e=new Uint8Array(xO(t));let n=0;for(let r=0;r<t.bufs.length;r++){const i=t.bufs[r];e.set(i,n),n+=i.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},Zu=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},Ue=(t,e)=>{for(;e>El;)Zu(t,Xu|El&e),e=CO(e/128);Zu(t,El&e)},Cm=new Uint8Array(3e4),cJ=Cm.length/3,uJ=(t,e)=>{if(e.length<cJ){const n=pa.encodeInto(e,Cm).written||0;Ue(t,n);for(let r=0;r<n;r++)Zu(t,Cm[r])}else Ns(t,Kq(e))},fJ=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;Ue(t,r);for(let i=0;i<r;i++)Zu(t,n.codePointAt(i))},gn=pa&&pa.encodeInto?uJ:fJ,dJ=(t,e)=>{const n=t.cbuf.length,r=t.cpos,i=iJ(n-r,e.length),o=e.length-i;t.cbuf.set(e.subarray(0,i),r),t.cpos+=i,o>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(oJ(n*2,o)),t.cbuf.set(e.subarray(i)),t.cpos=o)},Ns=(t,e)=>{Ue(t,e.byteLength),dJ(t,e)},TO=t=>new Error(t),MO=TO("Unexpected end of array"),OO=TO("Integer out of Range");class hJ{constructor(e){this.arr=e,this.pos=0}}const AO=t=>new hJ(t),pJ=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},ed=t=>pJ(t,Fi(t)),GS=t=>t.arr[t.pos++],Fi=t=>{let e=0,n=1;const r=t.arr.length;for(;t.pos<r;){const i=t.arr[t.pos++];if(e=e+(i&El)*n,n*=128,i<Xu)return e;if(e>EO)throw OO}throw MO},mJ=t=>{let e=t.arr[t.pos++],n=e&lJ,r=64;const i=(e&sJ)>0?-1:1;if(!(e&Xu))return i*n;const o=t.arr.length;for(;t.pos<o;){if(e=t.arr[t.pos++],n=n+(e&El)*r,r*=128,e<Xu)return i*n;if(n>EO)throw OO}throw MO},gJ=t=>{let e=Fi(t);if(e===0)return"";{let n=String.fromCodePoint(GS(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(GS(t));else for(;e>0;){const r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},yJ=t=>kl.decode(ed(t)),td=kl?yJ:gJ,vJ=t=>{const e=t.pos,n=td(t);return t.pos=e,n},wJ=t=>new Uint8Array(t),SJ=(t,e,n)=>new Uint8Array(t,e,n),bJ=t=>new Uint8Array(t),kJ=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=jq(t[n]);return btoa(e)},CJ=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),EJ=t=>{const e=atob(t),n=wJ(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},xJ=t=>{const e=Buffer.from(t,"base64");return SJ(e.buffer,e.byteOffset,e.byteLength)},TJ=kO?kJ:CJ,MJ=kO?EJ:xJ,DO=new Map;let OJ=class{constructor(e){this.room=e,this.onmessage=null,this._onChange=n=>n.key===e&&this.onmessage!==null&&this.onmessage({data:MJ(n.newValue||"")}),Jq(this._onChange)}postMessage(e){bO.setItem(this.room,TJ(bJ(e)))}close(){Yq(this._onChange)}};const AJ=typeof BroadcastChannel>"u"?OJ:BroadcastChannel,Uy=t=>vO(DO,t,()=>{const e=wO(),n=new AJ(t);return n.onmessage=r=>e.forEach(i=>i(r.data,"broadcastchannel")),{bc:n,subs:e}}),DJ=(t,e)=>(Uy(t).subs.add(e),e),_J=(t,e)=>{const n=Uy(t),r=n.subs.delete(e);return r&&n.subs.size===0&&(n.bc.close(),DO.delete(t)),r},PJ=(t,e,n=null)=>{const r=Uy(t);r.bc.postMessage(e),r.subs.forEach(i=>i(e,n))},NJ=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else n!==void 0&&n()}},ys=Date.now;class IJ{constructor(){this._observers=Ho()}on(e,n){vO(this._observers,e,wO).add(n)}once(e,n){const r=(...i)=>{this.off(e,r),n(...i)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return Fq((this._observers.get(e)||Ho()).values()).forEach(r=>r(...n))}destroy(){this._observers=Ho()}}const bh=3e4;let RJ=class extends IJ{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const n=ys();this.getLocalState()!==null&&bh/2<=n-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const r=[];this.meta.forEach((i,o)=>{o!==this.clientID&&bh<=n-i.lastUpdated&&this.states.has(o)&&r.push(o)}),r.length>0&&Wc(this,r,"timeout")},CO(bh/10)),e.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const n=this.clientID,r=this.meta.get(n),i=r===void 0?0:r.clock+1,o=this.states.get(n);e===null?this.states.delete(n):this.states.set(n,e),this.meta.set(n,{clock:i,lastUpdated:ys()});const s=[],l=[],a=[],c=[];e===null?c.push(n):o==null?e!=null&&s.push(n):(l.push(n),Cl(o,e)||a.push(n)),(s.length>0||a.length>0||c.length>0)&&this.emit("change",[{added:s,updated:a,removed:c},"local"]),this.emit("update",[{added:s,updated:l,removed:c},"local"])}setLocalStateField(e,n){const r=this.getLocalState();r!==null&&this.setLocalState({...r,[e]:n})}getStates(){return this.states}};const Wc=(t,e,n)=>{const r=[];for(let i=0;i<e.length;i++){const o=e[i];if(t.states.has(o)){if(t.states.delete(o),o===t.clientID){const s=t.meta.get(o);t.meta.set(o,{clock:s.clock+1,lastUpdated:ys()})}r.push(o)}}r.length>0&&(t.emit("change",[{added:[],updated:[],removed:r},n]),t.emit("update",[{added:[],updated:[],removed:r},n]))},Em=(t,e,n=t.states)=>{const r=e.length,i=Vy();Ue(i,r);for(let o=0;o<r;o++){const s=e[o],l=n.get(s)||null,a=t.meta.get(s).clock;Ue(i,s),Ue(i,a),gn(i,JSON.stringify(l))}return zy(i)},LJ=(t,e,n)=>{const r=AO(e),i=ys(),o=[],s=[],l=[],a=[],c=Fi(r);for(let u=0;u<c;u++){const f=Fi(r);let d=Fi(r);const p=JSON.parse(td(r)),h=t.meta.get(f),m=t.states.get(f),y=h===void 0?0:h.clock;(y<d||y===d&&p===null&&t.states.has(f))&&(p===null?f===t.clientID&&t.getLocalState()!=null?d++:t.states.delete(f):t.states.set(f,p),t.meta.set(f,{clock:d,lastUpdated:i}),h===void 0&&p!==null?o.push(f):h!==void 0&&p===null?a.push(f):p!==null&&(Cl(p,m)||l.push(f),s.push(f)))}(o.length>0||l.length>0||a.length>0)&&t.emit("change",[{added:o,updated:l,removed:a},n]),(o.length>0||s.length>0||a.length>0)&&t.emit("update",[{added:o,updated:s,removed:a},n])};class _O{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}const $J=t=>Xq(t,(e,n)=>`${encodeURIComponent(n)}=${encodeURIComponent(e)}`).join("&");var Le;(function(t){t[t.Sync=0]="Sync",t[t.Awareness=1]="Awareness",t[t.Auth=2]="Auth",t[t.QueryAwareness=3]="QueryAwareness",t[t.Stateless=5]="Stateless",t[t.CLOSE=7]="CLOSE",t[t.SyncStatus=8]="SyncStatus"})(Le||(Le={}));var Ne;(function(t){t.Connecting="connecting",t.Connected="connected",t.Disconnected="disconnected"})(Ne||(Ne={}));class Gc{constructor(e){this.data=e,this.encoder=Vy(),this.decoder=AO(new Uint8Array(this.data))}peekVarString(){return vJ(this.decoder)}readVarUint(){return Fi(this.decoder)}readVarString(){return td(this.decoder)}readVarUint8Array(){return ed(this.decoder)}writeVarUint(e){return Ue(this.encoder,e)}writeVarString(e){return gn(this.encoder,e)}writeVarUint8Array(e){return Ns(this.encoder,e)}length(){return xO(this.encoder)}}class BJ extends _O{constructor(e){super(),this.messageQueue=[],this.configuration={url:"",document:void 0,WebSocketPolyfill:void 0,parameters:{},connect:!0,broadcast:!0,forceSyncInterval:!1,messageReconnectTimeout:3e4,delay:1e3,initialDelay:0,factor:2,maxAttempts:0,minDelay:1e3,maxDelay:3e4,jitter:!0,timeout:0,onOpen:()=>null,onConnect:()=>null,onMessage:()=>null,onOutgoingMessage:()=>null,onStatus:()=>null,onDisconnect:()=>null,onClose:()=>null,onDestroy:()=>null,onAwarenessUpdate:()=>null,onAwarenessChange:()=>null,quiet:!1,providerMap:new Map},this.webSocket=null,this.webSocketHandlers={},this.shouldConnect=!0,this.status=Ne.Disconnected,this.lastMessageReceived=0,this.identifier=0,this.intervals={forceSync:null,connectionChecker:null},this.connectionAttempt=null,this.receivedOnOpenPayload=void 0,this.receivedOnStatusPayload=void 0,this.closeTries=0,this.setConfiguration(e),this.configuration.WebSocketPolyfill=e.WebSocketPolyfill?e.WebSocketPolyfill:WebSocket,this.on("open",this.configuration.onOpen),this.on("open",this.onOpen.bind(this)),this.on("connect",this.configuration.onConnect),this.on("message",this.configuration.onMessage),this.on("outgoingMessage",this.configuration.onOutgoingMessage),this.on("status",this.configuration.onStatus),this.on("status",this.onStatus.bind(this)),this.on("disconnect",this.configuration.onDisconnect),this.on("close",this.configuration.onClose),this.on("destroy",this.configuration.onDestroy),this.on("awarenessUpdate",this.configuration.onAwarenessUpdate),this.on("awarenessChange",this.configuration.onAwarenessChange),this.on("close",this.onClose.bind(this)),this.on("message",this.onMessage.bind(this)),this.intervals.connectionChecker=setInterval(this.checkConnection.bind(this),this.configuration.messageReconnectTimeout/10),typeof e.connect<"u"&&(this.shouldConnect=e.connect),this.shouldConnect&&this.connect()}async onOpen(e){this.receivedOnOpenPayload=e}async onStatus(e){this.receivedOnStatusPayload=e}attach(e){let n;return this.configuration.providerMap.set(e.configuration.name,e),this.status===Ne.Disconnected&&this.shouldConnect&&(n=this.connect()),this.receivedOnOpenPayload&&e.onOpen(this.receivedOnOpenPayload),this.receivedOnStatusPayload&&e.onStatus(this.receivedOnStatusPayload),n}detach(e){this.configuration.providerMap.delete(e.configuration.name)}setConfiguration(e={}){this.configuration={...this.configuration,...e}}async connect(){if(this.status===Ne.Connected)return;this.cancelWebsocketRetry&&(this.cancelWebsocketRetry(),this.cancelWebsocketRetry=void 0),this.receivedOnOpenPayload=void 0,this.receivedOnStatusPayload=void 0,this.shouldConnect=!0;const e=()=>{let i=!1;return{retryPromise:Bq(this.createWebSocketConnection.bind(this),{delay:this.configuration.delay,initialDelay:this.configuration.initialDelay,factor:this.configuration.factor,maxAttempts:this.configuration.maxAttempts,minDelay:this.configuration.minDelay,maxDelay:this.configuration.maxDelay,jitter:this.configuration.jitter,timeout:this.configuration.timeout,beforeAttempt:s=>{(!this.shouldConnect||i)&&s.abort()}}).catch(s=>{if(s&&s.code!=="ATTEMPT_ABORTED")throw s}),cancelFunc:()=>{i=!0}}},{retryPromise:n,cancelFunc:r}=e();return this.cancelWebsocketRetry=r,n}attachWebSocketListeners(e,n){const{identifier:r}=e,i=c=>this.emit("message",c),o=c=>this.emit("close",{event:c}),s=c=>this.emit("open",c),l=c=>{n(c)};this.webSocketHandlers[r]={message:i,close:o,open:s,error:l};const a=this.webSocketHandlers[e.identifier];Object.keys(a).forEach(c=>{e.addEventListener(c,a[c])})}cleanupWebSocket(){if(!this.webSocket)return;const{identifier:e}=this.webSocket,n=this.webSocketHandlers[e];Object.keys(n).forEach(r=>{var i;(i=this.webSocket)===null||i===void 0||i.removeEventListener(r,n[r]),delete this.webSocketHandlers[e]}),this.webSocket.close(),this.webSocket=null}createWebSocketConnection(){return new Promise((e,n)=>{this.webSocket&&(this.messageQueue=[],this.cleanupWebSocket()),this.lastMessageReceived=0,this.identifier+=1;const r=new this.configuration.WebSocketPolyfill(this.url);r.binaryType="arraybuffer",r.identifier=this.identifier,this.attachWebSocketListeners(r,n),this.webSocket=r,this.status=Ne.Connecting,this.emit("status",{status:Ne.Connecting}),this.connectionAttempt={resolve:e,reject:n}})}onMessage(e){var n;this.resolveConnectionAttempt(),this.lastMessageReceived=ys();const i=new Gc(e.data).peekVarString();(n=this.configuration.providerMap.get(i))===null||n===void 0||n.onMessage(e)}resolveConnectionAttempt(){this.connectionAttempt&&(this.connectionAttempt.resolve(),this.connectionAttempt=null,this.status=Ne.Connected,this.emit("status",{status:Ne.Connected}),this.emit("connect"),this.messageQueue.forEach(e=>this.send(e)),this.messageQueue=[])}stopConnectionAttempt(){this.connectionAttempt=null}rejectConnectionAttempt(){var e;(e=this.connectionAttempt)===null||e===void 0||e.reject(),this.connectionAttempt=null}checkConnection(){var e;this.status===Ne.Connected&&this.lastMessageReceived&&(this.configuration.messageReconnectTimeout>=ys()-this.lastMessageReceived||(this.closeTries+=1,this.closeTries>2?(this.onClose({event:{code:4408,reason:"forced"}}),this.closeTries=0):((e=this.webSocket)===null||e===void 0||e.close(),this.messageQueue=[])))}get serverUrl(){for(;this.configuration.url[this.configuration.url.length-1]==="/";)return this.configuration.url.slice(0,this.configuration.url.length-1);return this.configuration.url}get url(){const e=$J(this.configuration.parameters);return`${this.serverUrl}${e.length===0?"":`?${e}`}`}disconnect(){if(this.shouldConnect=!1,this.webSocket!==null)try{this.webSocket.close(),this.messageQueue=[]}catch{}}send(e){var n;((n=this.webSocket)===null||n===void 0?void 0:n.readyState)===Sm.Open?this.webSocket.send(e):this.messageQueue.push(e)}onClose({event:e}){if(this.closeTries=0,this.cleanupWebSocket(),this.status===Ne.Connected&&(this.status=Ne.Disconnected,this.emit("status",{status:Ne.Disconnected}),this.emit("disconnect",{event:e})),e.code===jS.code&&(e.reason===jS.reason?console.warn("[HocuspocusProvider] An authentication token is required, but you didn’t send one. Try adding a `token` to your HocuspocusProvider configuration. Won’t try again."):console.warn(`[HocuspocusProvider] Connection closed with status Unauthorized: ${e.reason}`),this.shouldConnect=!1),e.code===Rq.code&&!this.configuration.quiet){console.warn("[HocuspocusProvider] The provided authentication token isn’t allowed to connect to this server. Will try again.");return}e.code===Iq.code&&(console.warn(`[HocuspocusProvider] Connection closed with status MessageTooBig: ${e.reason}`),this.shouldConnect=!1),this.connectionAttempt?this.rejectConnectionAttempt():this.shouldConnect&&this.connect(),!this.shouldConnect&&this.status!==Ne.Disconnected&&(this.status=Ne.Disconnected,this.emit("status",{status:Ne.Disconnected}),this.emit("disconnect",{event:e}))}destroy(){this.emit("destroy"),this.intervals.forceSync&&clearInterval(this.intervals.forceSync),clearInterval(this.intervals.connectionChecker),this.stopConnectionAttempt(),this.disconnect(),this.removeAllListeners(),this.cleanupWebSocket()}}const PO=0,Hy=1,NO=2,FJ=(t,e)=>{Ue(t,PO);const n=HM(e);Ns(t,n)},IO=(t,e,n)=>{Ue(t,Hy),Ns(t,VM(e,n))},jJ=(t,e,n)=>IO(e,n,ed(t)),RO=(t,e,n)=>{try{jM(e,ed(t),n)}catch(r){console.error("Caught error while handling a Yjs update",r)}},VJ=(t,e)=>{Ue(t,NO),Ns(t,e)},zJ=RO,UJ=(t,e,n,r)=>{const i=Fi(t);switch(i){case PO:jJ(t,e,n);break;case Hy:RO(t,n,r);break;case NO:zJ(t,n,r);break;default:throw new Error("Unknown message type")}return i};class Ln{constructor(){this.encoder=Vy()}get(e){return e.encoder}toUint8Array(){return zy(this.encoder)}}class KS{constructor(e){this.broadcasted=!1,this.message=e}setBroadcasted(e){return this.broadcasted=e,this}apply(e,n){const{message:r}=this,i=r.readVarUint(),o=r.length();switch(i){case Le.Sync:this.applySyncMessage(e,n);break;case Le.Awareness:this.applyAwarenessMessage(e);break;case Le.Auth:this.applyAuthMessage(e);break;case Le.QueryAwareness:this.applyQueryAwarenessMessage(e);break;case Le.Stateless:e.receiveStateless(td(r.decoder));break;case Le.SyncStatus:this.applySyncStatusMessage(e,mJ(r.decoder)===1);break;default:throw new Error(`Can’t apply message of unknown type: ${i}`)}r.length()>o+1&&(this.broadcasted?e.broadcast(Ln,{encoder:r.encoder}):e.send(Ln,{encoder:r.encoder}))}applySyncMessage(e,n){const{message:r}=this;r.writeVarUint(Le.Sync);const i=UJ(r.decoder,r.encoder,e.document,e);n&&i===Hy&&(e.synced=!0)}applySyncStatusMessage(e,n){n&&e.decrementUnsyncedChanges()}applyAwarenessMessage(e){if(!e.awareness)return;const{message:n}=this;LJ(e.awareness,n.readVarUint8Array(),e)}applyAuthMessage(e){const{message:n}=this;Nq(n.decoder,e.permissionDeniedHandler.bind(e),e.authenticatedHandler.bind(e))}applyQueryAwarenessMessage(e){if(!e.awareness)return;const{message:n}=this;n.writeVarUint(Le.Awareness),n.writeVarUint8Array(Em(e.awareness,Array.from(e.awareness.getStates().keys())))}}class qS{constructor(e,n={}){this.message=new e,this.encoder=this.message.get(n)}create(){return zy(this.encoder)}send(e){e==null||e.send(this.create())}broadcast(e){PJ(e,this.create())}}class HJ extends Ln{constructor(){super(...arguments),this.type=Le.Auth,this.description="Authentication"}get(e){if(typeof e.token>"u")throw new Error("The authentication message requires `token` as an argument.");return gn(this.encoder,e.documentName),Ue(this.encoder,this.type),Pq(this.encoder,e.token),this.encoder}}class vc extends Ln{constructor(){super(...arguments),this.type=Le.Awareness,this.description="Awareness states update"}get(e){if(typeof e.awareness>"u")throw new Error("The awareness message requires awareness as an argument");if(typeof e.clients>"u")throw new Error("The awareness message requires clients as an argument");gn(this.encoder,e.documentName),Ue(this.encoder,this.type);let n;return e.states===void 0?n=Em(e.awareness,e.clients):n=Em(e.awareness,e.clients,e.states),Ns(this.encoder,n),this.encoder}}class WJ extends Ln{constructor(){super(...arguments),this.type=Le.CLOSE,this.description="Ask the server to close the connection"}get(e){return gn(this.encoder,e.documentName),Ue(this.encoder,this.type),this.encoder}}class GJ extends Ln{constructor(){super(...arguments),this.type=Le.QueryAwareness,this.description="Queries awareness states"}get(e){return gn(this.encoder,e.documentName),Ue(this.encoder,this.type),this.encoder}}class KJ extends Ln{constructor(){super(...arguments),this.type=Le.Stateless,this.description="A stateless message"}get(e){var n;return gn(this.encoder,e.documentName),Ue(this.encoder,this.type),gn(this.encoder,(n=e.payload)!==null&&n!==void 0?n:""),this.encoder}}class kh extends Ln{constructor(){super(...arguments),this.type=Le.Sync,this.description="First sync step"}get(e){if(typeof e.document>"u")throw new Error("The sync step one message requires document as an argument");return gn(this.encoder,e.documentName),Ue(this.encoder,this.type),FJ(this.encoder,e.document),this.encoder}}class qJ extends Ln{constructor(){super(...arguments),this.type=Le.Sync,this.description="Second sync step"}get(e){if(typeof e.document>"u")throw new Error("The sync step two message requires document as an argument");return gn(this.encoder,e.documentName),Ue(this.encoder,this.type),IO(this.encoder,e.document),this.encoder}}class JJ extends Ln{constructor(){super(...arguments),this.type=Le.Sync,this.description="A document update"}get(e){return gn(this.encoder,e.documentName),Ue(this.encoder,this.type),VJ(this.encoder,e.update),this.encoder}}class YJ extends Error{constructor(){super(...arguments),this.code=1001}}class QJ extends _O{constructor(e){var n,r,i;super(),this.configuration={name:"",document:void 0,awareness:void 0,token:null,parameters:{},broadcast:!0,forceSyncInterval:!1,onAuthenticated:()=>null,onAuthenticationFailed:()=>null,onOpen:()=>null,onConnect:()=>null,onMessage:()=>null,onOutgoingMessage:()=>null,onStatus:()=>null,onSynced:()=>null,onDisconnect:()=>null,onClose:()=>null,onDestroy:()=>null,onAwarenessUpdate:()=>null,onAwarenessChange:()=>null,onStateless:()=>null,quiet:!1,connect:!0,preserveConnection:!0},this.subscribedToBroadcastChannel=!1,this.isSynced=!1,this.unsyncedChanges=0,this.status=Ne.Disconnected,this.isAuthenticated=!1,this.authorizedScope=void 0,this.mux=NJ(),this.intervals={forceSync:null},this.isConnected=!0,this.boundDocumentUpdateHandler=this.documentUpdateHandler.bind(this),this.boundAwarenessUpdateHandler=this.awarenessUpdateHandler.bind(this),this.boundBroadcastChannelSubscriber=this.broadcastChannelSubscriber.bind(this),this.boundPageHide=this.pageHide.bind(this),this.boundOnOpen=this.onOpen.bind(this),this.boundOnClose=this.onClose.bind(this),this.boundOnStatus=this.onStatus.bind(this),this.forwardConnect=o=>this.emit("connect",o),this.forwardOpen=o=>this.emit("open",o),this.forwardClose=o=>this.emit("close",o),this.forwardDisconnect=o=>this.emit("disconnect",o),this.forwardDestroy=o=>this.emit("destroy",o),this.setConfiguration(e),this.configuration.document=e.document?e.document:new fi,this.configuration.awareness=e.awareness!==void 0?e.awareness:new RJ(this.document),this.on("open",this.configuration.onOpen),this.on("message",this.configuration.onMessage),this.on("outgoingMessage",this.configuration.onOutgoingMessage),this.on("synced",this.configuration.onSynced),this.on("destroy",this.configuration.onDestroy),this.on("awarenessUpdate",this.configuration.onAwarenessUpdate),this.on("awarenessChange",this.configuration.onAwarenessChange),this.on("stateless",this.configuration.onStateless),this.on("authenticated",this.configuration.onAuthenticated),this.on("authenticationFailed",this.configuration.onAuthenticationFailed),this.configuration.websocketProvider.on("connect",this.configuration.onConnect),this.configuration.websocketProvider.on("connect",this.forwardConnect),this.configuration.websocketProvider.on("open",this.boundOnOpen),this.configuration.websocketProvider.on("open",this.forwardOpen),this.configuration.websocketProvider.on("close",this.boundOnClose),this.configuration.websocketProvider.on("close",this.configuration.onClose),this.configuration.websocketProvider.on("close",this.forwardClose),this.configuration.websocketProvider.on("status",this.boundOnStatus),this.configuration.websocketProvider.on("disconnect",this.configuration.onDisconnect),this.configuration.websocketProvider.on("disconnect",this.forwardDisconnect),this.configuration.websocketProvider.on("destroy",this.configuration.onDestroy),this.configuration.websocketProvider.on("destroy",this.forwardDestroy),(n=this.awareness)===null||n===void 0||n.on("update",()=>{this.emit("awarenessUpdate",{states:VS(this.awareness.getStates())})}),(r=this.awareness)===null||r===void 0||r.on("change",()=>{this.emit("awarenessChange",{states:VS(this.awareness.getStates())})}),this.document.on("update",this.boundDocumentUpdateHandler),(i=this.awareness)===null||i===void 0||i.on("update",this.boundAwarenessUpdateHandler),this.registerEventListeners(),this.configuration.forceSyncInterval&&typeof this.configuration.forceSyncInterval=="number"&&(this.intervals.forceSync=setInterval(this.forceSync.bind(this),this.configuration.forceSyncInterval)),this.configuration.websocketProvider.attach(this)}onStatus({status:e}){this.status=e,this.configuration.onStatus({status:e}),this.emit("status",{status:e})}setConfiguration(e={}){if(!e.websocketProvider&&e.url){const n=e;this.configuration.websocketProvider=new BJ({url:n.url,connect:n.connect,parameters:n.parameters})}this.configuration={...this.configuration,...e}}get document(){return this.configuration.document}get awareness(){return this.configuration.awareness}get hasUnsyncedChanges(){return this.unsyncedChanges>0}resetUnsyncedChanges(){this.unsyncedChanges=1,this.emit("unsyncedChanges",this.unsyncedChanges)}incrementUnsyncedChanges(){this.unsyncedChanges+=1,this.emit("unsyncedChanges",this.unsyncedChanges)}decrementUnsyncedChanges(){this.unsyncedChanges-=1,this.unsyncedChanges===0&&(this.synced=!0),this.emit("unsyncedChanges",this.unsyncedChanges)}forceSync(){this.resetUnsyncedChanges(),this.send(kh,{document:this.document,documentName:this.configuration.name})}pageHide(){this.awareness&&Wc(this.awareness,[this.document.clientID],"page hide")}registerEventListeners(){typeof window>"u"||!("addEventListener"in window)||window.addEventListener("pagehide",this.boundPageHide)}sendStateless(e){this.send(KJ,{documentName:this.configuration.name,payload:e})}documentUpdateHandler(e,n){n!==this&&(this.incrementUnsyncedChanges(),this.send(JJ,{update:e,documentName:this.configuration.name},!0))}awarenessUpdateHandler({added:e,updated:n,removed:r},i){const o=e.concat(n).concat(r);this.send(vc,{awareness:this.awareness,clients:o,documentName:this.configuration.name},!0)}get synced(){return this.isSynced}set synced(e){this.isSynced!==e&&(this.isSynced=e,this.emit("synced",{state:e}),this.emit("sync",{state:e}))}receiveStateless(e){this.emit("stateless",{payload:e})}get isAuthenticationRequired(){return!!this.configuration.token&&!this.isAuthenticated}async connect(){return this.configuration.broadcast&&this.subscribeToBroadcastChannel(),this.configuration.websocketProvider.shouldConnect=!0,this.configuration.websocketProvider.attach(this)}disconnect(){this.disconnectBroadcastChannel(),this.configuration.websocketProvider.detach(this),this.isConnected=!1,this.configuration.preserveConnection||this.configuration.websocketProvider.disconnect()}async onOpen(e){this.isAuthenticated=!1,this.isConnected=!0,this.emit("open",{event:e});let n;try{n=await this.getToken()}catch(r){this.permissionDeniedHandler(`Failed to get token: ${r}`);return}this.isAuthenticationRequired&&this.send(HJ,{token:n,documentName:this.configuration.name}),this.startSync()}async getToken(){return typeof this.configuration.token=="function"?await this.configuration.token():this.configuration.token}startSync(){this.resetUnsyncedChanges(),this.send(kh,{document:this.document,documentName:this.configuration.name}),this.awareness&&this.awareness.getLocalState()!==null&&this.send(vc,{awareness:this.awareness,clients:[this.document.clientID],documentName:this.configuration.name})}send(e,n,r=!1){if(!this.isConnected)return;r&&this.mux(()=>{this.broadcast(e,n)});const i=new qS(e,n);this.emit("outgoingMessage",{message:i.message}),i.send(this.configuration.websocketProvider)}onMessage(e){const n=new Gc(e.data),r=n.readVarString();n.writeVarString(r),this.emit("message",{event:e,message:new Gc(e.data)}),new KS(n).apply(this,!0)}onClose(e){this.isAuthenticated=!1,this.synced=!1,this.awareness&&Wc(this.awareness,Array.from(this.awareness.getStates().keys()).filter(n=>n!==this.document.clientID),this)}destroy(){this.emit("destroy"),this.intervals.forceSync&&clearInterval(this.intervals.forceSync),this.awareness&&(Wc(this.awareness,[this.document.clientID],"provider destroy"),this.awareness.off("update",this.boundAwarenessUpdateHandler),this.awareness.destroy()),this.document.off("update",this.boundDocumentUpdateHandler),this.removeAllListeners(),this.configuration.websocketProvider.off("connect",this.configuration.onConnect),this.configuration.websocketProvider.off("connect",this.forwardConnect),this.configuration.websocketProvider.off("open",this.boundOnOpen),this.configuration.websocketProvider.off("open",this.forwardOpen),this.configuration.websocketProvider.off("close",this.boundOnClose),this.configuration.websocketProvider.off("close",this.configuration.onClose),this.configuration.websocketProvider.off("close",this.forwardClose),this.configuration.websocketProvider.off("status",this.boundOnStatus),this.configuration.websocketProvider.off("disconnect",this.configuration.onDisconnect),this.configuration.websocketProvider.off("disconnect",this.forwardDisconnect),this.configuration.websocketProvider.off("destroy",this.configuration.onDestroy),this.configuration.websocketProvider.off("destroy",this.forwardDestroy),this.send(WJ,{documentName:this.configuration.name}),this.disconnect(),!(typeof window>"u"||!("removeEventListener"in window))&&window.removeEventListener("pagehide",this.boundPageHide)}permissionDeniedHandler(e){this.emit("authenticationFailed",{reason:e}),this.isAuthenticated=!1,this.disconnect(),this.status=Ne.Disconnected}authenticatedHandler(e){this.isAuthenticated=!0,this.authorizedScope=e,this.emit("authenticated")}get broadcastChannel(){return`${this.configuration.name}`}broadcastChannelSubscriber(e){this.mux(()=>{const n=new Gc(e),r=n.readVarString();n.writeVarString(r),new KS(n).setBroadcasted(!0).apply(this,!1)})}subscribeToBroadcastChannel(){this.subscribedToBroadcastChannel||(DJ(this.broadcastChannel,this.boundBroadcastChannelSubscriber),this.subscribedToBroadcastChannel=!0),this.mux(()=>{this.broadcast(kh,{document:this.document,documentName:this.configuration.name}),this.broadcast(qJ,{document:this.document,documentName:this.configuration.name}),this.broadcast(GJ,{document:this.document,documentName:this.configuration.name}),this.awareness&&this.broadcast(vc,{awareness:this.awareness,clients:[this.document.clientID],document:this.document,documentName:this.configuration.name})})}disconnectBroadcastChannel(){this.awareness&&this.send(vc,{awareness:this.awareness,clients:[this.document.clientID],states:new Map,documentName:this.configuration.name},!0),this.subscribedToBroadcastChannel&&(_J(this.broadcastChannel,this.boundBroadcastChannelSubscriber),this.subscribedToBroadcastChannel=!1)}broadcast(e,n){this.configuration.broadcast&&this.subscribedToBroadcastChannel&&new qS(e,n).broadcast(this.broadcastChannel)}setAwarenessField(e,n){if(!this.awareness)throw new YJ(`Cannot set awareness field "${e}" to ${JSON.stringify(n)}. You have disabled Awareness for this provider by explicitly passing awareness: null in the provider configuration.`);this.awareness.setLocalStateField(e,n)}}crypto.getRandomValues.bind(crypto);class XJ{constructor(e){this.status="disconnected",this.statusCallbacks=[],this.dataCallbacks=[],this.listCallbacks=[],this.userCallbacks=[],this.config=e,this.ydoc=new fi,this.provider=new QJ({url:e.wsUrl,name:"pyramid-microapp",document:this.ydoc,onConnect:()=>{this.setStatus("connected"),console.log(`✅ ${this.config.microName} 协同已连接`)},onDisconnect:()=>{this.setStatus("disconnected"),console.log(`❌ ${this.config.microName} 协同已断开`)},onStatus:({status:n})=>{console.log(`${this.config.microName} 协同状态:`,n)}}),this.sharedData=this.ydoc.getMap("sharedData"),this.listData=this.ydoc.getArray("listData"),this.awareness=this.provider.awareness,this.bindEvents()}bindEvents(){this.sharedData.observe(()=>{this.notifyDataCallbacks()}),this.listData.observe(()=>{this.notifyListCallbacks()}),this.awareness.on("change",()=>{this.notifyUserCallbacks()})}setStatus(e){this.status=e,this.statusCallbacks.forEach(n=>n(e))}notifyDataCallbacks(){this.dataCallbacks.forEach(e=>e())}notifyListCallbacks(){this.listCallbacks.forEach(e=>e())}notifyUserCallbacks(){this.userCallbacks.forEach(e=>e())}setUser(e){this.awareness.setLocalStateField("user",{name:e.name||`${this.config.microName}用户${Math.floor(Math.random()*1e3)}`,color:e.color||`#${Math.floor(Math.random()*16777215).toString(16)}`,cursor:e.cursor||null})}onStatusChange(e){return this.statusCallbacks.push(e),()=>{const n=this.statusCallbacks.indexOf(e);n>-1&&this.statusCallbacks.splice(n,1)}}onDataChange(e){return this.dataCallbacks.push(e),()=>{const n=this.dataCallbacks.indexOf(e);n>-1&&this.dataCallbacks.splice(n,1)}}onListChange(e){return this.listCallbacks.push(e),()=>{const n=this.listCallbacks.indexOf(e);n>-1&&this.listCallbacks.splice(n,1)}}onUsersChange(e){return this.userCallbacks.push(e),()=>{const n=this.userCallbacks.indexOf(e);n>-1&&this.userCallbacks.splice(n,1)}}updateData(e,n){this.sharedData.set(e,n)}getData(e){return this.sharedData.get(e)}getAllData(){const e={};return this.sharedData.forEach((n,r)=>{e[r]=n}),e}addListItem(e){this.listData.push([e])}updateListItem(e,n){this.listData.delete(e,1),this.listData.insert(e,[n])}removeListItem(e){this.listData.delete(e,1)}getListData(){return this.listData.toArray()}getOnlineUsers(){const e=this.awareness.getStates(),n=[];return e.forEach((r,i)=>{var o,s,l;n.push({id:i,name:((o=r.user)==null?void 0:o.name)||"Anonymous",color:((s=r.user)==null?void 0:s.color)||"#000000",cursor:((l=r.user)==null?void 0:l.cursor)||null})}),n}getStatus(){return this.status}destroy(){this.provider.destroy(),this.ydoc.destroy()}getProvider(){return this.provider}getYDoc(){return this.ydoc}getSharedData(){return this.sharedData}getListDataInstance(){return this.listData}}const ZJ={"demo-micro-app":{entry:"//localhost:7200",container:"#micro-app-container"},"pyramid-app":{entry:"//localhost:7200",container:"#micro-app-container"},"chart-app":{entry:"//localhost:7200",container:"#micro-app-container"}},eY=({node:t,editor:e,updateAttributes:n,deleteNode:r})=>{console.log("🎯 SkeletonNodeView 被渲染了!",{node:t,editor:e,updateAttributes:n,deleteNode:r});const i=F.useRef(null),[o,s]=F.useState(!1),[l,a]=F.useState(null),[c,u]=F.useState(null),[f,d]=F.useState(!1),p=F.useRef(!1),[h,m]=F.useState(null),[y,g]=F.useState("disconnected"),[v,w]=F.useState([]),[S,k]=F.useState({}),[b,C]=F.useState([]),{microName:E,wsUrl:x,width:A="100%",height:U="200px"}=t.attrs;console.log("📝 SkeletonNodeView 属性:",{microName:E,wsUrl:x,width:A,height:U}),F.useEffect(()=>{if(E&&x){const Y={wsUrl:x,roomName:`room-${Date.now()}`,microName:E},ee=new XJ(Y);m(ee);const Q={id:Date.now().toString(),name:`用户-${Date.now()}`,color:`#${Math.floor(Math.random()*16777215).toString(16)}`};ee.setUser(Q),ee.onStatusChange(T=>{console.log("🔄 协同状态变化:",T),g(T)}),ee.onUsersChange(()=>{const T=ee.getOnlineUsers();console.log("👥 在线用户变化:",T),w(T)}),ee.onDataChange(()=>{const T=ee.getAllData();console.log("📊 共享数据变化:",T),k(T)}),ee.onListChange(()=>{const T=ee.getListData();console.log("📋 列表数据变化:",T),C(T)}),console.log("✅ 协同管理器初始化完成")}},[E,x]);const te=F.useCallback(async()=>{var ee;if(!E||!i.current){console.warn("⚠️ 缺少必要参数:",{microName:E,containerRef:i.current});return}const Y=ZJ[E];if(!Y){console.error("❌ 未找到微应用配置:",E),a(`未找到微应用配置: ${E}`);return}try{s(!0),a(null),console.log("🔄 开始加载微应用:",{microName:E,config:Y}),c&&(console.log("🗑️ 卸载现有微应用实例"),c.unmount(),u(null));const Q=document.createElement("div");Q.id="micro-app-container",Q.style.cssText=`
        width: 100%;
        height: 100%;
        border: 1px solid #ddd;
        border-radius: 4px;
        background: white;
      `,i.current&&(i.current.innerHTML="",i.current.appendChild(Q));const T={container:Q,...E==="pyramid-app"?{pyramidProvider:h==null?void 0:h.getProvider(),pyramidSharedData:h==null?void 0:h.getSharedData(),pyramidList:h==null?void 0:h.getSharedData().get("listData"),pyramidYdoc:h==null?void 0:h.getYDoc(),pyramidData:S,pyramidListData:b,pyramidOnlineUsers:v,pyramidCollaborationStatus:y,updatePyramidData:(_,q)=>{h==null||h.updateData(_,q)},getPyramidData:_=>h==null?void 0:h.getData(_),addPyramidToList:_=>{h==null||h.addListItem(_)},updatePyramidInList:(_,q)=>{h==null||h.updateListItem(_,q)},removePyramidFromList:_=>{h==null||h.removeListItem(_)},setPyramidUser:_=>{h==null||h.setUser(_)},isCollaborationEnabled:!!(h!=null&&h.getProvider()&&(h!=null&&h.getSharedData())),debugInfo:{providerStatus:(h==null?void 0:h.getStatus())||"disconnected",sharedDataKeys:h!=null&&h.getSharedData()?Array.from(h.getSharedData().keys()):[],currentData:S,pyramidProviderExists:!!(h!=null&&h.getProvider()),pyramidSharedDataExists:!!(h!=null&&h.getSharedData()),pyramidYdocExists:!!(h!=null&&h.getYDoc()),pyramidListExists:!!((ee=h==null?void 0:h.getSharedData())!=null&&ee.get("listData"))}}:{collaborationManager:h,microName:E,wsUrl:x}};console.log("🔍 微应用 props 详细调试:",{microName:E,isCollaborationEnabled:!!(h!=null&&h.getProvider()&&(h!=null&&h.getSharedData())),collaborationManager:!!h,provider:!!(h!=null&&h.getProvider()),sharedData:!!(h!=null&&h.getSharedData()),debugInfo:E==="pyramid-app"?T.debugInfo:void 0});const R=await A7({name:E,entry:Y.entry,container:Q,props:T});console.log("✅ 微应用加载成功:",R),u(R),d(!0)}catch(Q){console.error("❌ 微应用加载失败:",Q),a(`微应用加载失败: ${Q instanceof Error?Q.message:String(Q)}`)}finally{s(!1)}},[E,i,c,h,x]),Pe=F.useCallback(()=>{if(c){console.log("🗑️ 卸载微应用:",E);try{c.unmount(),u(null),d(!1),i.current&&(i.current.innerHTML="")}catch(Y){console.error("❌ 微应用卸载失败:",Y)}}},[c,E]),ce=F.useCallback(()=>{console.log("🗑️ 删除 SkeletonNode"),r&&r()},[r]);return F.useCallback(Y=>{console.log("🔄 更新节点属性:",Y),n&&n(Y)},[n]),F.useEffect(()=>{!p.current&&E&&x&&(p.current=!0,console.log("🚀 自动加载微应用"),te())},[E,x,te]),F.useEffect(()=>()=>{if(console.log("🧹 SkeletonNodeView 清理"),c)try{c.unmount()}catch(Y){console.error("❌ 清理时卸载微应用失败:",Y)}if(h)try{h.destroy()}catch(Y){console.error("❌ 清理时销毁协同管理器失败:",Y)}},[c,h]),F.useEffect(()=>{console.log("🔄 SkeletonNodeView 属性变化:",{microName:E,wsUrl:x,width:A,height:U})},[E,x,A,U]),j.jsxs(BL,{as:"div",className:"skeleton-node-wrapper",style:{border:"2px solid #007bff",borderRadius:"8px",padding:"20px",margin:"16px 0",background:"#f8f9fa",minHeight:"200px",width:A,height:U},children:[j.jsxs("div",{style:{marginBottom:"16px"},children:[j.jsx("h3",{style:{margin:"0 0 8px 0",color:"#007bff"},children:"🎉 SkeletonNode React 组件渲染成功!"}),j.jsxs("p",{style:{margin:"4px 0",fontSize:"14px"},children:[j.jsx("strong",{children:"微应用名称:"})," ",E||"未设置"]}),j.jsxs("p",{style:{margin:"4px 0",fontSize:"14px"},children:[j.jsx("strong",{children:"WebSocket地址:"})," ",x||"未设置"]}),j.jsxs("p",{style:{margin:"4px 0",fontSize:"14px"},children:[j.jsx("strong",{children:"尺寸:"})," ",A," × ",U]})]}),h&&j.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"#e9ecef",borderRadius:"4px",fontSize:"12px"},children:[j.jsxs("div",{style:{marginBottom:"8px"},children:[j.jsx("strong",{children:"协同状态:"}),j.jsx("span",{style:{color:y==="connected"?"#28a745":"#dc3545",marginLeft:"8px"},children:y==="connected"?"🟢 已连接":"🔴 未连接"})]}),j.jsxs("div",{style:{marginBottom:"4px"},children:[j.jsx("strong",{children:"在线用户:"})," ",v.length," 人"]}),j.jsxs("div",{children:[j.jsx("strong",{children:"共享数据:"})," ",Object.keys(S).length," 项"]})]}),j.jsxs("div",{style:{marginBottom:"16px"},children:[j.jsx("button",{onClick:te,disabled:o,style:{padding:"8px 16px",background:o?"#6c757d":"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:o?"not-allowed":"pointer",marginRight:"10px"},children:o?"加载中...":"加载微应用"}),f&&j.jsx("button",{onClick:Pe,style:{padding:"8px 16px",background:"#ffc107",color:"#212529",border:"none",borderRadius:"4px",cursor:"pointer",marginRight:"10px"},children:"卸载微应用"}),j.jsx("button",{onClick:ce,style:{padding:"8px 16px",background:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"删除节点"})]}),l&&j.jsxs("div",{style:{padding:"12px",background:"#f8d7da",color:"#721c24",border:"1px solid #f5c6cb",borderRadius:"4px",marginBottom:"16px"},children:[j.jsx("strong",{children:"错误:"})," ",l]}),j.jsx("div",{ref:i,className:"skeleton-node-content",style:{width:"100%",height:"200px",border:"1px solid #ddd",borderRadius:"4px",background:"white",display:"flex",alignItems:"center",justifyContent:"center",color:"#666",position:"relative"},children:o?j.jsx("div",{children:"🔄 正在加载微应用..."}):f?j.jsx("div",{style:{position:"absolute",top:"8px",right:"8px",fontSize:"12px",color:"#28a745"},children:"✅ 微应用已加载"}):j.jsxs("div",{children:["📱 微应用容器 (微应用: ",E||"未设置",")"]})})]})},tY=tn.create({name:"skeletonNode",group:"block",content:"block*",atom:!0,onCreate(){console.log("🎉 SkeletonNode 被创建了!")},onDestroy(){console.log("💀 SkeletonNode 被销毁了!")},addAttributes(){return{microName:{default:"",parseHTML:t=>t.getAttribute("data-micro-name"),renderHTML:t=>t.microName?{"data-micro-name":t.microName}:{}},wsUrl:{default:"",parseHTML:t=>t.getAttribute("data-ws-url"),renderHTML:t=>t.wsUrl?{"data-ws-url":t.wsUrl}:{}},width:{default:"100%",parseHTML:t=>t.getAttribute("data-width"),renderHTML:t=>t.width?{"data-width":t.width}:{}},height:{default:"200px",parseHTML:t=>t.getAttribute("data-height"),renderHTML:t=>t.height?{"data-height":t.height}:{}}}},parseHTML(){return[{tag:'div[data-type="skeleton-node"]'}]},renderHTML({HTMLAttributes:t}){return["div",ct(t,{"data-type":"skeleton-node",class:"skeleton-node-container"}),0]},addNodeView(){return console.log("🔧 SkeletonNode addNodeView 被调用"),HL(eY,{as:"div",className:"skeleton-node-wrapper"})},addCommands(){return{setSkeletonNode:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}}}),LO=new Map;class nY{constructor(e){this.room=e,this.onmessage=null,this._onChange=n=>n.key===e&&this.onmessage!==null&&this.onmessage({data:L9(n.newValue||"")}),m9(this._onChange)}postMessage(e){wM.setItem(this.room,R9(D9(e)))}close(){g9(this._onChange)}}const rY=typeof BroadcastChannel>"u"?nY:BroadcastChannel,Wy=t=>Fn(LO,t,()=>{const e=Qr(),n=new rY(t);return n.onmessage=r=>e.forEach(i=>i(r.data,"broadcastchannel")),{bc:n,subs:e}}),iY=(t,e)=>(Wy(t).subs.add(e),e),oY=(t,e)=>{const n=Wy(t),r=n.subs.delete(e);return r&&n.subs.size===0&&(n.bc.close(),LO.delete(t)),r},go=(t,e,n=null)=>{const r=Wy(t);r.bc.postMessage(e),r.subs.forEach(i=>i(e,n))},$O=0,Gy=1,BO=2,xm=(t,e)=>{B(t,$O);const n=HM(e);ke(t,n)},FO=(t,e,n)=>{B(t,Gy),ke(t,VM(e,n))},sY=(t,e,n)=>FO(e,n,nt(t)),jO=(t,e,n)=>{try{jM(e,nt(t),n)}catch(r){console.error("Caught error while handling a Yjs update",r)}},lY=(t,e)=>{B(t,BO),ke(t,e)},aY=jO,cY=(t,e,n,r)=>{const i=V(t);switch(i){case $O:sY(t,e,n);break;case Gy:jO(t,n,r);break;case BO:aY(t,n,r);break;default:throw new Error("Unknown message type")}return i},uY=0,fY=(t,e,n)=>{switch(V(t)){case uY:n(e,Wr(t))}},Ch=3e4;class dY extends dM{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const n=Yi();this.getLocalState()!==null&&Ch/2<=n-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const r=[];this.meta.forEach((i,o)=>{o!==this.clientID&&Ch<=n-i.lastUpdated&&this.states.has(o)&&r.push(o)}),r.length>0&&Ky(this,r,"timeout")},lr(Ch/10)),e.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const n=this.clientID,r=this.meta.get(n),i=r===void 0?0:r.clock+1,o=this.states.get(n);e===null?this.states.delete(n):this.states.set(n,e),this.meta.set(n,{clock:i,lastUpdated:Yi()});const s=[],l=[],a=[],c=[];e===null?c.push(n):o==null?e!=null&&s.push(n):(l.push(n),Sl(o,e)||a.push(n)),(s.length>0||a.length>0||c.length>0)&&this.emit("change",[{added:s,updated:a,removed:c},"local"]),this.emit("update",[{added:s,updated:l,removed:c},"local"])}setLocalStateField(e,n){const r=this.getLocalState();r!==null&&this.setLocalState({...r,[e]:n})}getStates(){return this.states}}const Ky=(t,e,n)=>{const r=[];for(let i=0;i<e.length;i++){const o=e[i];if(t.states.has(o)){if(t.states.delete(o),o===t.clientID){const s=t.meta.get(o);t.meta.set(o,{clock:s.clock+1,lastUpdated:Yi()})}r.push(o)}}r.length>0&&(t.emit("change",[{added:[],updated:[],removed:r},n]),t.emit("update",[{added:[],updated:[],removed:r},n]))},xl=(t,e,n=t.states)=>{const r=e.length,i=rt();B(i,r);for(let o=0;o<r;o++){const s=e[o],l=n.get(s)||null,a=t.meta.get(s).clock;B(i,s),B(i,a),Bi(i,JSON.stringify(l))}return ge(i)},hY=(t,e,n)=>{const r=ui(e),i=Yi(),o=[],s=[],l=[],a=[],c=V(r);for(let u=0;u<c;u++){const f=V(r);let d=V(r);const p=JSON.parse(Wr(r)),h=t.meta.get(f),m=t.states.get(f),y=h===void 0?0:h.clock;(y<d||y===d&&p===null&&t.states.has(f))&&(p===null?f===t.clientID&&t.getLocalState()!=null?d++:t.states.delete(f):t.states.set(f,p),t.meta.set(f,{clock:d,lastUpdated:i}),h===void 0&&p!==null?o.push(f):h!==void 0&&p===null?a.push(f):p!==null&&(Sl(p,m)||l.push(f),s.push(f)))}(o.length>0||l.length>0||a.length>0)&&t.emit("change",[{added:o,updated:l,removed:a},n]),(o.length>0||s.length>0||a.length>0)&&t.emit("update",[{added:o,updated:s,removed:a},n])},pY=t=>w9(t,(e,n)=>`${encodeURIComponent(n)}=${encodeURIComponent(e)}`).join("&"),Ai=0,VO=3,Wo=1,mY=2,Ia=[];Ia[Ai]=(t,e,n,r,i)=>{B(t,Ai);const o=cY(e,t,n.doc,n);r&&o===Gy&&!n.synced&&(n.synced=!0)};Ia[VO]=(t,e,n,r,i)=>{B(t,Wo),ke(t,xl(n.awareness,Array.from(n.awareness.getStates().keys())))};Ia[Wo]=(t,e,n,r,i)=>{hY(n.awareness,nt(e),n)};Ia[mY]=(t,e,n,r,i)=>{fY(e,n.doc,(o,s)=>gY(n,s))};const JS=3e4,gY=(t,e)=>console.warn(`Permission denied to access ${t.url}.
${e}`),zO=(t,e,n)=>{const r=ui(e),i=rt(),o=V(r),s=t.messageHandlers[o];return s?s(i,r,t,n,o):console.error("Unable to compute message"),i},UO=t=>{if(t.shouldConnect&&t.ws===null){const e=new t._WS(t.url);e.binaryType="arraybuffer",t.ws=e,t.wsconnecting=!0,t.wsconnected=!1,t.synced=!1,e.onmessage=n=>{t.wsLastMessageReceived=Yi();const r=zO(t,new Uint8Array(n.data),!0);Sy(r)>1&&e.send(ge(r))},e.onerror=n=>{t.emit("connection-error",[n,t])},e.onclose=n=>{t.emit("connection-close",[n,t]),t.ws=null,t.wsconnecting=!1,t.wsconnected?(t.wsconnected=!1,t.synced=!1,Ky(t.awareness,Array.from(t.awareness.getStates().keys()).filter(r=>r!==t.doc.clientID),t),t.emit("status",[{status:"disconnected"}])):t.wsUnsuccessfulReconnects++,setTimeout(UO,wy(L7(2,t.wsUnsuccessfulReconnects)*100,t.maxBackoffTime),t)},e.onopen=()=>{t.wsLastMessageReceived=Yi(),t.wsconnecting=!1,t.wsconnected=!0,t.wsUnsuccessfulReconnects=0,t.emit("status",[{status:"connected"}]);const n=rt();if(B(n,Ai),xm(n,t.doc),e.send(ge(n)),t.awareness.getLocalState()!==null){const r=rt();B(r,Wo),ke(r,xl(t.awareness,[t.doc.clientID])),e.send(ge(r))}},t.emit("status",[{status:"connecting"}])}},Eh=(t,e)=>{const n=t.ws;t.wsconnected&&n&&n.readyState===n.OPEN&&n.send(e),t.bcconnected&&go(t.bcChannel,e,t)};class yY extends dM{constructor(e,n,r,{connect:i=!0,awareness:o=new dY(r),params:s={},WebSocketPolyfill:l=WebSocket,resyncInterval:a=-1,maxBackoffTime:c=2500,disableBc:u=!1}={}){for(super();e[e.length-1]==="/";)e=e.slice(0,e.length-1);const f=pY(s);this.maxBackoffTime=c,this.bcChannel=e+"/"+n,this.url=e+"/"+n+(f.length===0?"":"?"+f),this.roomname=n,this.doc=r,this._WS=l,this.awareness=o,this.wsconnected=!1,this.wsconnecting=!1,this.bcconnected=!1,this.disableBc=u,this.wsUnsuccessfulReconnects=0,this.messageHandlers=Ia.slice(),this._synced=!1,this.ws=null,this.wsLastMessageReceived=0,this.shouldConnect=i,this._resyncInterval=0,a>0&&(this._resyncInterval=setInterval(()=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN){const d=rt();B(d,Ai),xm(d,r),this.ws.send(ge(d))}},a)),this._bcSubscriber=(d,p)=>{if(p!==this){const h=zO(this,new Uint8Array(d),!1);Sy(h)>1&&go(this.bcChannel,ge(h),this)}},this._updateHandler=(d,p)=>{if(p!==this){const h=rt();B(h,Ai),lY(h,d),Eh(this,ge(h))}},this.doc.on("update",this._updateHandler),this._awarenessUpdateHandler=({added:d,updated:p,removed:h},m)=>{const y=d.concat(p).concat(h),g=rt();B(g,Wo),ke(g,xl(o,y)),Eh(this,ge(g))},this._exitHandler=()=>{Ky(this.awareness,[r.clientID],"app closed")},Zr&&typeof process<"u"&&process.on("exit",this._exitHandler),o.on("update",this._awarenessUpdateHandler),this._checkInterval=setInterval(()=>{this.wsconnected&&JS<Yi()-this.wsLastMessageReceived&&this.ws.close()},JS/10),i&&this.connect()}get synced(){return this._synced}set synced(e){this._synced!==e&&(this._synced=e,this.emit("synced",[e]),this.emit("sync",[e]))}destroy(){this._resyncInterval!==0&&clearInterval(this._resyncInterval),clearInterval(this._checkInterval),this.disconnect(),Zr&&typeof process<"u"&&process.off("exit",this._exitHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.doc.off("update",this._updateHandler),super.destroy()}connectBc(){if(this.disableBc)return;this.bcconnected||(iY(this.bcChannel,this._bcSubscriber),this.bcconnected=!0);const e=rt();B(e,Ai),xm(e,this.doc),go(this.bcChannel,ge(e),this);const n=rt();B(n,Ai),FO(n,this.doc),go(this.bcChannel,ge(n),this);const r=rt();B(r,VO),go(this.bcChannel,ge(r),this);const i=rt();B(i,Wo),ke(i,xl(this.awareness,[this.doc.clientID])),go(this.bcChannel,ge(i),this)}disconnectBc(){const e=rt();B(e,Wo),ke(e,xl(this.awareness,[this.doc.clientID],new Map)),Eh(this,ge(e)),this.bcconnected&&(oY(this.bcChannel,this._bcSubscriber),this.bcconnected=!1)}disconnect(){this.shouldConnect=!1,this.disconnectBc(),this.ws!==null&&this.ws.close()}connect(){this.shouldConnect=!0,!this.wsconnected&&this.ws===null&&(UO(this),this.connectBc())}}const vY=({microName:t,wsUrl:e,onEditorReady:n})=>{const r=F.useRef(null),i=F.useRef(null),o=F.useRef(null),s=RL({extensions:[H$,tY],content:"<p>欢迎使用编辑器！</p>",onUpdate:({editor:l})=>{console.log("编辑器内容已更新")},onCreate:({editor:l})=>{console.log("🎉 TipTap 编辑器创建完成!"),console.log("🔍 编辑器扩展:",l.extensionManager.extensions),r.current||(console.log("🔧 初始化 Yjs 文档和 WebSocket 协同..."),r.current=new fi,i.current=new yY(e,`editor-${t}`,r.current),console.log("✅ Yjs 和 WebSocket 协同初始化完成")),n&&n({editor:l,ydoc:r.current,provider:i.current,insertSkeletonNode:()=>{console.log("🎯 正在插入 SkeletonNode...",{microName:t,wsUrl:e}),l.chain().focus().insertContent({type:"skeletonNode",attrs:{microName:t,wsUrl:e,width:"100%",height:"200px"}}).run(),console.log("✅ SkeletonNode 插入完成")}})}});return F.useEffect(()=>()=>{console.log("🧹 清理编辑器资源"),i.current&&i.current.destroy(),r.current&&r.current.destroy()},[]),s?j.jsx("div",{ref:o,className:"editor-container",children:j.jsx(xL,{editor:s})}):j.jsx("div",{children:"正在加载编辑器..."})};const YS=[{name:"demo-micro-app",entry:"//localhost:3001",container:"#micro-app-container",activeRule:"/demo"},{name:"pyramid-app",entry:"//localhost:3002",container:"#micro-app-container",activeRule:"/pyramid"},{name:"chart-app",entry:"//localhost:3003",container:"#micro-app-container",activeRule:"/chart"}],wY=()=>{const[t,e]=F.useState(null),[n,r]=F.useState("demo-micro-app"),[i,o]=F.useState("ws://localhost:1234"),[s]=F.useState(YS.map(f=>f.name));F.useEffect(()=>{O7(YS),D7({sandbox:{strictStyleIsolation:!0,experimentalStyleIsolation:!0}})},[]);const l=f=>{console.log("🎉 编辑器准备就绪:",f),e(f),setTimeout(()=>{f.insertSkeletonNode()},1e3)},a=()=>{t&&t.insertSkeletonNode()},c=f=>{r(f.target.value)},u=f=>{o(f.target.value)};return j.jsxs("div",{className:"app",children:[j.jsxs("header",{className:"app-header",children:[j.jsx("h1",{children:"Block Editor 演示应用"}),j.jsxs("div",{className:"controls",children:[j.jsxs("div",{className:"control-group",children:[j.jsx("label",{htmlFor:"microName",children:"微应用名称:"}),j.jsx("select",{id:"microName",value:n,onChange:c,children:s.map(f=>j.jsx("option",{value:f,children:f},f))})]}),j.jsxs("div",{className:"control-group",children:[j.jsx("label",{htmlFor:"wsUrl",children:"WebSocket地址:"}),j.jsx("input",{id:"wsUrl",type:"text",value:i,onChange:u,placeholder:"输入WebSocket地址"})]}),j.jsx("button",{onClick:a,className:"insert-btn",children:"插入微应用节点"})]})]}),j.jsx("main",{className:"app-main",children:j.jsx("div",{className:"editor-container",children:j.jsx(vY,{microName:n,wsUrl:i,onEditorReady:l})})})]})};xh.createRoot(document.getElementById("root")).render(j.jsx($e.StrictMode,{children:j.jsx(wY,{})}));
//# sourceMappingURL=main-32e40116.js.map
